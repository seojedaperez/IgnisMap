import{j as e}from"./tactical-components-ecb51026.js";import{r as t}from"./react-vendor-e58626de.js";import{M as s,T as r,F as a,E as i}from"./map-vendor-95ccbafd.js";/* empty css                */import{b as l,d,e as n,f as o,A as m}from"./ui-vendor-b7f86872.js";const c=({organization:c,onZonesConfigured:x})=>{const[g,h]=t.useState([]),[p,u]=t.useState(""),[b,j]=t.useState("medium"),[y,f]=t.useState(!1),N=t.useRef(null),w=e=>{if(e.length<3)return 0;let t=0;for(let s=0;s<e.length;s++){const r=(s+1)%e.length;t+=e[s].latitude*e[r].longitude,t-=e[r].latitude*e[s].longitude}return t=Math.abs(t)/2,111*t*111},v=e=>{switch(e){case"critical":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3 md:py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 md:gap-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-2xl font-bold text-gray-900",children:"Monitoring Zones Configuration"}),e.jsxs("p",{className:"text-xs md:text-base text-gray-600",children:[c.name," - ",c.type]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4 mt-2 md:mt-0",children:[e.jsxs("span",{className:"text-xs md:text-sm text-gray-500",children:["Zones: ",g.length]}),e.jsxs("button",{onClick:()=>{0!==g.length?x(g):alert("You must configure at least one monitoring zone")},disabled:0===g.length,className:"bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white px-3 py-1.5 md:px-6 md:py-2 rounded-lg text-xs md:text-sm font-medium flex items-center gap-1 md:gap-2",children:[e.jsx(l,{className:"h-3 w-3 md:h-4 md:w-4"}),"Continue"]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-3 md:p-4",children:[e.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-900 mb-3 md:mb-4",children:"Configuration Map"}),e.jsxs("div",{className:"mb-3 md:mb-4 p-3 md:p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2 md:mb-3 text-sm md:text-base",children:"Create New Zone"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 md:gap-3",children:[e.jsx("input",{type:"text",value:p,onChange:e=>u(e.target.value),placeholder:"Zone name",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"}),e.jsxs("select",{value:b,onChange:e=>j(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[e.jsx("option",{value:"low",children:"Low Priority"}),e.jsx("option",{value:"medium",children:"Medium Priority"}),e.jsx("option",{value:"high",children:"High Priority"}),e.jsx("option",{value:"critical",children:"Critical Priority"})]}),e.jsxs("button",{onClick:()=>{p.trim()?f(!0):alert("Please enter a name for the zone before drawing it")},disabled:!p.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-3 py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-1 md:gap-2",children:[e.jsx(d,{className:"h-3 w-3 md:h-4 md:w-4"}),"Draw Zone"]})]}),e.jsxs("p",{className:"text-xs md:text-sm text-blue-700 mt-2",children:["1. Enter the zone name and priority",e.jsx("br",{}),'2. Click "Draw Zone"',e.jsx("br",{}),"3. Draw the polygon on the map",e.jsx("br",{}),"4. You can add multiple monitoring zones"]})]}),e.jsx("div",{style:{height:"400px",maxHeight:"calc(100vh - 300px)"},className:"rounded-lg overflow-hidden",children:e.jsxs(s,{center:[40.4168,-3.7038],zoom:10,style:{height:"100%",width:"100%"},ref:N,children:[e.jsx(r,{attribution:'¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(a,{children:e.jsx(i,{position:"topright",onCreated:e=>{const t=e.layer.getLatLngs()[0].map(e=>({latitude:e.lat,longitude:e.lng}));if(!p.trim())return void alert("Please enter a name for the zone before drawing it");const s=t.reduce((e,t)=>e+t.latitude,0),r=t.reduce((e,t)=>e+t.longitude,0),a={latitude:s/t.length,longitude:r/t.length},i=w(t),l={id:`zone_${Date.now()}`,name:p,polygon:t,center:a,area:i,priority:b,createdAt:(new Date).toISOString()};h([...g,l]),u(""),f(!1)},draw:{rectangle:!1,circle:!1,circlemarker:!1,marker:!1,polyline:!1,polygon:!!y&&{allowIntersection:!1,drawError:{color:"#e1e100",message:"<strong>Error:</strong> Lines cannot cross!"},shapeOptions:{color:"#ff0000",weight:3,opacity:.8,fillOpacity:.2}}},edit:{edit:!1,remove:!1}})})]})})]})}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-3 md:p-4",children:[e.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-900 mb-3 md:mb-4",children:"Configured Zones"}),0===g.length?e.jsxs("div",{className:"text-center py-6 md:py-8",children:[e.jsx(n,{className:"h-8 w-8 md:h-12 md:w-12 text-gray-400 mx-auto mb-3 md:mb-4"}),e.jsx("p",{className:"text-gray-500 text-sm md:text-base",children:"No zones configured"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-400",children:"Draw polygons on the map to create monitoring zones"})]}):e.jsx("div",{className:"space-y-2 md:space-y-3",children:g.map(t=>e.jsxs("div",{className:"p-2 md:p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 md:mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm md:text-base",children:t.name}),e.jsx("button",{onClick:()=>{return e=t.id,void h(g.filter(t=>t.id!==e));var e},className:"text-red-600 hover:text-red-700 p-1",children:e.jsx(o,{className:"h-3 w-3 md:h-4 md:w-4"})})]}),e.jsxs("div",{className:"space-y-1 text-xs md:text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Priority:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${v(t.priority)}`,children:t.priority.toUpperCase()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Area:"}),e.jsxs("span",{className:"font-medium",children:[t.area.toFixed(2)," km¬≤"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Points:"}),e.jsx("span",{className:"font-medium",children:t.polygon.length})]})]})]},t.id))})]}),e.jsx("div",{className:"bg-yellow-50 rounded-lg border border-yellow-200 p-3 md:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(m,{className:"h-4 w-4 md:h-5 md:w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-800 mb-1 md:mb-2 text-sm md:text-base",children:"Instructions"}),e.jsxs("ul",{className:"text-xs md:text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Draw polygons to define monitoring areas"}),e.jsx("li",{children:"‚Ä¢ You can create multiple zones with different priorities"}),e.jsx("li",{children:"‚Ä¢ Each zone will receive specific fire alerts"}),e.jsx("li",{children:"‚Ä¢ Priority determines alert urgency"})]})]})]})}),e.jsxs("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-3 md:p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2 text-sm md:text-base",children:"üõ∞Ô∏è Satellite Data"}),e.jsxs("div",{className:"text-xs md:text-sm text-blue-700 space-y-1",children:[e.jsxs("div",{children:["‚Ä¢ ",e.jsx("strong",{children:"Sentinel-2:"})," Active fire detection"]}),e.jsxs("div",{children:["‚Ä¢ ",e.jsx("strong",{children:"MODIS:"})," Real-time thermal monitoring"]}),e.jsxs("div",{children:["‚Ä¢ ",e.jsx("strong",{children:"Landsat:"})," Vegetation analysis (NDVI)"]}),e.jsxs("div",{children:["‚Ä¢ ",e.jsx("strong",{children:"VIIRS:"})," Nighttime fire detection"]})]})]})]})]})})]})};export{c as default};
