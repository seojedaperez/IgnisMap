import{j as e}from"../js/tactical-components-ecb51026.js";import{a as t,r as n,R as r,b as i,d as a,N as o,B as u}from"../js/react-vendor-e58626de.js";import{_ as c}from"../js/geo-vendor-30c39c1d.js";import{a as s}from"../js/emergency-services-9499df0c.js";import{TextAnalyticsClient as l,AzureKeyCredential as f}from"@azure/ai-text-analytics";import{AnomalyDetectorClient as d}from"@azure/ai-anomaly-detector";import{AzureKeyCredential as p}from"@azure/core-auth";import"../js/ui-vendor-b7f86872.js";import"../js/map-vendor-95ccbafd.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var v={},g=t;v.createRoot=g.createRoot,v.hydrateRoot=g.hydrateRoot;const m=n.createContext(void 0),h=({children:t})=>{const[r,i]=n.useState(!1),[a,o]=n.useState("low");return e.jsx(m.Provider,{value:{isEmergencyActive:r,setEmergencyActive:i,emergencyLevel:a,setEmergencyLevel:o},children:t})},y=n.createContext(void 0),w=({children:t})=>{const[r,i]=n.useState([]),a=e=>{const t={...e,id:Date.now().toString(),timestamp:(new Date).toISOString(),read:!1};i(e=>[t,...e])};return n.useEffect(()=>{i([{id:"1",title:"Riesgo Extremo de Incendio",message:"Condiciones meteorológicas extremas detectadas. Temperatura alta, baja humedad y vientos fuertes.",severity:"extreme",status:"active",location:"Parque Nacional de Doñana",timestamp:new Date(Date.now()-72e5).toISOString(),read:!1},{id:"2",title:"Alerta de Viento Fuerte",message:"Vientos superiores a 25 km/h detectados. Riesgo de propagación rápida de incendios.",severity:"high",status:"active",location:"Sierra de Guadarrama",timestamp:new Date(Date.now()-144e5).toISOString(),read:!1},{id:"3",title:"Temperatura Elevada",message:"Temperatura superior a 35°C registrada. Aumento del riesgo de ignición.",severity:"medium",status:"active",location:"Costa Brava",timestamp:new Date(Date.now()-216e5).toISOString(),read:!0},{id:"4",title:"Condiciones Normalizadas",message:"Las condiciones meteorológicas han vuelto a la normalidad. Riesgo reducido.",severity:"low",status:"resolved",location:"Picos de Europa",timestamp:new Date(Date.now()-432e5).toISOString(),read:!0},{id:"5",title:"Sequía Prolongada",message:"Período de sequía de más de 15 días. Vegetación seca aumenta el riesgo.",severity:"high",status:"active",location:"Andalucía Oriental",timestamp:new Date(Date.now()-864e5).toISOString(),read:!0}]);const e=setInterval(()=>{if(Math.random()<.3){const e=["low","medium","high","extreme"],t=["Madrid Centro","Barcelona","Valencia","Sevilla","Bilbao"],n=["Nueva Alerta Meteorológica","Cambio en Condiciones de Riesgo","Actualización de Pronóstico","Alerta de Temperatura"];a({title:n[Math.floor(Math.random()*n.length)],message:"Condiciones meteorológicas actualizadas detectadas por Azure Cognitive Services.",severity:e[Math.floor(Math.random()*e.length)],status:"active",location:t[Math.floor(Math.random()*t.length)]})}},3e4);return()=>clearInterval(e)},[]),e.jsx(y.Provider,{value:{alerts:r,addAlert:a,markAsRead:e=>{i(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},dismissAlert:e=>{i(t=>t.map(t=>t.id===e?{...t,status:"resolved"}:t))}},children:t})};const x=new class{config={subscriptionKey:"",baseUrl:"https://atlas.microsoft.com/weather"};configure(e){this.config.subscriptionKey=e}async getCurrentWeather(e=40.4168,t=-3.7038){try{if(!this.config.subscriptionKey)return this.getFallbackWeather(e,t);const n=new URLSearchParams({"api-version":"1.0",query:`${e},${t}`,"subscription-key":this.config.subscriptionKey,language:"es-ES",details:"true"}),r=await fetch(`${this.config.baseUrl}/currentConditions/json?${n}`);if(!r.ok)throw new Error(`Azure Maps Weather API error: ${r.status}`);const i=await r.json();if(!i.results||0===i.results.length)throw new Error("No weather data returned from Azure Maps");const a=i.results[0];return{temperature:Math.round(a.temperature.value),feelsLike:Math.round(a.realFeelTemperature.value),humidity:a.relativeHumidity,pressure:Math.round(a.pressure.value),windSpeed:Math.round(a.wind.speed.value),windDirection:a.wind.direction.degrees,visibility:Math.round(a.visibility.value),cloudCover:a.cloudCover,dewPoint:Math.round(a.dewPoint.value),description:a.phrase,timestamp:(new Date).toISOString(),uvIndex:a.uvIndex,windGust:Math.round(a.windGust?.speed?.value||1.3*a.wind.speed.value),precipitationProbability:0}}catch(n){return this.getFallbackWeather(e,t)}}async getForecast(e=40.4168,t=-3.7038){try{if(!this.config.subscriptionKey)return this.getFallbackForecast(e,t);const n=new URLSearchParams({"api-version":"1.0",query:`${e},${t}`,"subscription-key":this.config.subscriptionKey,language:"es-ES",duration:"5"}),r=await fetch(`${this.config.baseUrl}/forecast/daily/json?${n}`);if(!r.ok)throw new Error(`Azure Maps Forecast API error: ${r.status}`);return(await r.json()).forecasts.map(e=>({date:new Date(e.date).toISOString(),maxTemp:Math.round(e.temperature.maximum.value),minTemp:Math.round(e.temperature.minimum.value),humidity:50,windSpeed:Math.round(e.day.wind.speed.value),description:e.day.shortPhrase,precipitationProbability:e.day.precipitationProbability,thunderstormProbability:e.day.thunderstormProbability,windGust:Math.round(e.day.windGust?.speed?.value||1.3*e.day.wind.speed.value),uvIndex:5}))}catch(n){return this.getFallbackForecast(e,t)}}async getHourlyData(e=40.4168,t=-3.7038){try{if(!this.config.subscriptionKey)return this.getFallbackHourlyData(e,t);const n=new URLSearchParams({"api-version":"1.0",query:`${e},${t}`,"subscription-key":this.config.subscriptionKey,language:"es-ES",duration:"24"}),r=await fetch(`${this.config.baseUrl}/forecast/hourly/json?${n}`);if(!r.ok)throw new Error(`Azure Maps Hourly API error: ${r.status}`);return(await r.json()).forecasts.map(e=>({time:new Date(e.date).getHours().toString().padStart(2,"0")+":00",temperature:Math.round(e.temperature.value),humidity:e.relativeHumidity,windSpeed:Math.round(e.wind.speed.value),pressure:1013,precipitationProbability:e.precipitationProbability,cloudCover:e.cloudCover,uvIndex:e.uvIndex,windGust:Math.round(e.windGust?.speed?.value||1.3*e.wind.speed.value)}))}catch(n){return this.getFallbackHourlyData(e,t)}}async getSevereWeatherAlerts(e,t){try{if(!this.config.subscriptionKey)return[];const n=new URLSearchParams({"api-version":"1.0",query:`${e},${t}`,"subscription-key":this.config.subscriptionKey,language:"es-ES"}),r=await fetch(`${this.config.baseUrl}/severe/alerts/json?${n}`);if(!r.ok)return[];const i=await r.json();return i.results?.map(e=>({id:e.alertId,title:e.description.localized,description:e.description.english,severity:e.severity.toLowerCase(),urgency:e.urgency.toLowerCase(),certainty:e.certainty.toLowerCase(),startTime:e.startTime,endTime:e.endTime,areas:e.areas?.map(e=>e.name)||[]}))||[]}catch(n){return[]}}async getAirQuality(e,t){try{if(!this.config.subscriptionKey)return null;const n=new URLSearchParams({"api-version":"1.0",query:`${e},${t}`,"subscription-key":this.config.subscriptionKey,language:"es-ES"}),r=await fetch(`${this.config.baseUrl}/airQuality/current/json?${n}`);if(!r.ok)return null;const i=await r.json();if(!i.results||0===i.results.length)return null;const a=i.results[0];return{index:a.globalIndex,category:a.category,pollutants:a.pollutants?.map(e=>({name:e.name,value:e.concentration.value,unit:e.concentration.unit,category:e.category}))||[]}}catch(n){return null}}async getFallbackWeather(e=40.4168,t=-3.7038){try{const n=new URLSearchParams({latitude:e.toString(),longitude:t.toString(),current_weather:"true",hourly:"temperature_2m,relativehumidity_2m,windspeed_10m,surface_pressure,visibility,cloudcover",timezone:"auto",forecast_days:"1"}),r=await fetch(`https://api.open-meteo.com/v1/forecast?${n}`);if(!r.ok)throw new Error(`Open-Meteo API error: ${r.status}`);const i=await r.json(),a=i.current_weather,o=i.hourly,u=(new Date).getHours(),c=Math.min(u,o.time.length-1),s=o.relativehumidity_2m[c]||50,l=o.surface_pressure[c]||1013,f=o.visibility[c]||1e4,d=o.cloudcover[c]||0,p=this.calculateDewPoint(a.temperature,s),v=this.calculateFeelsLike(a.temperature,s,a.windspeed);return{temperature:Math.round(a.temperature),feelsLike:v,humidity:Math.round(s),pressure:Math.round(l),windSpeed:Math.round(a.windspeed),windDirection:Math.round(a.winddirection),visibility:Math.round(f/1e3),cloudCover:Math.round(d),dewPoint:Math.round(p),description:"Datos de Open-Meteo",timestamp:(new Date).toISOString(),uvIndex:5,windGust:Math.round(1.3*a.windspeed),precipitationProbability:0}}catch(n){return{temperature:25,feelsLike:26,humidity:50,pressure:1013,windSpeed:10,windDirection:180,visibility:10,cloudCover:30,dewPoint:15,description:"Datos predeterminados",timestamp:(new Date).toISOString(),uvIndex:5,windGust:13,precipitationProbability:0}}}async getFallbackForecast(e=40.4168,t=-3.7038){try{const n=new URLSearchParams({latitude:e.toString(),longitude:t.toString(),daily:"temperature_2m_max,temperature_2m_min,windspeed_10m_max,relative_humidity_2m_max,weathercode",timezone:"auto",forecast_days:"7"}),r=await fetch(`https://api.open-meteo.com/v1/forecast?${n}`);if(!r.ok)throw new Error(`Open-Meteo Forecast API error: ${r.status}`);const i=(await r.json()).daily;return i.time.map((e,t)=>({date:new Date(e).toISOString(),maxTemp:Math.round(i.temperature_2m_max[t]),minTemp:Math.round(i.temperature_2m_min[t]),humidity:Math.round(i.relative_humidity_2m_max[t]),windSpeed:Math.round(i.windspeed_10m_max[t]),description:"Pronóstico Open-Meteo",precipitationProbability:0,thunderstormProbability:0,windGust:Math.round(1.3*i.windspeed_10m_max[t]),uvIndex:5}))}catch(n){return Array(5).fill(null).map((e,t)=>{const n=new Date;return n.setDate(n.getDate()+t),{date:n.toISOString(),maxTemp:25+t,minTemp:15+t,humidity:50,windSpeed:10,description:"Pronóstico predeterminado",precipitationProbability:0,thunderstormProbability:0,windGust:13,uvIndex:5}})}}async getFallbackHourlyData(e=40.4168,t=-3.7038){try{const n=new URLSearchParams({latitude:e.toString(),longitude:t.toString(),hourly:"temperature_2m,relativehumidity_2m,windspeed_10m,surface_pressure",timezone:"auto",forecast_days:"1"}),r=await fetch(`https://api.open-meteo.com/v1/forecast?${n}`);if(!r.ok)throw new Error(`Open-Meteo Hourly API error: ${r.status}`);const i=(await r.json()).hourly;return i.time.map((e,t)=>({time:new Date(e).getHours().toString().padStart(2,"0")+":00",temperature:Math.round(i.temperature_2m[t]),humidity:Math.round(i.relativehumidity_2m[t]),windSpeed:Math.round(i.windspeed_10m[t]),pressure:Math.round(i.surface_pressure[t]),precipitationProbability:0,cloudCover:0,uvIndex:5,windGust:Math.round(1.3*i.windspeed_10m[t])}))}catch(n){return Array(24).fill(null).map((e,t)=>({time:t.toString().padStart(2,"0")+":00",temperature:20+5*Math.sin(t/12*Math.PI),humidity:50,windSpeed:10,pressure:1013,precipitationProbability:0,cloudCover:0,uvIndex:5,windGust:13}))}}calculateDewPoint(e,t){const n=17.27*e/(237.7+e)+Math.log(t/100);return 237.7*n/(17.27-n)}calculateFeelsLike(e,t,n){if(e>=26){const n=1.61139411*e-8.78469475556+2.33854883889*t+-.14611605*e*t+-.012308094*e*e+-.0164248277778*t*t+.002211732*e*e*t+72546e-8*e*t*t+-3582e-9*e*e*t*t;return Math.round(n)}if(e<=10&&n>4.8){const t=e,r=n,i=13.12+.6215*t-11.37*Math.pow(r,.16)+.3965*t*Math.pow(r,.16);return Math.round(i)}return e}getServiceStatus(){return{provider:"Azure Maps Weather Services (Microsoft + AccuWeather)",configured:!!this.config.subscriptionKey,capabilities:["Current Weather Conditions","Multi-day Forecasts","Hourly Forecasts","Severe Weather Alerts","Air Quality Index","UV Index","Wind Gust Data","Precipitation Probability","Professional AccuWeather Data"],fallbackAvailable:!0}}};
/*!
 * Microsoft Dynamic Proto Utility, 1.1.11
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var b,I="undefined",C="constructor",T="prototype",S="function",_="_dynInstFuncs",k="_isDynProxy",E="_dynClass",M="_dynInstChk",A=M,D="_dfOpts",P="_unknown_",N="__proto__",R="_dyn"+N,L="__dynProto$Gbl",U="_dynInstProto",j="useBaseInst",z="setInstFuncs",V=Object,O=V.getPrototypeOf,q=V.getOwnPropertyNames;var F,H=(typeof globalThis!==I&&(F=globalThis),F||typeof self===I||(F=self),F||typeof window===I||(F=window),F||typeof globalThis===I||(F=globalThis),F||{}),B=H[L]||(H[L]={o:(b={},b[z]=!0,b[j]=!0,b),n:1e3});function K(e,t){return e&&V[T].hasOwnProperty.call(e,t)}function G(e){return e&&(e===V[T]||e===Array[T])}function $(e){return G(e)||e===Function[T]}function X(e){var t;if(e){if(O)return O(e);var n=e[N]||e[T]||(e[C]?e[C][T]:null);t=e[R]||n,K(e,R)||(delete e[U],t=e[R]=e[U]||e[R],e[U]=n)}return t}function W(e,t){var n=[];if(q)n=q(e);else for(var r in e)"string"==typeof r&&K(e,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function Z(e,t,n){return t!==C&&typeof e[t]===S&&(n||K(e,t))&&t!==N&&t!==T}function Y(e){throw new TypeError("DynamicProto: "+e)}function J(){return Object.create?(e=null,(t=Object.create)?t(e):{}):{};var e,t}function Q(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function ee(e,t,n,r,i){function a(e,t){var n=function(){var r=function(e,t,n,r){var i=null;if(e&&K(n,E)){var a=e[_]||J();if((i=(a[n[E]]||J())[t])||Y("Missing ["+t+"] "+S),!i[M]&&!1!==a[A]){for(var o=!K(e,t),u=X(e),c=[];o&&u&&!$(u)&&!Q(c,u);){var s=u[t];if(s){o=s===r;break}c.push(u),u=X(u)}try{o&&(e[t]=i),i[M]=1}catch(l){a[A]=!1}}}return i}(this,t,e,n)||function(e,t,n){var r=t[e];return r===n&&(r=X(t)[e]),typeof r!==S&&Y("["+e+"] is not a "+S),r}(t,e,n);return r.apply(this,arguments)};return n[k]=1,n}if(!G(e)){var o=n[_]=n[_]||J();if(!G(o)){var u=o[t]=o[t]||J();!1!==o[A]&&(o[A]=!!i),G(u)||W(n,function(t){Z(n,t,!1)&&n[t]!==r[t]&&(u[t]=n[t],delete n[t],(!K(e,t)||e[t]&&!e[t][k])&&(e[t]=a(e,t)))})}}}function te(e,t){return K(e,T)?e.name||t||P:((e||{})[C]||{}).name||t||P}function ne(e,t,n,r){K(e,T)||Y("theClass is an invalid class definition.");var i=e[T];(function(e,t){if(O){for(var n=[],r=X(t);r&&!$(r)&&!Q(n,r);){if(r===e)return!0;n.push(r),r=X(r)}return!1}return!0})(i,t)||Y("["+te(e)+"] not in hierarchy of ["+te(t)+"]");var a=null;K(i,E)?a=i[E]:(a="_dynCls$"+te(e,"_")+"$"+B.n,B.n++,i[E]=a);var o=ne[D],u=!!o[j];u&&r&&void 0!==r[j]&&(u=!!r[j]);var c=function(e){var t=J();return W(e,function(n){!t[n]&&Z(e,n,!1)&&(t[n]=e[n])}),t}(t),s=function(e,t,n,r){function i(e,t,n){var i=t[n];if(i[k]&&r){var a=e[_]||{};!1!==a[A]&&(i=(a[t[E]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var a=J();W(n,function(e){a[e]=i(t,n,e)});for(var o=X(e),u=[];o&&!$(o)&&!Q(u,o);)W(o,function(e){!a[e]&&Z(o,e,!O)&&(a[e]=i(t,o,e))}),u.push(o),o=X(o);return a}(i,t,c,u);n(t,s);var l=!!O&&!!o[z];l&&r&&(l=!!r[z]),ee(i,a,t,c,!1!==l)}ne[D]=B.o;var re="function",ie="object",ae="undefined",oe="prototype",ue="hasOwnProperty",ce=Object,se=ce[oe],le=ce.assign,fe=ce.create,de=ce.defineProperty,pe=se[ue],ve=null;function ge(e){void 0===e&&(e=!0);var t=!1===e?null:ve;return t||(typeof globalThis!==ae&&(t=globalThis),t||typeof self===ae||(t=self),t||typeof window===ae||(t=window),t||typeof globalThis===ae||(t=globalThis),ve=t),t}function me(e){throw new TypeError(e)}function he(e){if(fe)return fe(e);if(null==e)return{};var t=typeof e;function n(){}return t!==ie&&t!==re&&me("Object prototype may only be an Object:"+e),n[oe]=e,new n}(ge()||{}).Symbol,(ge()||{}).Reflect;var ye=le||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])se[ue].call(t,i)&&(e[i]=t[i]);return e},we=function(e,t){return we=ce.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[ue](n)&&(e[n]=t[n])},we(e,t)};function xe(e,t){function n(){this.constructor=e}typeof t!==re&&null!==t&&me("Class extends value "+String(t)+" is not a constructor or null"),we(e,t),e[oe]=null===t?he(t):(n[oe]=t[oe],new n)}function be(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}var Ie="initialize",Ce="name",Te="getNotifyMgr",Se="identifier",_e="push",ke="isInitialized",Ee="config",Me="instrumentationKey",Ae="logger",De="length",Pe="time",Ne="processNext",Re="getProcessTelContext",Le="addNotificationListener",Ue="removeNotificationListener",je="stopPollingInternalLogs",ze="onComplete",Ve="getPlugin",Oe="flush",qe="_extensions",Fe="splice",He="teardown",Be="messageId",Ke="message",Ge="isAsync",$e="_doTeardown",Xe="update",We="getNext",Ze="diagLog",Ye="setNextPlugin",Je="createNew",Qe="cookieCfg",et="indexOf",tt="substring",nt="userAgent",rt="split",it="setEnabled",at="substr",ot="nodeType",ut="apply",ct="replace",st="enableDebugExceptions",lt="logInternalMessage",ft="toLowerCase",dt="call",pt="type",vt="handler",gt="listeners",mt="isChildEvt",ht="getCtx",yt="setCtx",wt="complete",xt="traceId",bt="spanId",It="traceFlags",Ct="version",Tt="",St="channels",_t="core",kt="createPerfMgr",Et="disabled",Mt="extensionConfig",At="processTelemetry",Dt="priority",Pt="eventsSent",Nt="eventsDiscarded",Rt="eventsSendRequest",Lt="perfEvent",Ut="errorToConsole",jt="warnToConsole",zt="getPerfMgr",Vt="toISOString",Ot="endsWith",qt="indexOf",Ft="reduce",Ht="trim",Bt="toString",Kt="constructor",Gt=de,$t=ce.freeze,Xt=ce.keys,Wt=String[oe],Zt=Wt[Ht],Yt=Wt[Ot],Jt=Date[oe][Vt],Qt=Array.isArray,en=se[Bt],tn=pe[Bt],nn=tn[dt](ce),rn=/-([a-z])/g,an=/([^\w\d_$])/g,on=/^(\d+[\w\d_$])/,un=Object.getPrototypeOf;function cn(e){if(e){if(un)return un(e);var t=e.__proto__||e[oe]||e[Kt];if(t)return t}return null}function sn(e){return void 0===e||typeof e===ae}function ln(e){return null===e||sn(e)}function fn(e){return!ln(e)}function dn(e,t){return!(!e||!pe[dt](e,t))}function pn(e){return!(!e||typeof e!==ie)}function vn(e){return!(!e||typeof e!==re)}function gn(e){var t=e;return t&&bn(t)&&(t=(t=(t=t[ct](rn,function(e,t){return t.toUpperCase()}))[ct](an,"_"))[ct](on,function(e,t){return"_"+t})),t}function mn(e,t){if(e)for(var n in e)pe[dt](e,n)&&t[dt](e,n,e[n])}function hn(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=Yt?e[Ot](t):function(e,t){var n=!1,r=t?t[De]:0,i=e?e[De]:0;if(r&&i&&i>=r&&!(n=e===t)){for(var a=i-1,o=r-1;o>=0;o--){if(e[a]!=t[o])return!1;a--}n=!0}return n}(e,t)),n}function yn(e,t){return!(!e||!t)&&-1!==e[et](t)}var wn=Qt||function(e){return!(!e||"[object Array]"!==en[dt](e))};function xn(e){return!(!e||"[object Error]"!==en[dt](e))}function bn(e){return"string"==typeof e}function In(e){return"number"==typeof e}function Cn(e){var t=!1;if(e&&"object"==typeof e){var n=un?un(e):cn(e);n?(n[Kt]&&pe[dt](n,Kt)&&(n=n[Kt]),t=typeof n===re&&tn[dt](n)===nn):t=!0}return t}function Tn(e){if(e)return Jt?e[Vt]():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t[De]&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function Sn(e,t,n){var r=e[De];try{for(var i=0;i<r&&(!(i in e)||-1!==t[dt](n||e,e[i],i,e));i++);}catch(a){}}function _n(e,t,n){if(e){if(e[qt])return e[qt](t,n);var r=e[De],i=n||0;try{for(var a=Math.max(i>=0?i:r-Math.abs(i),0);a<r;a++)if(a in e&&e[a]===t)return a}catch(o){}}return-1}function kn(e,t,n){var r;if(e){if(e.map)return e.map(t,n);var i=e[De],a=n||e;r=new Array(i);try{for(var o=0;o<i;o++)o in e&&(r[o]=t[dt](a,e[o],e))}catch(u){}}return r}function En(e){return e&&(e=Zt&&e[Ht]?e[Ht]():e[ct]?e[ct](/^\s+|(?=\s)\s+$/g,Tt):e),e}var Mn=!{toString:null}.propertyIsEnumerable("toString"),An=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Dn(e){var t=typeof e;if(t===re||t===ie&&null!==e||me("objKeys called on non-object"),!Mn&&Xt)return Xt(e);var n=[];for(var r in e)e&&pe[dt](e,r)&&n[_e](r);if(Mn)for(var i=An[De],a=0;a<i;a++)e&&pe[dt](e,An[a])&&n[_e](An[a]);return n}function Pn(e,t,n,r){if(Gt)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),Gt(e,t,i),!0}catch(a){}return!1}function Nn(e){return $t&&mn(e,function(e,t){(wn(t)||pn(t))&&$t(t)}),Rn(e)}var Rn=$t||function(e){return e};function Ln(){var e=Date;return e.now?e.now():(new e).getTime()}function Un(e){return xn(e)?e[Ce]:Tt}function jn(e,t,n,r,i){var a=n;return e&&((a=e[t])===n||i&&!i(a)||r&&!r(n)||(a=n,e[t]=a)),a}function zn(e,t,n){var r;return e?!(r=e[t])&&ln(r)&&(r=sn(n)?{}:n,e[t]=r):r=sn(n)?{}:n,r}function Vn(e,t){return ln(e)?t:e}function On(e){return!!e}function qn(e){throw new Error(e)}function Fn(e,t){var n=null,r=null;return vn(e)?n=e:r=e,function(){var e=arguments;if(n&&(r=n()),r)return r[t][ut](r,e)}}function Hn(e,t,n,r,i){e&&t&&n&&(!1!==i||sn(e[t]))&&(e[t]=Fn(n,r))}function Bn(e,t,n,r){return e&&t&&pn(e)&&wn(n)&&Sn(n,function(n){bn(n)&&Hn(e,n,t,n,r)}),e}function Kn(e){return e&&le&&(e=ce(le({},e))),e}function Gn(e,t,n,r,i,a){var o=arguments,u=o[0]||{},c=o[De],s=!1,l=1;for(c>0&&"boolean"==typeof u&&(s=u,u=o[l]||{},l++),pn(u)||(u={});l<c;l++){var f=o[l],d=wn(f),p=pn(f);for(var v in f){if(d&&v in f||p&&pe[dt](f,v)){var g=f[v],m=void 0;if(s&&g&&((m=wn(g))||Cn(g))){var h=u[v];m?wn(h)||(h=[]):Cn(h)||(h={}),g=Gn(s,h,g)}void 0!==g&&(u[v]=g)}}}return u}function $n(e){var t={};return mn(e,function(e,n){t[e]=n,t[n]=e}),Nn(t)}var Xn="window",Wn="JSON",Zn="msie",Yn="trident/",Jn="XMLHttpRequest",Qn=null,er=null,tr=null,nr=null;function rr(e,t){var n=!1;if(e){try{if(!(n=t in e)){var r=e[oe];r&&(n=t in r)}}catch(i){}if(!n)try{n=!sn((new e)[t])}catch(i){}}return n}function ir(e){var t=ge();return t&&t[e]?t[e]:e===Xn&&ar()?window:null}function ar(){return Boolean(typeof window===ie&&window)}function or(){return ar()?window:ir(Xn)}function ur(){return Boolean(typeof document===ie&&document)}function cr(){return ur()?document:ir("document")}function sr(){return Boolean(typeof navigator===ie&&navigator)}function lr(){return sr()?navigator:ir("navigator")}function fr(){return Boolean(typeof history===ie&&history)}function dr(e){return typeof location===ie&&location?location:ir("location")}function pr(){return ir("performance")}function vr(){return Boolean(typeof JSON===ie&&JSON||null!==ir(Wn))}function gr(){return vr()?JSON||ir(Wn):null}function mr(){var e=lr();if(e&&(e[nt]!==er||null===Qn)){var t=((er=e[nt])||Tt)[ft]();Qn=yn(t,Zn)||yn(t,Yn)}return Qn}function hr(e){if(void 0===e&&(e=null),!e){var t=lr()||{};e=t?(t[nt]||Tt)[ft]():Tt}var n=(e||Tt)[ft]();if(yn(n,Zn)){var r=cr()||{};return Math.max(parseInt(n[rt](Zn)[1]),r.documentMode||0)}if(yn(n,Yn)){var i=parseInt(n[rt](Yn)[1]);if(i)return i+4}return null}function yr(e){var t=Object[oe].toString[dt](e),n=Tt;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[Ce]+"'":vr()&&(n=gr().stringify(e)),t+n}function wr(){return null===nr&&(nr=sr()&&Boolean(lr().sendBeacon)),nr}function xr(e){var t=!1;try{t=!!ir("fetch");var n=ir("Request");t&&e&&n&&(t=rr(n,"keepalive"))}catch(r){}return t}function br(){return null===tr&&(tr=typeof XDomainRequest!==ae)&&Ir()&&(tr=tr&&!rr(ir(Jn),"withCredentials")),tr}function Ir(){var e=!1;try{e=!!ir(Jn)}catch(t){}return e}var Cr,Tr=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],Sr=null;function _r(e,t){return function(){var n=arguments,r=kr(t);if(r){var i=r.listener;i&&i[e]&&i[e][ut](i,n)}}}function kr(e){var t,n=Sr;return n||!0===e.disableDbgExt||(n=Sr||((t=ir("Microsoft"))&&(Sr=t.ApplicationInsights),Sr)),n?n.ChromeDbgExt:null}function Er(e){if(!Cr){Cr={};for(var t=0;t<Tr[De];t++)Cr[Tr[t]]=_r(Tr[t],e)}return Cr}function Mr(e){return e?'"'+e[ct](/\"/g,Tt)+'"':Tt}function Ar(e,t){var n=typeof console!==ae?console:ir("console");if(n){var r="log";n[e]&&(r=e),vn(n[r])&&n[r](t)}}var Dr=function(){function e(e,t,n,r){void 0===n&&(n=!1);var i=this;i[Be]=e,i[Ke]=(n?"AI: ":"AI (Internal): ")+e;var a=Tt;vr()&&(a=gr().stringify(r));var o=(t?" message:"+Mr(t):Tt)+(r?" props:"+Mr(a):Tt);i[Ke]+=o}return e.dataType="MessageData",e}();function Pr(e,t){return(e||{})[Ae]||new Nr(t)}var Nr=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,r,i,a,o=0,u={};ne(e,this,function(e){function c(t,n){if(!(o>=i)){var a=!0,c="AITR_"+n[Be];if(u[c]?a=!1:u[c]=!0,a&&(t<=r&&(e.queue[_e](n),o++,s(1===t?"error":"warn",n)),o===i)){var l="Internal events throttle limit per PageView reached for this app.",f=new Dr(23,l,!1);e.queue[_e](f),1===t?e[Ut](l):e[jt](l)}}}function s(e,n){var r=kr(t||{});r&&r[Ze]&&r[Ze](e,n)}!function(e){n=Vn(e.loggingLevelConsole,0),r=Vn(e.loggingLevelTelemetry,1),i=Vn(e.maxMessageLimit,25),a=Vn(e.enableDebug,Vn(e[st],!1))}(t||{}),e.consoleLoggingLevel=function(){return n},e.telemetryLoggingLevel=function(){return r},e.maxInternalMessageLimit=function(){return i},e[st]=function(){return a},e.throwInternal=function(t,r,i,o,l){void 0===l&&(l=!1);var f=new Dr(r,i,l,o);if(a)throw yr(f);var d=1===t?Ut:jt;if(sn(f[Ke]))s("throw"+(1===t?"Critical":"Warning"),f);else{if(l){var p=+f[Be];!u[p]&&n>=t&&(e[d](f[Ke]),u[p]=!0)}else n>=t&&e[d](f[Ke]);c(t,f)}},e[jt]=function(e){Ar("warn",e),s("warning",e)},e[Ut]=function(e){Ar("error",e),s("error",e)},e.resetInternalMessageCount=function(){o=0,u={}},e[lt]=c})}return e.__ieDyn=1,e}();function Rr(e){return e||new Nr}function Lr(e,t,n,r,i,a){void 0===a&&(a=!1),Rr(e).throwInternal(t,n,r,i,a)}function Ur(e,t){Rr(e)[jt](t)}var jr="ctx",zr="ParentContextKey",Vr="ChildrenContextKey",Or=function(){function e(t,n,r){var i,a=this,o=!1;(a.start=Ln(),a[Ce]=t,a[Ge]=r,a[mt]=function(){return!1},vn(n))&&(o=Pn(a,"payload",function(){return!i&&vn(n)&&(i=n(),n=null),i}));a[ht]=function(t){return t?t===e[zr]||t===e[Vr]?a[t]:(a[jr]||{})[t]:null},a[yt]=function(t,n){if(t)if(t===e[zr])a[t]||(a[mt]=function(){return!0}),a[t]=n;else if(t===e[Vr])a[t]=n;else{(a[jr]=a[jr]||{})[t]=n}},a[wt]=function(){var t=0,r=a[ht](e[Vr]);if(wn(r))for(var i=0;i<r[De];i++){var u=r[i];u&&(t+=u[Pe])}a[Pe]=Ln()-a.start,a.exTime=a[Pe]-t,a[wt]=function(){},!o&&vn(n)&&(a.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),qr=function(){function e(t){this.ctx={},ne(e,this,function(e){e.create=function(e,t,n){return new Or(e,t,n)},e.fire=function(e){e&&(e[wt](),t&&vn(t[Lt])&&t[Lt](e))},e[yt]=function(t,n){t&&((e[jr]=e[jr]||{})[t]=n)},e[ht]=function(t){return(e[jr]||{})[t]}})}return e.__ieDyn=1,e}(),Fr="CoreUtils.doPerf";function Hr(e,t,n,r,i){if(e){var a=e;if(a[zt]&&(a=a[zt]()),a){var o=void 0,u=a[ht](Fr);try{if(o=a.create(t(),r,i)){if(u&&o[yt]&&(o[yt](Or[zr],u),u[ht]&&u[yt])){var c=u[ht](Or[Vr]);c||(c=[],u[yt](Or[Vr],c)),c[_e](o)}return a[yt](Fr,o),n(o)}}catch(s){o&&o[yt]&&o[yt]("exception",s)}finally{o&&a.fire(o),a[yt](Fr,u)}}}return n()}var Br=4294967296,Kr=4294967295,Gr=!1,$r=123456789,Xr=987654321;function Wr(){try{var e=2147483647&Ln();(t=(Math.random()*Br^e)+e)<0&&(t>>>=0),$r=123456789+t&Kr,Xr=987654321-t&Kr,Gr=!0}catch(n){}var t}function Zr(e){var t=0,n=ir("crypto")||ir("msCrypto");return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&Kr),0===t&&mr()&&(Gr||Wr(),t=function(e){var t=((Xr=36969*(65535&Xr)+(Xr>>16)&Kr)<<16)+(65535&($r=18e3*(65535&$r)+($r>>16)&Kr))>>>0&Kr;e||(t>>>=0);return t}()&Kr),0===t&&(t=Math.floor(Br*Math.random()|0)),e||(t>>>=0),t}function Yr(e){void 0===e&&(e=22);for(var t=Zr()>>>0,n=0,r=Tt;r[De]<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(Zr()<<2&4294967295|3&t)>>>0,n=0);return r}var Jr=de,Qr="2.8.18",ei="."+Yr(6),ti=0;function ni(e){return 1===e[ot]||9===e[ot]||!+e[ot]}function ri(e,t){var n=t[e.id];if(!n){n={};try{ni(t)&&(function(e,t,n){if(Jr)try{return Jr(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch(r){}return!1}(t,e.id,n)||(t[e.id]=n))}catch(r){}}return n}function ii(e,t){return void 0===t&&(t=!1),gn(e+ti+++(t?"."+Qr:Tt)+ei)}function ai(e){var t={id:ii("_aiData-"+(e||Tt)+"."+Qr),accept:function(e){return ni(e)},get:function(e,n,r,i){var a=e[t.id];return a?a[gn(n)]:(i&&((a=ri(t,e))[gn(n)]=r),r)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(n){}}};return t}var oi="toGMTString",ui="toUTCString",ci="cookie",si="expires",li="enabled",fi="isCookieUseDisabled",di="disableCookiesUsage",pi="_ckMgr",vi=null,gi=null,mi=null,hi=cr(),yi={},wi={};function xi(e){return!e||e.isEnabled()}function bi(e,t){return!!(t&&e&&wn(e.ignoreCookies))&&-1!==e.ignoreCookies[et](t)}function Ii(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t[Qe];n=r[pi]?r[pi]:Ci(t)}return n||(n=function(e,t){var n=Ci[pi]||wi[pi];return n||(n=Ci[pi]=Ci(e,t),wi[pi]=n),n}(t,(e||{})[Ae])),n}function Ci(e,t){var n,r=function(e){var t=e[Qe]=e[Qe]||{};if(jn(t,"domain",e.cookieDomain,fn,ln),jn(t,"path",e.cookiePath||"/",null,ln),ln(t[li])){var n=void 0;sn(e[fi])||(n=!e[fi]),sn(e[di])||(n=!e[di]),t[li]=n}return t}(e||wi),i=r.path||"/",a=r.domain,o=!1!==r[li],u=((n={isEnabled:function(){var e=o&&Ti(t),n=wi[pi];return e&&n&&u!==n&&(e=xi(n)),e}})[it]=function(e){o=!1!==e},n.set=function(e,t,n,o,c){var s=!1;if(xi(u)&&!function(e,t){return!!(t&&e&&wn(e.blockedCookies)&&-1!==e.blockedCookies[et](t))||bi(e,t)}(r,e)){var l={},f=En(t||Tt),d=f[et](";");if(-1!==d&&(f=En(t[tt](0,d)),l=Si(t[tt](d+1))),jn(l,"domain",o||a,On,sn),!ln(n)){var p=mr();if(sn(l[si])){var v=Ln()+1e3*n;if(v>0){var g=new Date;g.setTime(v),jn(l,si,_i(g,p?oi:ui)||_i(g,p?oi:ui)||Tt,On)}}p||jn(l,"max-age",Tt+n,null,sn)}var m=dr();m&&"https:"===m.protocol&&(jn(l,"secure",null,null,sn),null===gi&&(gi=!function(e){if(!bn(e))return!1;if(yn(e,"CPU iPhone OS 12")||yn(e,"iPad; CPU OS 12"))return!0;if(yn(e,"Macintosh; Intel Mac OS X 10_14")&&yn(e,"Version/")&&yn(e,"Safari"))return!0;if(yn(e,"Macintosh; Intel Mac OS X 10_14")&&hn(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))return!0;if(yn(e,"Chrome/5")||yn(e,"Chrome/6"))return!0;if(yn(e,"UnrealEngine")&&!yn(e,"Chrome"))return!0;if(yn(e,"UCBrowser/12")||yn(e,"UCBrowser/11"))return!0;return!1}((lr()||{})[nt])),gi&&jn(l,"SameSite","None",null,sn)),jn(l,"path",c||i,null,sn),(r.setCookie||Mi)(e,ki(f,l)),s=!0}return s},n.get=function(e){var t=Tt;return xi(u)&&!bi(r,e)&&(t=(r.getCookie||Ei)(e)),t},n.del=function(e,t){var n=!1;return xi(u)&&(n=u.purge(e,t)),n},n.purge=function(e,n){var i,a=!1;if(Ti(t)){var o=((i={}).path=n||"/",i[si]="Thu, 01 Jan 1970 00:00:01 GMT",i);mr()||(o["max-age"]="0"),(r.delCookie||Mi)(e,ki(Tt,o)),a=!0}return a},n);return u[pi]=u,u}function Ti(e){if(null===vi){vi=!1;try{vi=void 0!==(hi||{})[ci]}catch(t){Lr(e,2,68,"Cannot access document.cookie - "+Un(t),{exception:yr(t)})}}return vi}function Si(e){var t={};e&&e[De]&&Sn(En(e)[rt](";"),function(e){if(e=En(e||Tt)){var n=e[et]("=");-1===n?t[e]=null:t[En(e[tt](0,n))]=En(e[tt](n+1))}});return t}function _i(e,t){return vn(e[t])?e[t]():null}function ki(e,t){var n=e||Tt;return mn(t,function(e,t){n+="; "+e+(ln(t)?Tt:"="+t)}),n}function Ei(e){var t=Tt;if(hi){var n=hi[ci]||Tt;mi!==n&&(yi=Si(n),mi=n),t=En(yi[e]||Tt)}return t}function Mi(e,t){hi&&(hi[ci]=e+"="+t)}var Ai="attachEvent",Di="addEventListener",Pi="detachEvent",Ni="removeEventListener",Ri="events",Li="visibilitychange",Ui="pagehide",ji="unload",zi="beforeunload",Vi=ii("aiEvtPageHide");ii("aiEvtPageShow");var Oi=/\.[\.]+/g,qi=/[\.]+$/,Fi=1,Hi=ai("events"),Bi=/^([^.]*)(?:\.(.+)|)/;function Ki(e){return e&&e[ct]?e[ct](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Tt):e}function Gi(e,t){var n;if(t){var r=Tt;wn(t)?(r=Tt,Sn(t,function(e){(e=Ki(e))&&("."!==e[0]&&(e="."+e),r+=e)})):r=Ki(t),r&&("."!==r[0]&&(r="."+r),e=(e||Tt)+r)}var i=Bi.exec(e||Tt)||[];return(n={})[pt]=i[1],n.ns=(i[2]||Tt).replace(Oi,".").replace(qi,Tt)[rt](".").sort().join("."),n}function $i(e,t,n){void 0===n&&(n=!0);var r=Hi.get(e,Ri,{},n),i=r[t];return i||(i=r[t]=[]),i}function Xi(e,t,n,r){e&&t&&t[pt]&&(e[Ni]?e[Ni](t[pt],n,r):e[Pi]&&e[Pi]("on"+t[pt],n))}function Wi(e,t,n,r){for(var i=t[De];i--;){var a=t[i];a&&(n.ns&&n.ns!==a.evtName.ns||r&&!r(a)||(Xi(e,a.evtName,a[vt],a.capture),t[Fe](i,1)))}}function Zi(e,t){return t?Gi("xx",wn(t)?[e].concat(t):[e,t]).ns[rt]("."):e}function Yi(e,t,n,r,i){var a;void 0===i&&(i=!1);var o=!1;if(e)try{var u=Gi(t,r);if(o=function(e,t,n,r){var i=!1;return e&&t&&t[pt]&&n&&(e[Di]?(e[Di](t[pt],n,r),i=!0):e[Ai]&&(e[Ai]("on"+t[pt],n),i=!0)),i}(e,u,n,i),o&&Hi.accept(e)){var c=((a={guid:Fi++,evtName:u})[vt]=n,a.capture=i,a);$i(e,u.type)[_e](c)}}catch(s){}return o}function Ji(e,t,n,r,i){if(void 0===i&&(i=!1),e)try{var a=Gi(t,r),o=!1;!function(e,t,n){if(t[pt])Wi(e,$i(e,t[pt]),t,n);else{var r=Hi.get(e,Ri,{});mn(r,function(r,i){Wi(e,i,t,n)}),0===Dn(r)[De]&&Hi.kill(e,Ri)}}(e,a,function(e){return!((!a.ns||n)&&e[vt]!==n)&&(o=!0,!0)}),o||Xi(e,a,n,i)}catch(u){}}function Qi(e,t,n,r){var i=!1;return t&&e&&e[De]>0&&Sn(e,function(e){e&&(n&&-1!==_n(n,e)||(i=function(e,t,n){var r=!1,i=or();i&&(r=Yi(i,e,t,n),r=Yi(i.body,e,t,n)||r);var a=cr();return a&&(r=Yi(a,e,t,n)||r),r}(e,t,r)||i))}),i}function ea(e,t,n){e&&wn(e)&&Sn(e,function(e){e&&function(e,t,n){var r=or();r&&(Ji(r,e,t,n),Ji(r.body,e,t,n));var i=cr();i&&Ji(i,e,t,n)}(e,t,n)})}function ta(e,t,n){return function(e,t,n,r){var i=!1;return t&&e&&wn(e)&&!(i=Qi(e,t,n,r))&&n&&n[De]>0&&(i=Qi(e,t,null,r)),i}([zi,ji,Ui],e,t,n)}function na(e,t,n){var r=Zi(Vi,n),i=Qi([Ui],e,t,r);return t&&-1!==_n(t,Li)||(i=Qi([Li],function(t){var n=cr();e&&n&&"hidden"===n.visibilityState&&e(t)},t,r)||i),!i&&t&&(i=na(e,null,n)),i}function ra(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=Tt,r=0;r<4;r++)n+=t[15&(e=Zr())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&Zr())|0];return n[at](0,8)+n[at](9,4)+"4"+n[at](13,3)+i+n[at](16,3)+n[at](19,12)}var ia="00",aa="00000000000000000000000000000000",oa="0000000000000000";function ua(e,t,n){return!(!e||e[De]!==t||e===n)&&!!e.match(/^[\da-f]*$/i)}function ca(e,t,n){return ua(e,t)?e:n}function sa(e,t,n,r){var i;return(i={})[Ct]=ua(r,2,"ff")?r:ia,i[xt]=la(e)?e:ra(),i.spanId=fa(t)?t:ra()[at](0,16),i.traceFlags=n>=0&&n<=255?n:1,i}function la(e){return ua(e,32,aa)}function fa(e){return ua(e,16,oa)}function da(e){if(e){var t=function(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[De]<2;)t="0"+t;return t}(e[It]);ua(t,2)||(t="01");var n=e[Ct]||ia;return"00"!==n&&"ff"!==n&&(n=ia),"".concat(n.toLowerCase(),"-").concat(ca(e.traceId,32,aa).toLowerCase(),"-").concat(ca(e.spanId,16,oa).toLowerCase(),"-").concat(t.toLowerCase())}return""}var pa=ai("plugin");function va(e){return pa.get(e,"state",{},!0)}function ga(e,t){for(var n,r=[],i=null,a=e[We]();a;){var o=a[Ve]();if(o){i&&vn(i[Ye])&&vn(o[At])&&i[Ye](o);(vn(o[ke])?o[ke]():(n=va(o))[ke])||r[_e](o),i=o,a=a[We]()}}Sn(r,function(r){var i=e[_t]();r[Ie](e.getCfg(),i,t,e[We]()),n=va(r),r[_t]||n[_t]||(n[_t]=i),n[ke]=!0,delete n[He]})}function ma(e){return e.sort(function(e,t){var n=0;if(t){var r=vn(t[At]);vn(e[At])?n=r?e[Dt]-t[Dt]:1:r&&(n=-1)}else n=e?1:-1;return n})}var ha="TelemetryPluginChain",ya="_hasRun",wa="_getTelCtx",xa=0;function ba(e,t,n,r){var i=null,a=[];null!==r&&(i=r?function(e,t,n){for(;e;){if(e[Ve]()===n)return e;e=e[We]()}return Sa([n],t[Ee]||{},t)}(e,n,r):e);var o={_next:function(){var e=i;if(i=e?e[We]():null,!e){var t=a;t&&t[De]>0&&(Sn(t,function(e){try{e.func[dt](e.self,e.args)}catch(t){Lr(n[Ae],2,73,"Unexpected Exception during onComplete - "+yr(t))}}),a=[])}return e},ctx:{core:function(){return n},diagLog:function(){return Pr(n,t)},getCfg:function(){return t},getExtCfg:u,getConfig:function(e,n,r){void 0===r&&(r=!1);var i,a=u(e,null);a&&!ln(a[n])?i=a[n]:t&&!ln(t[n])&&(i=t[n]);return ln(i)?r:i},hasNext:function(){return!!i},getNext:function(){return i},setNext:function(e){i=e},iterate:function(e){var t;for(;t=o._next();){var n=t[Ve]();n&&e(n)}},onComplete:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e&&a[_e]({func:e,self:sn(t)?o.ctx:t,args:n})}}};function u(e,n,r){var i;if(void 0===n&&(n={}),void 0===r&&(r=0),t){var a=t[Mt];a&&e&&(i=a[e])}if(i){if(pn(n)&&0!==r){var o=Gn(!0,n,i);t&&2===r&&mn(n,function(e){if(ln(o[e])){var n=t[e];ln(n)||(o[e]=n)}}),i=o}}else i=n;return i}return o}function Ia(e,t,n,r){var i=ba(e,t,n,r),a=i.ctx;return a[Ne]=function(e){var t=i._next();return t&&t[At](e,a),!t},a[Je]=function(e,r){return void 0===e&&(e=null),wn(e)&&(e=Sa(e,t,n,r)),Ia(e||a[We](),t,n,r)},a}function Ca(e,t,n){var r=t[Ee]||{},i=ba(e,r,t,n),a=i.ctx;return a[Ne]=function(e){var t=i._next();return t&&t.unload(a,e),!t},a[Je]=function(e,n){return void 0===e&&(e=null),wn(e)&&(e=Sa(e,r,t,n)),Ca(e||a[We](),t,n)},a}function Ta(e,t,n){var r=t[Ee]||{},i=ba(e,r,t,n).ctx;return i[Ne]=function(e){return i.iterate(function(t){vn(t[Xe])&&t[Xe](i,e)})},i[Je]=function(e,n){return void 0===e&&(e=null),wn(e)&&(e=Sa(e,r,t,n)),Ta(e||i[We](),t,n)},i}function Sa(e,t,n,r){var i=null,a=!r;if(wn(e)&&e[De]>0){var o=null;Sn(e,function(e){if(a||r!==e||(a=!0),a&&e&&vn(e[At])){var u=function(e,t,n){var r,i=null,a=vn(e[At]),o=vn(e[Ye]);r=e?e[Se]+"-"+e[Dt]+"-"+xa++:"Unknown-0-"+xa++;var u={getPlugin:function(){return e},getNext:function(){return i},processTelemetry:l,unload:f,update:d,_id:r,_setNext:function(e){i=e}};function c(){var r;return e&&vn(e[wa])&&(r=e[wa]()),r||(r=Ia(u,t,n)),r}function s(t,n,a,o,u){var c=!1,s=e?e[Se]:ha,l=t[ya];return l||(l=t[ya]={}),t.setNext(i),e&&Hr(t[_t](),function(){return s+":"+a},function(){l[r]=!0;try{var e=i?i._id:Tt;e&&(l[e]=!1),c=n(t)}catch(u){var o=!i||l[i._id];o&&(c=!0),i&&o||Lr(t[Ze](),1,73,"Plugin ["+s+"] failed during "+a+" - "+yr(u)+", run flags: "+yr(l))}},o,u),c}function l(t,n){function r(n){if(!e||!a)return!1;var r=va(e);return!r[He]&&!r[Et]&&(o&&e[Ye](i),e[At](t,n),!0)}s(n=n||c(),r,"processTelemetry",function(){return{item:t}},!t.sync)||n[Ne](t)}function f(t,n){function r(){var r=!1;if(e){var i=va(e),a=e[_t]||i[_t];!e||a&&a!==t.core()||i[He]||(i[_t]=null,i[He]=!0,i[ke]=!1,e[He]&&!0===e[He](t,n)&&(r=!0))}return r}s(t,r,"unload",function(){},n[Ge])||t[Ne](n)}function d(t,n){function r(){var r=!1;if(e){var i=va(e),a=e[_t]||i[_t];!e||a&&a!==t.core()||i[He]||e[Xe]&&!0===e[Xe](t,n)&&(r=!0)}return r}s(t,r,"update",function(){},!1)||t[Ne](n)}return Rn(u)}(e,t,n);i||(i=u),o&&o._setNext(u),o=u}})}return r&&!i?Sa([r],t,n):i}var _a=500;function ka(e,t,n){t&&wn(t)&&t[De]>0&&(Sn(t=t.sort(function(e,t){return e[Dt]-t[Dt]}),function(e){e[Dt]<_a&&qn("Channel has invalid priority - "+e[Se])}),e[_e]({queue:Rn(t),chain:Sa(t,n[Ee],n)}))}function Ea(){var e=[];return{add:function(t){t&&e[_e](t)},run:function(t,n){Sn(e,function(e){try{e(t,n)}catch(r){Lr(t[Ze](),2,73,"Unexpected error calling unload handler - "+yr(r))}}),e=[]}}}var Ma="getPlugin",Aa=function(){function e(){var t,n,r,i,a,o=this;function u(e){void 0===e&&(e=null);var t=e;if(!t){var i=n||Ia(null,{},o[_t]);t=r&&r[Ma]?i[Je](null,r[Ma]):i[Je](null,r)}return t}function c(e,t,i){e&&jn(e,Mt,[],null,ln),!i&&t&&(i=t[Re]()[We]());var a=r;r&&r[Ma]&&(a=r[Ma]()),o[_t]=t,n=Ia(i,e,t,a)}function s(){t=!1,o[_t]=null,n=null,r=null,a=[],i=Ea()}s(),ne(e,o,function(e){e[Ie]=function(e,n,r,i){c(e,n,i),t=!0},e[He]=function(t,n){var o,u=e[_t];if(u&&(!t||u===t[_t]())){var c,l=!1,f=t||Ca(null,u,r&&r[Ma]?r[Ma]():r),d=n||((o={reason:0})[Ge]=!1,o);return e[$e]&&!0===e[$e](f,d,p)?c=!0:p(),c}function p(){if(!l){l=!0,i.run(f,n);var e=a;a=[],Sn(e,function(e){e.rm()}),!0===c&&f[Ne](d),s()}}},e[Xe]=function(t,n){var i=e[_t];if(i&&(!t||i===t[_t]())){var a,o=!1,u=t||Ta(null,i,r&&r[Ma]?r[Ma]():r),s=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(u,s,l)?a=!0:l(),a}function l(){o||(o=!0,c(u.getCfg(),u.core(),u[We]()))}},e._addHook=function(e){e&&(wn(e)?a=a.concat(e):a[_e](e))},Hn(e,"_addUnloadCb",function(){return i},"add")}),o[Ze]=function(e){return u(e)[Ze]()},o[ke]=function(){return t},o.setInitialized=function(e){t=e},o[Ye]=function(e){r=e},o[Ne]=function(e,t){t?t[Ne](e):r&&vn(r[At])&&r[At](e,null)},o._getTelCtx=u}return e.__ieDyn=1,e}(),Da=function(e){function t(){var n,r,i=e.call(this)||this;function a(){n=0,r=[]}return i.identifier="TelemetryInitializerPlugin",i.priority=199,a(),ne(t,i,function(e,t){e.addTelemetryInitializer=function(e){var t={id:n++,fn:e};return r[_e](t),{remove:function(){Sn(r,function(e,n){if(e.id===t.id)return r[Fe](n,1),-1})}}},e[At]=function(t,n){for(var i=!1,a=r[De],o=0;o<a;++o){var u=r[o];if(u)try{if(!1===u.fn[ut](null,[t])){i=!0;break}}catch(c){Lr(n[Ze](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Un(c),{exception:yr(c)},!0)}}i||e[Ne](t,n)},e[$e]=function(){a()}}),i}return xe(t,e),t.__ieDyn=1,t}(Aa),Pa="Plugins must provide initialize method",Na="_notificationManager",Ra="SDK is still unloading...",La={loggingLevelConsole:1};function Ua(e,t){return new qr(t)}function ja(e,t){var n=!1;return Sn(t,function(t){if(t===e)return n=!0,-1}),n}var za=function(){function e(){var t,n,r,i,a,o,u,c,s,l,f,d,p,v,g,m,h,y,w,x,b=0,I=!1;ne(e,this,function(e){function C(n){if(!b&&!I&&(n||e[Ae]&&e[Ae].queue[De]>0)){var r=Vn(t.diagnosticLogInterval);r&&r>0||(r=1e4),b=setInterval(function(){clearInterval(b),b=0,A()},r)}return b}function T(){n=!1,t=Gn(!0,{},La),e[Ee]=t,e[Ae]=new Nr(t),e[qe]=[],g=new Da,r=[],i=null,a=null,o=null,u=null,c=null,l=null,s=[],f=null,d=null,p=null,v=!1,m=null,h=ii("AIBaseCore",!0),y=Ea(),x=null}function S(){var n=Ia(E(),t,e);return n[ze](C),n}function _(n){var r=function(e,t,n){var r,i=[],a={};return Sn(n,function(n){(ln(n)||ln(n[Ie]))&&qn(Pa);var r=n[Dt],o=n[Se];n&&r&&(ln(a[r])?a[r]=o:Ur(e,"Two extensions have same priority #"+r+" - "+a[r]+", "+o)),(!r||r<t)&&i[_e](n)}),(r={all:n})[_t]=i,r}(e[Ae],_a,s);l=r[_t],c=null;var i=r.all;if(p=Rn(function(e,t,n){var r=[];if(e&&Sn(e,function(e){return ka(r,e,n)}),t){var i=[];Sn(t,function(e){e[Dt]>_a&&i[_e](e)}),ka(r,i,n)}return r}(d,i,e)),f){var a=_n(i,f);-1!==a&&i[Fe](a,1),-1!==(a=_n(l,f))&&l[Fe](a,1),f._setQueue(p)}else f=function(e,t){function n(){return Ia(null,t[Ee],t,null)}function r(e,t,n,r){var i=e?e[De]+1:1;function a(){0===--i&&(r&&r(),r=null)}i>0&&Sn(e,function(e){if(e&&e.queue[De]>0){var r=e.chain,o=t[Je](r);o[ze](a),n(o)}else i--}),a()}var i=!1,a={identifier:"ChannelControllerPlugin",priority:_a,initialize:function(t,n,r,a){i=!0,Sn(e,function(e){e&&e.queue[De]>0&&ga(Ia(e.chain,t,n),r)})},isInitialized:function(){return i},processTelemetry:function(t,i){r(e,i||n(),function(e){e[Ne](t)},function(){i[Ne](t)})},update:function(t,n){var i=n||{reason:0};return r(e,t,function(e){e[Ne](i)},function(){t[Ne](i)}),!0},pause:function(){r(e,n(),function(e){e.iterate(function(e){e.pause&&e.pause()})},null)},resume:function(){r(e,n(),function(e){e.iterate(function(e){e.resume&&e.resume()})},null)},teardown:function(t,n){var a=n||{reason:0,isAsync:!1};return r(e,t,function(e){e[Ne](a)},function(){t[Ne](a),i=!1}),!0},getChannel:function(t){var n=null;return e&&e[De]>0&&Sn(e,function(e){if(e&&e.queue[De]>0&&(Sn(e.queue,function(e){if(e[Se]===t)return n=e,-1}),n))return-1}),n},flush:function(t,i,a,o){var u=1,c=!1,s=null;function l(){u--,c&&0===u&&(s&&(clearTimeout(s),s=null),i&&i(c),i=null)}return o=o||5e3,r(e,n(),function(e){e.iterate(function(e){if(e[Oe]){u++;var n=!1;e[Oe](t,function(){n=!0,l()},a)||n||(t&&null==s?s=setTimeout(function(){s=null,l()},o):l())}})},function(){c=!0,l()}),!0},_setQueue:function(t){e=t}};return a}(p,e);i[_e](f),l[_e](f),e[qe]=ma(i),f[Ie](t,e,i),ga(S(),i),e[qe]=Rn(ma(l||[])).slice(),n&&function(t){var n=Ta(E(),e);n[ze](C),e._updateHook&&!0===e._updateHook(n,t)||n[Ne](t)}(n)}function k(t){var n,r=null,i=null;return Sn(e[qe],function(e){if(e[Se]===t&&e!==f&&e!==g)return i=e,-1}),!i&&f&&(i=f.getChannel(t)),i&&((n={plugin:i})[it]=function(e){va(i)[Et]=!e},n.isEnabled=function(){var e=va(i);return!e[He]&&!e[Et]},n.remove=function(e,t){var n;void 0===e&&(e=!0);var r=[i],a=((n={reason:1})[Ge]=e,n);M(r,a,function(e){e&&_({reason:32,removed:r}),t&&t(e)})},r=n),r}function E(){if(!c){var n=(l||[]).slice();-1===_n(n,g)&&n[_e](g),c=Sa(ma(n),t,e)}return c}function M(n,r,i){if(n&&n[De]>0){var a=Ca(Sa(n,t,e),e);a[ze](function(){var e=!1,t=[];Sn(s,function(r,i){ja(r,n)?e=!0:t[_e](r)}),s=t;var r=[];d&&(Sn(d,function(t,i){var a=[];Sn(t,function(t){ja(t,n)?e=!0:a[_e](t)}),r[_e](a)}),d=r),i&&i(e),C()}),a[Ne](r)}else i(!1)}function A(){if(e[Ae]&&e[Ae].queue){var n=e[Ae].queue.slice(0);e[Ae].queue[De]=0,Sn(n,function(n){var r,i=((r={})[Ce]=m||"InternalMessageId: "+n[Be],r.iKey=Vn(t[Me]),r.time=Tn(new Date),r.baseType=Dr.dataType,r.baseData={message:n[Ke]},r);e.track(i)})}}function D(e,t,n,r){return f?f[Oe](e,t,n||6,r):(t&&t(!1),!0)}function P(t){var n=e[Ae];n?(Lr(n,2,73,t),C()):qn(t)}T(),e[ke]=function(){return n},e[Ie]=function(r,a,u,c){v&&qn(Ra),e[ke]()&&qn("Core should not be initialized more than once"),t=r||{},e[Ee]=t,ln(r[Me])&&qn("Please provide instrumentation key"),i=c,e[Na]=c,function(){var e=Vn(t.disableDbgExt);!0===e&&w&&(i[Ue](w),w=null);i&&!w&&!0!==e&&(w=Er(t),i[Le](w))}(),function(){var e=Vn(t.enablePerfMgr);!e&&o&&(o=null);e&&zn(t,kt,Ua)}(),zn(t,Mt,{}).NotificationManager=i,u&&(e[Ae]=u);var l=zn(t,"extensions",[]);(s=[])[_e].apply(s,be(be([],a),l)),d=zn(t,St,[]),_(null),p&&0!==p[De]||qn("No "+St+" available"),n=!0,e.releaseQueue()},e.getTransmissionControls=function(){var e=[];return p&&Sn(p,function(t){e[_e](t.queue)}),Rn(e)},e.track=function(n){n.iKey=n.iKey||t[Me],n[Pe]=n[Pe]||Tn(new Date),n.ver=n.ver||"4.0",!v&&e[ke]()?S()[Ne](n):r[_e](n)},e[Re]=S,e[Te]=function(){return i||(i=function(){var e;return he(((e={})[Le]=function(e){},e[Ue]=function(e){},e[Pt]=function(e){},e[Nt]=function(e,t){},e[Rt]=function(e,t){},e))}(),e[Na]=i),i},e[Le]=function(e){i&&i[Le](e)},e[Ue]=function(e){i&&i[Ue](e)},e.getCookieMgr=function(){return u||(u=Ci(t,e[Ae])),u},e.setCookieMgr=function(e){u=e},e[zt]=function(){if(!a&&!o&&Vn(t.enablePerfMgr)){var n=Vn(t[kt]);vn(n)&&(o=n(e,e[Te]()))}return a||o||null},e.setPerfMgr=function(e){a=e},e.eventCnt=function(){return r[De]},e.releaseQueue=function(){if(n&&r[De]>0){var e=r;r=[],Sn(e,function(e){S()[Ne](e)})}},e.pollInternalLogs=function(e){return m=e||null,I=!1,b&&(clearInterval(b),b=null),C(!0)},e[je]=function(){I=!0,b&&(clearInterval(b),b=0,A())},Bn(e,function(){return g},["addTelemetryInitializer"]),e.unload=function(t,r,i){var a;void 0===t&&(t=!0),n||qn("SDK is not initialized"),v&&qn(Ra);var o=((a={reason:50})[Ge]=t,a.flushComplete=!1,a),u=Ca(E(),e);function c(t){o.flushComplete=t,v=!0,y.run(u,o),e[je](),u[Ne](o)}u[ze](function(){T(),r&&r(o)},e),A(),D(t,c,6,i)||c(!1)},e[Ve]=k,e.addPlugin=function(e,t,n,r){if(!e)return r&&r(!1),void P(Pa);var i=k(e[Se]);if(i&&!t)return r&&r(!1),void P("Plugin ["+e[Se]+"] is already loaded!");var a={reason:16};function o(t){s[_e](e),a.added=[e],_(a),r&&r(!0)}if(i){var u=[i.plugin];M(u,{reason:2,isAsync:!!n},function(e){e?(a.removed=u,a.reason|=32,o()):r&&r(!1)})}else o()},e.evtNamespace=function(){return h},e[Oe]=D,e.getTraceCtx=function(e){var t,n;return x||(n={},x={getName:function(){return n[Ce]},setName:function(e){t&&t.setName(e),n[Ce]=e},getTraceId:function(){return n[xt]},setTraceId:function(e){t&&t.setTraceId(e),la(e)&&(n[xt]=e)},getSpanId:function(){return n[bt]},setSpanId:function(e){t&&t.setSpanId(e),fa(e)&&(n[bt]=e)},getTraceFlags:function(){return n[It]},setTraceFlags:function(e){t&&t.setTraceFlags(e),n[It]=e}}),x},e.setTraceCtx=function(e){x=e||null},Hn(e,"addUnloadCb",function(){return y},"add")})}return e.__ieDyn=1,e}();function Va(e,t,n,r){Sn(e,function(e){if(e&&e[t])if(n)setTimeout(function(){return r(e)},0);else try{r(e)}catch(i){}})}var Oa=function(){function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;ne(e,this,function(e){e[Le]=function(t){e.listeners[_e](t)},e[Ue]=function(t){for(var n=_n(e[gt],t);n>-1;)e.listeners[Fe](n,1),n=_n(e[gt],t)},e[Pt]=function(t){Va(e[gt],Pt,!0,function(e){e[Pt](t)})},e[Nt]=function(t,n){Va(e[gt],Nt,!0,function(e){e[Nt](t,n)})},e[Rt]=function(t,n){Va(e[gt],Rt,n,function(e){e[Rt](t,n)})},e[Lt]=function(t){t&&(!n&&t[mt]()||Va(e[gt],Lt,!1,function(e){t[Ge]?setTimeout(function(){return e[Lt](t)},0):e[Lt](t)}))}})}return e.__ieDyn=1,e}(),qa=function(e){function t(){var n=e.call(this)||this;return ne(t,n,function(e,t){function n(t){var n=e[Te]();n&&n[Nt]([t],2)}e[Ie]=function(e,n,r,i){t[Ie](e,n,r||new Nr(e),i||new Oa(e))},e.track=function(r){Hr(e[zt](),function(){return"AppInsightsCore:track"},function(){null===r&&(n(r),qn("Invalid telemetry item")),function(e){ln(e[Ce])&&(n(e),qn("telemetry name required"))}(r),t.track(r)},function(){return{item:r}},!r.sync)}}),n}return xe(t,e),t.__ieDyn=1,t}(za),Fa="_aiHooks",Ha=["req","rsp","hkErr","fnErr"];function Ba(e,t){if(e)for(var n=0;n<e[De]&&!t(e[n],n);n++);}function Ka(e,t,n,r,i){i>=0&&i<=2&&Ba(e,function(e,a){var o=e.cbks,u=o[Ha[i]];if(u){t.ctx=function(){return r[a]=r[a]||{}};try{u[ut](t.inst,n)}catch(l){var c=t.err;try{var s=o[Ha[2]];s&&(t.err=l,s[ut](t.inst,n))}catch(f){}finally{t.err=c}}}})}function Ga(e,t,n,r){var i=null;return e&&(dn(e,t)?i=e:n&&(i=Ga(cn(e),t,r,!1))),i}function $a(e,t,n,r){var i=n&&n[Fa];if(!i){var a=function(e){return function(){var t,n=arguments,r=e.h,i=((t={})[Ce]=e.n,t.inst=this,t.ctx=null,t.set=function(e,t){(n=u([],n))[e]=t,o=u([i],n)},t),a=[],o=u([i],n);function u(e,t){return Ba(t,function(t){e[_e](t)}),e}i.evt=ir("event"),Ka(r,i,o,a,0);var c=e.f;if(c)try{i.rslt=c[ut](this,n)}catch(s){throw i.err=s,Ka(r,i,o,a,3),s}return Ka(r,i,o,a,1),i.rslt}}(i={i:0,n:t,f:n,h:[]});a[Fa]=i,e[t]=a}var o={id:i.i,cbks:r,rm:function(){var e=this.id;Ba(i.h,function(t,n){if(t.id===e)return i.h[Fe](n,1),1})}};return i.i++,i.h[_e](o),o}function Xa(e,t,n,r,i){if(void 0===r&&(r=!0),e&&t&&n){var a=Ga(e,t,r,i);if(a){var o=a[t];if(typeof o===re)return $a(a,t,o,n)}}return null}function Wa(e,t,n,r,i){if(e&&t&&n){var a=Ga(e,t,r,i)||e;if(a)return $a(a,t,a[t],n)}return null}var Za="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ya="sampleRate",Ja="ProcessLegacy",Qa="http.method",eo="https://dc.services.visualstudio.com",to="/v2/track",no="not_specified",ro="iKey";function io(e){var t=null;if(vn(Event))t=new Event(e);else{var n=cr();n&&n.createEvent&&(t=n.createEvent("Event")).initEvent(e,!0,!0)}return t}var ao="split",oo="length",uo="toLowerCase",co="ingestionendpoint",so="toString",lo="removeItem",fo="name",po="message",vo="stringify",go="pathname",mo="correlationHeaderExcludePatterns",ho="indexOf",yo="exceptions",wo="parsedStack",xo="properties",bo="measurements",Io="sizeInBytes",Co="typeName",To="severityLevel",So="problemGroup",_o="isManual",ko="CreateFromInterface",Eo="assembly",Mo="fileName",Ao="hasFullStack",Do="level",Po="method",No="line",Ro="duration",Lo="receivedResponse",Uo="substring";function jo(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString()[uo]()}function zo(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,a=Math.floor(e/864e5);return t=1===t[oo]?"00"+t:2===t[oo]?"0"+t:t,n=n[oo]<2?"0"+n:n,r=r[oo]<2?"0"+r:r,(a>0?a+".":"")+(i=i[oo]<2?"0"+i:i)+":"+r+":"+n+"."+t}var Vo,Oo=(Vo={},mn({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]},function(e,t){Vo[e]=t[1],Vo[t[0]]=t[1]}),Nn(Vo)),qo=$n({LocalStorage:0,SessionStorage:1});$n({AI:0,AI_AND_W3C:1,W3C:2});var Fo,Ho=void 0,Bo=void 0,Ko="";function Go(){return Zo()?$o(qo.LocalStorage):null}function $o(e){try{if(ln(ge()))return null;var t=(new Date)[so](),n=ir(e===qo.LocalStorage?"localStorage":"sessionStorage"),r=Ko+t;n.setItem(r,t);var i=n.getItem(r)!==t;if(n[lo](r),!i)return n}catch(a){}return null}function Xo(){return Yo()?$o(qo.SessionStorage):null}function Wo(e){Ko=e||""}function Zo(e){return(e||void 0===Ho)&&(Ho=!!$o(qo.LocalStorage)),Ho}function Yo(e){return(e||void 0===Bo)&&(Bo=!!$o(qo.SessionStorage)),Bo}function Jo(e,t){var n=Xo();if(null!==n)try{return n.getItem(t)}catch(r){Bo=!1,Lr(e,2,2,"Browser failed read of session storage. "+Un(r),{exception:yr(r)})}return null}function Qo(e,t,n){var r=Xo();if(null!==r)try{return r.setItem(t,n),!0}catch(i){Bo=!1,Lr(e,2,4,"Browser failed write to session storage. "+Un(i),{exception:yr(i)})}return!1}function eu(e,t,n){var r=t[oo],i=tu(e,t);if(i[oo]!==r){for(var a=0,o=i;void 0!==n[o];)a++,o=i[Uo](0,147)+lu(a);i=o}return i}function tu(e,t){var n;return t&&(t=En(t[so]()))[oo]>150&&(n=t[Uo](0,150),Lr(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}function nu(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=En(t)).toString()[oo]>n&&(r=t[so]()[Uo](0,n),Lr(e,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function ru(e,t){return su(e,t,2048,66)}function iu(e,t){var n;return t&&t[oo]>32768&&(n=t[Uo](0,32768),Lr(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function au(e,t){var n;if(t){var r=""+t;r[oo]>32768&&(n=r[Uo](0,32768),Lr(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return n||t}function ou(e,t){if(t){var n={};mn(t,function(t,r){if(pn(r)&&vr())try{r=gr()[vo](r)}catch(i){Lr(e,2,49,"custom property is not valid",{exception:i},!0)}r=nu(e,r,8192),t=eu(e,t,n),n[t]=r}),t=n}return t}function uu(e,t){if(t){var n={};mn(t,function(t,r){t=eu(e,t,n),n[t]=r}),t=n}return t}function cu(e,t){return t?su(e,t,128,69)[so]():t}function su(e,t,n,r){var i;return t&&(t=En(t))[oo]>n&&(i=t[Uo](0,n),Lr(e,2,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),i||t}function lu(e){var t="00"+e;return t.substr(t[oo]-3)}(Fo={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768}).sanitizeKeyAndAddUniqueness=eu,Fo.sanitizeKey=tu,Fo.sanitizeString=nu,Fo.sanitizeUrl=ru,Fo.sanitizeMessage=iu,Fo.sanitizeException=au,Fo.sanitizeProperties=ou,Fo.sanitizeMeasurements=uu,Fo.sanitizeId=cu,Fo.sanitizeInput=su,Fo.padNumber=lu,Fo.trim=En;var fu=cr()||{},du=0,pu=[null,null,null,null,null];function vu(e){var t=du,n=pu,r=n[t];return fu.createElement?n[t]||(r=n[t]=fu.createElement("a")):r={host:gu(e,!0)},r.href=e,++t>=n[oo]&&(t=0),du=t,r}function gu(e,t){var n=mu(e,t)||"";if(n){var r=n.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=r&&r[oo]>3&&bn(r[2])&&r[2][oo]>0)return r[2]+(r[3]||"")}return n}function mu(e,t){var n=null;if(e){var r=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(null!=r&&r[oo]>2&&bn(r[2])&&r[2][oo]>0&&(n=r[2]||"",t&&r[oo]>2)){var i=(r[1]||"")[uo](),a=r[3]||"";("http"===i&&":80"===a||"https"===i&&":443"===a)&&(a=""),n+=a}}return n}var hu=[eo+to,"https://breeze.aimon.applicationinsights.io"+to,"https://dc-int.services.visualstudio.com"+to];function yu(e){return-1!==_n(hu,e[uo]())}var wu={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e[mo])for(var r=0;r<e.correlationHeaderExcludePatterns[oo];r++)if(e[mo][r].test(t))return!1;var i=vu(t).host[uo]();if(!i||-1===i[ho](":443")&&-1===i[ho](":80")||(i=(mu(t,!0)||"")[uo]()),(!e||!e.enableCorsCorrelation)&&i&&i!==n)return!1;var a,o=e&&e.correlationHeaderDomains;if(o&&(Sn(o,function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));a=a||t.test(i)}),!a))return!1;var u=e&&e.correlationHeaderExcludedDomains;if(!u||0===u[oo])return!0;for(r=0;r<u[oo];r++){if(new RegExp(u[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(i))return!1}return i&&i[oo]>0},getCorrelationContext:function(e){if(e){var t=wu.getCorrelationContextValue(e,Oo[1]);if(t&&t!==wu.correlationIdPrefix)return t}},getCorrelationContextValue:function(e,t){if(e)for(var n=e[ao](","),r=0;r<n[oo];++r){var i=n[r][ao]("=");if(2===i[oo]&&i[0]===t)return i[1]}}};function xu(){var e=pr();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return Ln()}function bu(e,t){var n=null;return 0===e||0===t||ln(e)||ln(t)||(n=t-e),n}function Iu(e,t){var n=e||{};return{getName:function(){return n[fo]},setName:function(e){t&&t.setName(e),n[fo]=e},getTraceId:function(){return n.traceID},setTraceId:function(e){t&&t.setTraceId(e),la(e)&&(n.traceID=e)},getSpanId:function(){return n.parentID},setSpanId:function(e){t&&t.setSpanId(e),fa(e)&&(n.parentID=e)},getTraceFlags:function(){return n.traceFlags},setTraceFlags:function(e){t&&t.setTraceFlags(e),n.traceFlags=e}}}function Cu(e){if(!e)return{};var t=function(e,t,n){var r;if(e){if(e[Ft])return e[Ft](t,n);var i=e[De],a=0;if(arguments[De]>=3)r=arguments[2];else{for(;a<i&&!(a in e);)a++;r=e[a++]}for(;a<i;)a in e&&(r=t(r,e[a],a,e)),a++}return r}(e[ao](";"),function(e,t){var n=t[ao]("=");if(2===n[oo]){var r=n[0][uo](),i=n[1];e[r]=i}return e},{});if(Dn(t)[oo]>0){if(t.endpointsuffix){var n=t.location?t.location+".":"";t[co]=t[co]||"https://"+n+"dc."+t.endpointsuffix,hn(t[co],"/")&&(t[co]=t[co].slice(0,-1))}t[co]=t[co]||eo}return t}var Tu=function(e,t,n){var r=this,i=this;i.ver=1,i.sampleRate=100,i.tags={},i[fo]=nu(e,n)||no,i.data=t,i.time=Tn(new Date),i.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===r.sampleRate?4:1},tags:1,data:1}},Su=function(){function e(e,t,n,r){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var i=this;i.ver=2,i[fo]=nu(e,t)||no,i[xo]=ou(e,n),i[bo]=uu(e,r)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}(),_u="error",ku="stack",Eu="stackDetails",Mu="errorSrc",Au="message",Du="description";function Pu(e,t){var n=e;return n&&!bn(n)&&(JSON&&JSON[vo]?(n=JSON[vo](e),!t||n&&"{}"!==n||(n=vn(e[so])?e[so]():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function Nu(e,t){var n=e;return e&&(n&&!bn(n)&&(n=e[Au]||e[Du]||n),n&&!bn(n)&&(n=Pu(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(n||"")[ho](t)&&(n=t+": "+n),n||""}function Ru(e){return e&&e.src&&bn(e.src)&&e.obj&&wn(e.obj)}function Lu(e){var t=e||"";bn(t)||(t=bn(t[ku])?t[ku]:""+t);var n=t[ao]("\n");return{src:t,obj:n}}function Uu(e){var t=null;if(e)try{if(e[ku])t=Lu(e[ku]);else if(e[_u]&&e[_u][ku])t=Lu(e[_u][ku]);else if(e.exception&&e.exception[ku])t=Lu(e.exception[ku]);else if(Ru(e))t=e;else if(Ru(e[Eu]))t=e[Eu];else if(window&&window.opera&&e[Au])t=function(e){for(var t=[],n=e[ao]("\n"),r=0;r<n[oo];r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),t.push(i)}return{src:e,obj:t}}(e[po]);else if(e.reason&&e.reason[ku])t=Lu(e.reason[ku]);else if(bn(e))t=Lu(e);else{var n=e[Au]||e[Du]||"";bn(e[Mu])&&(n&&(n+="\n"),n+=" from "+e[Mu]),n&&(t=Lu(n))}}catch(r){t=Lu(r)}return t||{src:"",obj:null}}function ju(e){var t="";if(e&&!(t=e.typeName||e[fo]||""))try{var n=/function (.{1,200})\(/.exec(e.constructor[so]());t=n&&n[oo]>1?n[1]:""}catch(r){}return t}function zu(e){if(e)try{if(!bn(e)){var t=ju(e),n=Pu(e,!1);return n&&"{}"!==n||(e[_u]&&(t=ju(e=e[_u])),n=Pu(e,!0)),0!==n[ho](t)&&"String"!==t?t+":"+n:n}}catch(r){}return""+(e||"")}var Vu=function(){function e(e,t,n,r,i,a){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var o=this;o.ver=2,!function(e){try{if(pn(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(t){}return!1}(t)?(n||(n={}),o[yo]=[new Ou(e,t,n)],o[xo]=ou(e,n),o[bo]=uu(e,r),i&&(o[To]=i),a&&(o.id=a)):(o[yo]=t[yo]||[],o[xo]=t[xo],o[bo]=t[bo],t[To]&&(o[To]=t[To]),t.id&&(o.id=t.id),t[So]&&(o[So]=t[So]),ln(t[_o])||(o[_o]=t[_o]))}return e.CreateAutoException=function(e,t,n,r,i,a,o,u){var c,s=ju(i||a||e);return(c={})[po]=Nu(e,s),c.url=t,c.lineNumber=n,c.columnNumber=r,c.error=zu(i||a||e),c.evt=zu(a||e),c[Co]=s,c.stackDetails=Uu(o||i||a),c.errorSrc=u,c},e.CreateFromInterface=function(t,n,r,i){var a=n[yo]&&kn(n[yo],function(e){return Ou[ko](t,e)});return new e(t,ye(ye({},n),{exceptions:a}),r,i)},e.prototype.toInterface=function(){var e,t=this,n=t.exceptions,r=t.properties,i=t.measurements,a=t.severityLevel,o=t.problemGroup,u=t.id,c=t.isManual,s=n instanceof Array&&kn(n,function(e){return e.toInterface()})||void 0;return(e={ver:"4.0"})[yo]=s,e.severityLevel=a,e.properties=r,e.measurements=i,e.problemGroup=o,e.id=u,e.isManual=c,e},e.CreateSimpleException=function(e,t,n,r,i,a){var o;return{exceptions:[(o={},o[Ao]=!0,o.message=e,o.stack=i,o.typeName=t,o)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=zu,e}(),Ou=function(){function e(e,t,n){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var r=this;if(function(e){try{if(pn(e))return"hasFullStack"in e&&"typeName"in e}catch(t){}return!1}(t))r[Co]=t[Co],r[po]=t[po],r[ku]=t[ku],r[wo]=t[wo]||[],r[Ao]=t[Ao];else{var i=t,a=i&&i.evt;xn(i)||(i=i[_u]||a||i),r[Co]=nu(e,ju(i))||no,r[po]=iu(e,Nu(t||i,r[Co]))||no;var o=t[Eu]||Uu(t);r[wo]=function(e){var t,n=e.obj;if(n&&n[oo]>0){t=[];var r=0,i=0;if(Sn(n,function(e){var n=e[so]();if(qu.regex.test(n)){var a=new qu(n,r++);i+=a[Io],t.push(a)}}),i>32768)for(var a=0,o=t[oo]-1,u=0,c=a,s=o;a<o;){if((u+=t[a][Io]+t[o][Io])>32768){var l=s-c+1;t.splice(c,l);break}c=a,s=o,a++,o--}}return t}(o),wn(r[wo])&&kn(r[wo],function(t){t[Eo]=nu(e,t[Eo]),t[Mo]=nu(e,t[Mo])}),r[ku]=au(e,function(e){var t="";return e&&(e.obj?Sn(e.obj,function(e){t+=e+"\n"}):t=e.src||""),t}(o)),r.hasFullStack=wn(r.parsedStack)&&r.parsedStack[oo]>0,n&&(n[Co]=n[Co]||r[Co])}}return e.prototype.toInterface=function(){var e,t=this,n=t[wo]instanceof Array&&kn(t[wo],function(e){return e.toInterface()});return(e={id:t.id,outerId:t.outerId,typeName:t[Co],message:t[po],hasFullStack:t[Ao],stack:t[ku]})[wo]=n||void 0,e},e.CreateFromInterface=function(t,n){var r=n[wo]instanceof Array&&kn(n[wo],function(e){return qu[ko](e)})||n[wo];return new e(t,ye(ye({},n),{parsedStack:r}))},e}(),qu=function(){function e(t,n){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var r=this;if(r[Io]=0,"string"==typeof t){var i=t;r[Do]=n,r[Po]="<no_method>",r[Eo]=En(i),r[Mo]="",r[No]=0;var a=i.match(e.regex);a&&a[oo]>=5&&(r[Po]=En(a[2])||r[Po],r[Mo]=En(a[4]),r[No]=parseInt(a[5])||0)}else r[Do]=t[Do],r[Po]=t[Po],r[Eo]=t[Eo],r[Mo]=t[Mo],r[No]=t[No],r[Io]=0;r.sizeInBytes+=r.method[oo],r.sizeInBytes+=r.fileName[oo],r.sizeInBytes+=r.assembly[oo],r[Io]+=e.baseSize,r.sizeInBytes+=r.level.toString()[oo],r.sizeInBytes+=r.line.toString()[oo]}return e.CreateFromInterface=function(t){return new e(t,null)},e.prototype.toInterface=function(){var e=this;return{level:e[Do],method:e[Po],assembly:e[Eo],fileName:e[Mo],line:e[No]}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}(),Fu=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},Hu=function(){function e(e,t,n,r,i,a,o,u,c){this.aiDataContract={ver:1,metrics:1,properties:0};var s=this;s.ver=2;var l=new Fu;l.count=r>0?r:void 0,l.max=isNaN(a)||null===a?void 0:a,l.min=isNaN(i)||null===i?void 0:i,l[fo]=nu(e,t)||no,l.value=n,l.stdDev=isNaN(o)||null===o?void 0:o,s.metrics=[l],s[xo]=ou(e,u),s[bo]=uu(e,c)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}(),Bu=function(){function e(e,t,n,r,i,a,o){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var u=this;u.ver=2,u.id=cu(e,o),u.url=ru(e,n),u[fo]=nu(e,t)||no,isNaN(r)||(u[Ro]=zo(r)),u[xo]=ou(e,i),u[bo]=uu(e,a)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}(),Ku=function(){function e(e,t,n,r,i,a,o,u,c,s,l,f){void 0===c&&(c="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var d=this;d.ver=2,d.id=t,d[Ro]=zo(i),d.success=a,d.resultCode=o+"",d.type=nu(e,c);var p=function(e,t,n,r){var i,a=r,o=r;if(t&&t[oo]>0){var u=vu(t);if(i=u.host,!a)if(null!=u[go]){var c=0===u.pathname[oo]?"/":u[go];"/"!==c.charAt(0)&&(c="/"+c),o=u[go],a=nu(e,n?n+" "+c:c)}else a=nu(e,t)}else i=r,a=r;return{target:i,name:a,data:o}}(e,n,u,r);d.data=ru(e,r)||p.data,d.target=nu(e,p.target),s&&(d.target="".concat(d.target," | ").concat(s)),d[fo]=nu(e,p[fo]),d[xo]=ou(e,l),d[bo]=uu(e,f)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}(),Gu=function(){function e(e,t,n,r,i){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var a=this;a.ver=2,t=t||no,a[po]=iu(e,t),a[xo]=ou(e,r),a[bo]=uu(e,i),n&&(a[To]=n)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}(),$u=function(){function e(e,t,n,r,i,a,o){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var u=this;u.ver=2,u.url=ru(e,n),u[fo]=nu(e,t)||no,u[xo]=ou(e,i),u[bo]=uu(e,a),o&&(u.domProcessing=o.domProcessing,u[Ro]=o[Ro],u.networkConnect=o.networkConnect,u.perfTotal=o.perfTotal,u[Lo]=o[Lo],u.sentRequest=o.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}(),Xu=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t};function Wu(e){var t="ai."+e+".";return function(e){return t+e}}var Zu,Yu=Wu("application"),Ju=Wu("device"),Qu=Wu("location"),ec=Wu("operation"),tc=Wu("session"),nc=Wu("user"),rc=Wu("cloud"),ic=Wu("internal"),ac=function(e){function t(){return e.call(this)||this}return xe(t,e),t}((Zu={applicationVersion:Yu("ver"),applicationBuild:Yu("build"),applicationTypeId:Yu("typeId"),applicationId:Yu("applicationId"),applicationLayer:Yu("layer"),deviceId:Ju("id"),deviceIp:Ju("ip"),deviceLanguage:Ju("language"),deviceLocale:Ju("locale"),deviceModel:Ju("model"),deviceFriendlyName:Ju("friendlyName"),deviceNetwork:Ju("network"),deviceNetworkName:Ju("networkName"),deviceOEMName:Ju("oemName"),deviceOS:Ju("os"),deviceOSVersion:Ju("osVersion"),deviceRoleInstance:Ju("roleInstance"),deviceRoleName:Ju("roleName"),deviceScreenResolution:Ju("screenResolution"),deviceType:Ju("type"),deviceMachineName:Ju("machineName"),deviceVMName:Ju("vmName"),deviceBrowser:Ju("browser"),deviceBrowserVersion:Ju("browserVersion"),locationIp:Qu("ip"),locationCountry:Qu("country"),locationProvince:Qu("province"),locationCity:Qu("city"),operationId:ec("id"),operationName:ec("name"),operationParentId:ec("parentId"),operationRootId:ec("rootId"),operationSyntheticSource:ec("syntheticSource"),operationCorrelationVector:ec("correlationVector"),sessionId:tc("id"),sessionIsFirst:tc("isFirst"),sessionIsNew:tc("isNew"),userAccountAcquisitionDate:nc("accountAcquisitionDate"),userAccountId:nc("accountId"),userAgent:nc("userAgent"),userId:nc("id"),userStoreRegion:nc("storeRegion"),userAuthUserId:nc("authUserId"),userAnonymousUserAcquisitionDate:nc("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:nc("authUserAcquisitionDate"),cloudName:rc("name"),cloudRole:rc("role"),cloudRoleVer:rc("roleVer"),cloudRoleInstance:rc("roleInstance"),cloudEnvironment:rc("environment"),cloudLocation:rc("location"),cloudDeploymentUnit:rc("deploymentUnit"),internalNodeName:ic("nodeName"),internalSdkVersion:ic("sdkVersion"),internalAgentVersion:ic("agentVersion"),internalSnippet:ic("snippet"),internalSdkSrc:ic("sdkSrc")},function(){var e=this;Zu&&mn(Zu,function(t,n){e[t]=n})}));function oc(e,t,n,r,i,a){var o;n=nu(r,n)||no,(ln(e)||ln(t)||ln(n))&&qn("Input doesn't contain all required fields");var u="";e[ro]&&(u=e[ro],delete e[ro]);var c=((o={})[fo]=n,o.time=Tn(new Date),o.iKey=u,o.ext=a||{},o.tags=[],o.data={},o.baseType=t,o.baseData=e,o);return ln(i)||mn(i,function(e,t){c.data[e]=t}),c}var uc="user",cc="device",sc="trace",lc="web",fc="app",dc="os",pc=new ac,vc="AppInsightsPropertiesPlugin",gc="AppInsightsChannelPlugin",mc="toString",hc="disableExceptionTracking",yc="autoTrackPageVisitTime",wc="overridePageViewDuration",xc="enableUnhandledPromiseRejectionTracking",bc="samplingPercentage",Ic="isStorageUseDisabled",Cc="isBrowserLinkTrackingEnabled",Tc="enableAutoRouteTracking",Sc="namePrefix",_c="disableFlushOnBeforeUnload",kc="core",Ec="dataType",Mc="envelopeType",Ac="diagLog",Dc="track",Pc="trackPageView",Nc="trackPreviousPageVisit",Rc="sendPageViewInternal",Lc="sendPageViewPerformanceInternal",Uc="populatePageViewPerformanceEvent",jc="href",zc="sendExceptionInternal",Vc="exception",Oc="error",qc="_onerror",Fc="errorSrc",Hc="lineNumber",Bc="columnNumber",Kc="message",Gc="CreateAutoException",$c="addTelemetryInitializer",Xc="duration",Wc="length",Zc="isPerformanceTimingSupported",Yc="getPerformanceTiming",Jc="navigationStart",Qc="shouldCollectDuration",es="isPerformanceTimingDataReady",ts="responseStart",ns="loadEventEnd",rs="responseEnd",is="connectEnd",as="pageVisitStartTime",os=null;var us=function(){function e(t,n,r,i){ne(e,this,function(e){var a,o=null,u=[],c=!1;function s(e){r&&r.flush(e)}function l(){o||(o=setTimeout(function(){o=null;var e=u.slice(0),t=!1;u=[],Sn(e,function(e){e()?t=!0:u.push(e)}),u[Wc]>0&&l(),t&&s(!0)},100))}function f(e){u.push(e),l()}r&&(a=r.logger),e[Pc]=function(e,r){var o=e.name;if(ln(o)||"string"!=typeof o){var u=cr();o=e.name=u&&u.title||""}var l=e.uri;if(ln(l)||"string"!=typeof l){var d=dr();l=e.uri=d&&d[jc]||""}if(!i[Zc]())return t[Rc](e,r),s(!0),void(function(){if(null==os)try{os=!!(self&&self instanceof WorkerGlobalScope)}catch(e){os=!1}return os}()||Lr(a,2,25,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info."));var p,v,g=!1,m=i[Yc]()[Jc];m>0&&(p=bu(m,+new Date),i[Qc](p)||(p=void 0)),ln(r)||ln(r[Xc])||(v=r[Xc]),!n&&isNaN(v)||(isNaN(v)&&(r||(r={}),r[Xc]=p),t[Rc](e,r),s(!0),g=!0);r||(r={}),f(function(){var n=!1;try{if(i[es]()){n=!0;var u={name:o,uri:l};i[Uc](u),u.isValid||g?(g||(r[Xc]=u.durationMs,t[Rc](e,r)),c||(t[Lc](u,r),c=!0)):(r[Xc]=p,t[Rc](e,r))}else m>0&&bu(m,+new Date)>6e4&&(n=!0,g||(r[Xc]=6e4,t[Rc](e,r)))}catch(s){Lr(a,1,38,"trackPageView failed on page load calculation: "+Un(s),{exception:yr(s)})}return n})},e.teardown=function(e,t){if(o){clearTimeout(o),o=null;var n=u.slice(0);u=[],Sn(n,function(e){e()})}}})}return e.__ieDyn=1,e}(),cs=["googlebot","adsbot-google","apis-google","mediapartners-google"];function ss(){var e=pr();return e&&!!e.timing}function ls(){var e=pr(),t=e?e.timing:0;return t&&t.domainLookupStart>0&&t[Jc]>0&&t[ts]>0&&t.requestStart>0&&t[ns]>0&&t[rs]>0&&t[is]>0&&t.domLoading>0}function fs(){return ss()?pr().timing:null}function ds(){return(e=pr())&&e.getEntriesByType&&e.getEntriesByType("navigation")[Wc]>0?pr().getEntriesByType("navigation")[0]:null;var e}function ps(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(lr()||{}).userAgent,r=!1;if(n)for(var i=0;i<cs[Wc];i++)r=r||-1!==n.toLowerCase().indexOf(cs[i]);if(r)return!1;for(i=0;i<e[Wc];i++)if(e[i]<0||e[i]>=36e5)return!1;return!0}var vs=function(){function e(t){var n=Pr(t);ne(e,this,function(e){e[Uc]=function(t){t.isValid=!1;var r=ds(),i=fs(),a=0,o=0,u=0,c=0,s=0;(r||i)&&(r?(a=r[Xc],o=0===r.startTime?r[is]:bu(r.startTime,r[is]),u=bu(r.requestStart,r[ts]),c=bu(r[ts],r[rs]),s=bu(r.responseEnd,r[ns])):(a=bu(i[Jc],i[ns]),o=bu(i[Jc],i[is]),u=bu(i.requestStart,i[ts]),c=bu(i[ts],i[rs]),s=bu(i.responseEnd,i[ns])),0===a?Lr(n,2,10,"error calculating page view performance.",{total:a,network:o,request:u,response:c,dom:s}):e[Qc](a,o,u,c,s)?a<Math.floor(o)+Math.floor(u)+Math.floor(c)+Math.floor(s)?Lr(n,2,8,"client performance math error.",{total:a,network:o,request:u,response:c,dom:s}):(t.durationMs=a,t.perfTotal=t[Xc]=zo(a),t.networkConnect=zo(o),t.sentRequest=zo(u),t.receivedResponse=zo(c),t.domProcessing=zo(s),t.isValid=!0):Lr(n,2,45,"Invalid page load duration value. Browser perf data won't be sent.",{total:a,network:o,request:u,response:c,dom:s}))},e[Yc]=fs,e[Zc]=ss,e[es]=ls,e[Qc]=ps})}return e.__ieDyn=1,e}(),gs=function(){function e(t,n){var r="prevPageVisitData";ne(e,this,function(e){e[Nc]=function(e,i){try{var a=function(e,n){var i=null;try{i=function(){var e=null;try{if(Yo()){var n=Ln(),i=Jo(t,r);i&&vr()&&((e=gr().parse(i)).pageVisitTime=n-e[as],function(e,t){var n=Xo();if(null!==n)try{return n[lo](t),!0}catch(r){Bo=!1,Lr(e,2,6,"Browser failed removal of session storage item. "+Un(r),{exception:yr(r)})}}(t,r))}}catch(a){Ur(t,"Stop page visit timer failed: "+yr(a)),e=null}return e}(),function(e,n){try{if(Yo()){null!=Jo(t,r)&&qn("Cannot call startPageVisit consecutively without first calling stopPageVisit");var i=new ms(e,n),a=gr().stringify(i);Qo(t,r,a)}}catch(o){Ur(t,"Call to start failed: "+yr(o))}}(e,n)}catch(a){Ur(t,"Call to restart failed: "+yr(a)),i=null}return i}(e,i);a&&n(a.pageName,a.pageUrl,a.pageVisitTime)}catch(o){Ur(t,"Auto track page visit time failed, metric will not be collected: "+yr(o))}},Pn(e,"_logger",function(){return t}),Pn(e,"pageVisitTimeTrackingHandler",function(){return n})})}return e.__ieDyn=1,e}(),ms=function(e,t){this[as]=Ln(),this.pageName=e,this.pageUrl=t},hs=function(e,t){var n=this,r={};n.start=function(t){void 0!==r[t]&&Lr(e,2,62,"start was called more than once for this event without calling stop.",{name:t,key:t},!0),r[t]=+new Date},n.stop=function(t,i,a,o){var u=r[t];if(isNaN(u))Lr(e,2,63,"stop was called without a corresponding start.",{name:t,key:t},!0);else{var c=bu(u,+new Date);n.action(t,i,c,a,o)}delete r[t],r[t]=void 0}};function ys(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}function ws(e,t){return(e=e||t)<6e4&&(e=6e4),e}function xs(e){return e||(e={}),e.sessionRenewalMs=ws(e.sessionRenewalMs,18e5),e.sessionExpirationMs=ws(e.sessionExpirationMs,864e5),e[hc]=jo(e[hc]),e[yc]=jo(e[yc]),e[wc]=jo(e[wc]),e[xc]=jo(e[xc]),(isNaN(e[bc])||e[bc]<=0||e[bc]>=100)&&(e[bc]=100),e[Ic]=jo(e[Ic]),e[Cc]=jo(e[Cc]),e[Tc]=jo(e[Tc]),e[Sc]=e[Sc]||"",e.enableDebug=jo(e.enableDebug),e[_c]=jo(e[_c]),e.disableFlushOnUnload=jo(e.disableFlushOnUnload,e[_c]),e}function bs(e){sn(e[Ic])||(e[Ic]?(Ho=!1,Bo=!1):(Ho=Zo(!0),Bo=Yo(!0)))}var Is=function(e){function t(){var n,r,i,a,o,u,c,s,l,f,d,p,v,g,m,h,y,w=e.call(this)||this;return w.identifier="ApplicationInsightsAnalytics",w.priority=180,w.autoRoutePVDelay=500,ne(t,w,function(e,t){var w=t._addHook;function x(t,n,r,i,a){e[Ac]().throwInternal(t,n,r,i,a)}function b(){n=null,r=null,i=null,a=null,o=null,u=null,c=!1,s=!1,l=!1,f=!1,d=!1,p=!1,v=!1,g=!1;var e=dr();m=e&&e[jc]||"",h=null,y=null}b(),e.getCookieMgr=function(){return Ii(e[kc])},e.processTelemetry=function(t,n){e.processNext(t,n)},e.trackEvent=function(t,n){try{var r=oc(t,Su[Ec],Su[Mc],e[Ac](),n);e[kc][Dc](r)}catch(i){x(2,39,"trackTrace failed, trace will not be collected: "+Un(i),{exception:yr(i)})}},e.startTrackEvent=function(e){try{n.start(e)}catch(t){x(1,29,"startTrackEvent failed, event will not be collected: "+Un(t),{exception:yr(t)})}},e.stopTrackEvent=function(e,t,r){try{n.stop(e,void 0,t,r)}catch(i){x(1,30,"stopTrackEvent failed, event will not be collected: "+Un(i),{exception:yr(i)})}},e.trackTrace=function(t,n){try{var r=oc(t,Gu[Ec],Gu[Mc],e[Ac](),n);e[kc][Dc](r)}catch(i){x(2,39,"trackTrace failed, trace will not be collected: "+Un(i),{exception:yr(i)})}},e.trackMetric=function(t,n){try{var r=oc(t,Hu[Ec],Hu[Mc],e[Ac](),n);e[kc][Dc](r)}catch(i){x(1,36,"trackMetric failed, metric will not be collected: "+Un(i),{exception:yr(i)})}},e[Pc]=function(t,n){try{var r=t||{};i[Pc](r,ye(ye(ye({},r.properties),r.measurements),n)),e.config[yc]&&o[Nc](r.name,r.uri)}catch(a){x(1,37,"trackPageView failed, page view will not be collected: "+Un(a),{exception:yr(a)})}},e[Rc]=function(t,n,r){var i=cr();i&&(t.refUri=void 0===t.refUri?i.referrer:t.refUri);var a=oc(t,Bu[Ec],Bu[Mc],e[Ac](),n,r);e[kc][Dc](a)},e[Lc]=function(t,n,r){var i=oc(t,$u[Ec],$u[Mc],e[Ac](),n,r);e[kc][Dc](i)},e.trackPageViewPerformance=function(t,n){var r=t||{};try{a[Uc](r),e[Lc](r,n)}catch(i){x(1,37,"trackPageViewPerformance failed, page view will not be collected: "+Un(i),{exception:yr(i)})}},e.startTrackPage=function(e){try{if("string"!=typeof e){var t=cr();e=t&&t.title||""}r.start(e)}catch(n){x(1,31,"startTrackPage failed, page view may not be collected: "+Un(n),{exception:yr(n)})}},e.stopTrackPage=function(t,n,i,a){try{if("string"!=typeof t){var u=cr();t=u&&u.title||""}if("string"!=typeof n){var c=dr();n=c&&c[jc]||""}r.stop(t,n,i,a),e.config[yc]&&o[Nc](t,n)}catch(s){x(1,32,"stopTrackPage failed, page view will not be collected: "+Un(s),{exception:yr(s)})}},e[zc]=function(t,n,r){var i=t&&(t[Vc]||t[Oc])||xn(t)&&t||{name:t&&typeof t,message:t||no};t=t||{};var a=oc(new Vu(e[Ac](),i,t.properties||n,t.measurements,t.severityLevel,t.id).toInterface(),Vu[Ec],Vu[Mc],e[Ac](),n,r);e[kc][Dc](a)},e.trackException=function(t,n){t&&!t[Vc]&&t[Oc]&&(t[Vc]=t[Oc]);try{e[zc](t,n)}catch(r){x(1,35,"trackException failed, exception will not be collected: "+Un(r),{exception:yr(r)})}},e[qc]=function(t){var n=t&&t[Oc],r=t&&t.evt;try{if(!r){var i=or();i&&(r=i.event)}var a=t&&t.url||(cr()||{}).URL,o=t[Fc]||"window.onerror@"+a+":"+(t[Hc]||0)+":"+(t[Bc]||0),u={errorSrc:o,url:a,lineNumber:t[Hc]||0,columnNumber:t[Bc]||0,message:t[Kc]};!function(e,t,n,r,i){return!i&&bn(e)&&("Script error."===e||"Script error"===e)}(t.message,t.url,t.lineNumber,t.columnNumber,t[Oc])?(t[Fc]||(t[Fc]=o),e.trackException({exception:t,severityLevel:3},u)):function(t,n){var r=oc(t,Vu[Ec],Vu[Mc],e[Ac](),n);e[kc][Dc](r)}(Vu[Gc]("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",a,t[Hc]||0,t[Bc]||0,n,r,null,o),u)}catch(s){var c=n?n.name+", "+n[Kc]:"null";x(1,11,"_onError threw exception while logging error, error will not be collected: "+Un(s),{exception:yr(s),errorString:c})}},e[$c]=function(t){if(e[kc])return e[kc][$c](t);u||(u=[]),u.push(t)},e.initialize=function(x,b,I,C){if(!e.isInitialized()){ln(b)&&qn("Error initializing"),t.initialize(x,b,I,C),x.storagePrefix&&Wo(x.storagePrefix);try{y=Zi(ii(e.identifier),b.evtNamespace&&b.evtNamespace()),u&&(Sn(u,function(e){b[$c](e)}),u=null);var T=function(t){var n=Ia(null,t,e[kc]),r=e.identifier,i=xs(t),a=e.config=n.getExtCfg(r);void 0!==i&&mn(i,function(e,t){a[e]=n.getConfig(r,e,t),void 0===a[e]&&(a=t)});return a}(x);bs(T),a=new vs(e[kc]),i=new us(e,T[wc],e[kc],a),o=new gs(e[Ac](),function(t,n,r){return function(t,n,r){var i={PageName:t,PageUrl:n};e.trackMetric({name:"PageVisitTime",average:r,max:r,min:r,sampleCount:1},i)}(t,n,r)}),function(t,n){c=t[Cc]||n[Cc],function(){if(!s&&c){var t=["/browserLinkSignalR/","/__browserLink/"],n=function(e){if(c&&e.baseType===Ku[Ec]){var n=e.baseData;if(n)for(var r=0;r<t[Wc];r++)if(n.target&&n.target.indexOf(t[r])>=0)return!1}return!0};e[$c](n),s=!0}}()}(T,x),(n=new hs(e[Ac](),"trackEvent")).action=function(t,n,r,i,a){i||(i={}),a||(a={}),i.duration=r[mc](),e.trackEvent({name:t,properties:i,measurements:a})},(r=new hs(e[Ac](),"trackPageView")).action=function(t,n,r,i,a){ln(i)&&(i={}),i.duration=r[mc]();var o={name:t,uri:n,properties:i,measurements:a};e[Rc](o,i)},ar()&&(function(t){var n=or(),r=dr();d=t[hc],d||p||t.autoExceptionInstrumented||(w(Wa(n,"onerror",{ns:y,rsp:function(t,n,r,i,a,o){d||!0===t.rslt||e[qc](Vu[Gc](n,r,i,a,o,t.evt))}},!1)),p=!0);!function(t,n,r){v=!0===t[xc],v&&!g&&(w(Wa(n,"onunhandledrejection",{ns:y,rsp:function(t,n){v&&!0!==t.rslt&&e[qc](Vu[Gc](function(e){if(e&&e.reason){var t=e.reason;return!bn(t)&&vn(t[mc])?t[mc]():yr(t)}return e||""}(n),r?r[jc]:"",0,0,n,t.evt))}},!1)),g=!0,t.autoUnhandledPromiseInstrumented=g)}(t,n,r)}(T),function(t){var n=or(),r=dr();if(l=!0===t[Tc],n&&l&&fr()){var i=fr()?history:ir("history");vn(i.pushState)&&vn(i.replaceState)&&typeof Event!==ae&&function(t,n,r,i){var a=t[Sc]||"";function o(){l&&ys(n,io(a+"locationchange"))}function u(){if(h?(m=h,h=i&&i[jc]||""):h=i&&i[jc]||"",l){var t=function(){var t=null;e[kc]&&e[kc].getTraceCtx&&(t=e[kc].getTraceCtx(!1));if(!t){var n=e[kc].getPlugin(vc);if(n){var r=n.plugin.context;r&&(t=Iu(r.telemetryTrace))}}return t}();if(t){t.setTraceId(ra());var n="_unknown_";i&&i.pathname&&(n=i.pathname+(i.hash||"")),t.setName(nu(e[Ac](),n))}setTimeout(function(t){e[Pc]({refUri:t,properties:{duration:0}})}.bind(e,m),e.autoRoutePVDelay)}}f||(w(Wa(r,"pushState",{ns:y,rsp:function(){l&&(ys(n,io(a+"pushState")),ys(n,io(a+"locationchange")))}},!0)),w(Wa(r,"replaceState",{ns:y,rsp:function(){l&&(ys(n,io(a+"replaceState")),ys(n,io(a+"locationchange")))}},!0)),Yi(n,a+"popstate",o,y),Yi(n,a+"locationchange",u,y),f=!0)}(t,n,i,r)}}(T))}catch(S){throw e.setInitialized(!1),S}}},e._doTeardown=function(e,t){i&&i.teardown(e,t),Ji(window,null,null,y),b()},Pn(e,"_pageViewManager",function(){return i}),Pn(e,"_pageViewPerformanceManager",function(){return a}),Pn(e,"_pageVisitTimeManager",function(){return o}),Pn(e,"_evtNamespace",function(){return"."+y})}),w}return xe(t,e),t.Version="2.8.18",t.getDefaultConfig=xs,t}(Aa),Cs="duration",Ts="tags",Ss="deviceType",_s="data",ks="name",Es="traceID",Ms="length",As="stringify",Ds="measurements",Ps="dataType",Ns="envelopeType",Rs="toString",Ls="onLine",Us="isOnline",js="enqueue",zs="count",Vs="eventsLimitInMem",Os="push",qs="emitLineDelimitedJson",Fs="clear",Hs="batchPayloads",Bs="markAsSent",Ks="clearSent",Gs="bufferOverride",$s="BUFFER_KEY",Xs="SENT_BUFFER_KEY",Ws="MAX_BUFFER_SIZE",Zs="namePrefix",Ys="maxBatchSizeInBytes",Js="triggerSend",Qs="diagLog",el="onunloadDisableBeacon",tl="isBeaconApiDisabled",nl="_sender",rl="_senderConfig",il="enableSessionStorageBuffer",al="_buffer",ol="samplingPercentage",ul="instrumentationKey",cl="endpointUrl",sl="customHeaders",ll="disableXhr",fl="onunloadDisableFetch",dl="disableTelemetry",pl="baseType",vl="sampleRate",gl="convertUndefined",ml="_onError",hl="_onPartialSuccess",yl="_onSuccess",wl="itemsAccepted",xl="isRetryDisabled",bl="setRequestHeader",Il="maxBatchInterval",Cl="eventsSendRequest",Tl="disableInstrumentationKeyValidation",Sl="getSamplingScore",_l="baseType",kl="baseData",El="properties",Ml="true";function Al(e,t,n){return jn(e,t,n,On)}function Dl(e,t,n){ln(e)||mn(e,function(e,r){In(r)?n[e]=r:bn(r)?t[e]=r:vr()&&(t[e]=gr()[As](r))})}function Pl(e,t){ln(e)||mn(e,function(n,r){e[n]=r||t})}function Nl(e,t,n,r){var i=new Tu(e,r,t);Al(i,"sampleRate",n[Ya]),(n[kl]||{}).startTime&&(i.time=Tn(n[kl].startTime)),i.iKey=n.iKey;var a=n.iKey.replace(/-/g,"");return i[ks]=i[ks].replace("{0}",a),function(e,t,n){var r=n[Ts]=n[Ts]||{},i=t.ext=t.ext||{},a=t[Ts]=t[Ts]||[],o=i.user;o&&(Al(r,pc.userAuthUserId,o.authId),Al(r,pc.userId,o.id||o.localId));var u=i.app;u&&Al(r,pc.sessionId,u.sesId);var c=i.device;c&&(Al(r,pc.deviceId,c.id||c.localId),Al(r,pc[Ss],c.deviceClass),Al(r,pc.deviceIp,c.ip),Al(r,pc.deviceModel,c.model),Al(r,pc[Ss],c[Ss]));var s=t.ext.web;if(s){Al(r,pc.deviceLanguage,s.browserLang),Al(r,pc.deviceBrowserVersion,s.browserVer),Al(r,pc.deviceBrowser,s.browser);var l=n[_s]=n[_s]||{},f=l[kl]=l[kl]||{},d=f[El]=f[El]||{};Al(d,"domain",s.domain),Al(d,"isManual",s.isManual?Ml:null),Al(d,"screenRes",s.screenRes),Al(d,"userConsent",s.userConsent?Ml:null)}var p=i.os;p&&Al(r,pc.deviceOS,p[ks]);var v=i.trace;v&&(Al(r,pc.operationParentId,v.parentID),Al(r,pc.operationName,nu(e,v[ks])),Al(r,pc.operationId,v[Es]));for(var g={},m=a[Ms]-1;m>=0;m--)mn(a[m],function(e,t){g[e]=t}),a.splice(m,1);mn(a,function(e,t){g[e]=t});var h=ye(ye({},r),g);h[pc.internalSdkVersion]||(h[pc.internalSdkVersion]=nu(e,"javascript:".concat(Ll.Version),64)),n[Ts]=Kn(h)}(e,n,i),n[Ts]=n[Ts]||[],Kn(i)}function Rl(e,t){ln(t[kl])&&Lr(e,1,46,"telemetryItem.baseData cannot be null.")}var Ll={Version:"2.8.18"};function Ul(e,t,n){Rl(e,t);var r={},i={};t[_l]!==Su[Ps]&&(r.baseTypeSource=t[_l]),t[_l]===Su[Ps]?(r=t[kl][El]||{},i=t[kl][Ds]||{}):t[kl]&&Dl(t[kl],r,i),Dl(t[_s],r,i),ln(n)||Pl(r,n);var a=t[kl][ks],o=new Su(e,a,r,i),u=new Xu(Su[Ps],o);return Nl(e,Su[Ns],t,u)}function jl(e,t){Ji(e,null,null,t)}var zl,Vl=function(){function e(t,n){var r=[],i=!1;this._get=function(){return r},this._set=function(e){return r=e},ne(e,this,function(e){e[js]=function(a){e[zs]()>=n[Vs]()?i||(Lr(t,2,105,"Maximum in-memory buffer size reached: "+e[zs](),!0),i=!0):r[Os](a)},e[zs]=function(){return r[Ms]},e.size=function(){for(var e=r[Ms],t=0;t<r[Ms];t++)e+=r[t][Ms];return n[qs]()||(e+=2),e},e[Fs]=function(){r=[],i=!1},e.getItems=function(){return r.slice(0)},e[Hs]=function(e){return e&&e[Ms]>0?n[qs]()?e.join("\n"):"["+e.join(",")+"]":null}})}return e.__ieDyn=1,e}(),Ol=function(e){function t(n,r){var i=e.call(this,n,r)||this;return ne(t,i,function(e,t){e[Bs]=function(e){t[Fs]()},e[Ks]=function(e){}}),i}return xe(t,e),t.__ieDyn=1,t}(Vl),ql=function(e){function t(n,r){var i=e.call(this,n,r)||this,a=!1,o=r[Gs]()||{getItem:Jo,setItem:Qo},u=o.getItem,c=o.setItem;return ne(t,i,function(e,i){var o=d(t[$s]),s=d(t[Xs]),l=e._set(o.concat(s));function f(e,t){var n=[];return Sn(t,function(t){vn(t)||-1!==_n(e,t)||n[Os](t)}),n}function d(e){var t=e;try{t=r[Zs]&&r[Zs]()?r[Zs]()+"_"+t:t;var i=u(n,t);if(i){var a=gr().parse(i);if(bn(a)&&(a=gr().parse(a)),a&&wn(a))return a}}catch(o){Lr(n,1,42," storage key: "+t+", "+Un(o),{exception:yr(o)})}return[]}function p(e,t){var i=e;try{i=r[Zs]&&r[Zs]()?r[Zs]()+"_"+i:i;var a=JSON[As](t);c(n,i,a)}catch(o){c(n,i,JSON[As]([])),Lr(n,2,41," storage key: "+i+", "+Un(o)+". Buffer cleared",{exception:yr(o)})}}l[Ms]>t[Ws]&&(l[Ms]=t[Ws]),p(t[Xs],[]),p(t[$s],l),e[js]=function(r){e[zs]()>=t[Ws]?a||(Lr(n,2,67,"Maximum buffer size reached: "+e[zs](),!0),a=!0):(i[js](r),p(t[$s],e._get()))},e[Fs]=function(){i[Fs](),p(t[$s],e._get()),p(t[Xs],[]),a=!1},e[Bs]=function(r){p(t[$s],e._set(f(r,e._get())));var i=d(t[Xs]);i instanceof Array&&r instanceof Array&&((i=i.concat(r))[Ms]>t[Ws]&&(Lr(n,1,67,"Sent buffer reached its maximum size: "+i[Ms],!0),i[Ms]=t[Ws]),p(t[Xs],i))},e[Ks]=function(e){var n=d(t[Xs]);n=f(e,n),p(t[Xs],n)}}),i}return xe(t,e),t.BUFFER_KEY="AI_buffer",t.SENT_BUFFER_KEY="AI_sentBuffer",t.MAX_BUFFER_SIZE=2e3,t}(Vl),Fl=function(){function e(t){ne(e,this,function(e){function n(e,a){var o="__aiCircularRefCheck",u={};if(!e)return Lr(t,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),u;if(e[o])return Lr(t,2,50,"Circular reference detected while serializing object",{name:a},!0),u;if(!e.aiDataContract){if("measurements"===a)u=i(e,"number",a);else if("properties"===a)u=i(e,"string",a);else if("tags"===a)u=i(e,"string",a);else if(wn(e))u=r(e,a);else{Lr(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{gr()[As](e),u=e}catch(c){Lr(t,1,48,c&&vn(c[Rs])?c[Rs]():"Error serializing object",null,!0)}}return u}return e[o]=!0,mn(e.aiDataContract,function(i,o){var c=vn(o)?1&o():1&o,s=vn(o)?4&o():4&o,l=2&o,f=void 0!==e[i],d=pn(e[i])&&null!==e[i];if(!c||f||l){if(!s){var p=void 0;void 0!==(p=d?l?r(e[i],i):n(e[i],i):e[i])&&(u[i]=p)}}else Lr(t,1,24,"Missing required field specification. The field is required but not present on source",{field:i,name:a})}),delete e[o],u}function r(e,r){var i;if(e)if(wn(e)){i=[];for(var a=0;a<e[Ms];a++){var o=n(e[a],r+"["+a+"]");i[Os](o)}}else Lr(t,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:r},!0);return i}function i(e,n,r){var i;return e&&(i={},mn(e,function(e,a){if("string"===n)void 0===a?i[e]="undefined":null===a?i[e]="null":a[Rs]?i[e]=a[Rs]():i[e]="invalid field: toString() is not defined.";else if("number"===n)if(void 0===a)i[e]="undefined";else if(null===a)i[e]="null";else{var o=parseFloat(a);isNaN(o)?i[e]="NaN":i[e]=o}else i[e]="invalid field: "+r+" is of unknown type.",Lr(t,1,i[e],null,!0)})),i}e.serialize=function(e){var r=n(e,"root");try{return gr()[As](r)}catch(i){Lr(t,1,48,i&&vn(i[Rs])?i[Rs]():"Error serializing object",null,!0)}}})}return e.__ieDyn=1,e}(),Hl=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return 100*(this.getHashCode(t)/e.INT_MAX_VALUE)},e.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[Ms]<8;)e=e.concat(e);for(var t=5381,n=0;n<e[Ms];++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},e.INT_MAX_VALUE=2147483647,e}(),Bl=function(){var e=new Hl,t=new ac;this[Sl]=function(n){return n[Ts]&&n[Ts][t.userId]?e.getHashCodeScore(n[Ts][t.userId]):n.ext&&n.ext.user&&n.ext.user.id?e.getHashCodeScore(n.ext.user.id):n[Ts]&&n[Ts][t.operationId]?e.getHashCodeScore(n[Ts][t.operationId]):n.ext&&n.ext.telemetryTrace&&n.ext.telemetryTrace[Es]?e.getHashCodeScore(n.ext.telemetryTrace[Es]):100*Math.random()}},Kl=function(){function e(e,t){this.INT_MAX_VALUE=2147483647;var n=t||Pr(null);(e>100||e<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[vl]=e,this.samplingScoreGenerator=new Bl}return e.prototype.isSampledIn=function(e){var t=this[vl];return null==t||t>=100||(e.baseType===Hu[Ps]||this.samplingScoreGenerator[Sl](e)<t)},e}();function Gl(e){try{return e.responseText}catch(t){}return null}function $l(){var e,t;return(e={endpointUrl:function(){return eo+to}})[qs]=function(){return!1},e[Il]=function(){return 15e3},e[Ys]=function(){return 102400},e[dl]=function(){return!1},e[il]=function(){return!0},e[Gs]=function(){return!1},e[xl]=function(){return!1},e[tl]=function(){return!0},e[ll]=function(){return!1},e[fl]=function(){return!1},e[el]=function(){return!1},e[ul]=function(){return t},e[Zs]=function(){return t},e[ol]=function(){return 100},e[sl]=function(){},e[gl]=function(){return t},e[Vs]=function(){return 1e4},e.retryCodes=function(){return null},e}var Xl=((zl={})[Su.dataType]=Ul,zl[Gu.dataType]=function(e,t,n){Rl(e,t);var r=t[kl].message,i=t[kl].severityLevel,a=t[kl][El]||{},o=t[kl][Ds]||{};Dl(t[_s],a,o),ln(n)||Pl(a,n);var u=new Gu(e,r,i,a,o),c=new Xu(Gu[Ps],u);return Nl(e,Gu[Ns],t,c)},zl[Bu.dataType]=function(e,t,n){var r;Rl(e,t);var i=t[kl];ln(i)||ln(i[El])||ln(i[El][Cs])?ln(t[_s])||ln(t[_s][Cs])||(r=t[_s][Cs],delete t[_s][Cs]):(r=i[El][Cs],delete i[El][Cs]);var a,o=t[kl];((t.ext||{}).trace||{})[Es]&&(a=t.ext.trace[Es]);var u=o.id||a,c=o[ks],s=o.uri,l=o[El]||{},f=o[Ds]||{};ln(o.refUri)||(l.refUri=o.refUri),ln(o.pageType)||(l.pageType=o.pageType),ln(o.isLoggedIn)||(l.isLoggedIn=o.isLoggedIn[Rs]()),ln(o[El])||mn(o[El],function(e,t){l[e]=t}),Dl(t[_s],l,f),ln(n)||Pl(l,n);var d=new Bu(e,c,s,r,l,f,u),p=new Xu(Bu[Ps],d);return Nl(e,Bu[Ns],t,p)},zl[$u.dataType]=function(e,t,n){Rl(e,t);var r=t[kl],i=r[ks],a=r.uri||r.url,o=r[El]||{},u=r[Ds]||{};Dl(t[_s],o,u),ln(n)||Pl(o,n);var c=new $u(e,i,a,void 0,o,u,r),s=new Xu($u[Ps],c);return Nl(e,$u[Ns],t,s)},zl[Vu.dataType]=function(e,t,n){Rl(e,t);var r=t[kl][Ds]||{},i=t[kl][El]||{};Dl(t[_s],i,r),ln(n)||Pl(i,n);var a=t[kl],o=Vu.CreateFromInterface(e,a,i,r),u=new Xu(Vu[Ps],o);return Nl(e,Vu[Ns],t,u)},zl[Hu.dataType]=function(e,t,n){Rl(e,t);var r=t[kl],i=r[El]||{},a=r[Ds]||{};Dl(t[_s],i,a),ln(n)||Pl(i,n);var o=new Hu(e,r[ks],r.average,r.sampleCount,r.min,r.max,r.stdDev,i,a),u=new Xu(Hu[Ps],o);return Nl(e,Hu[Ns],t,u)},zl[Ku.dataType]=function(e,t,n){Rl(e,t);var r=t[kl][Ds]||{},i=t[kl][El]||{};Dl(t[_s],i,r),ln(n)||Pl(i,n);var a=t[kl];if(ln(a))return Ur(e,"Invalid input for dependency data"),null;var o=a[El]&&a[El][Qa]?a[El][Qa]:"GET",u=new Ku(e,a.id,a.target,a[ks],a[Cs],a.success,a.responseCode,o,a.type,a.correlationContext,i,r),c=new Xu(Ku[Ps],u);return Nl(e,Ku[Ns],t,c)},zl),Wl=function(e){function t(){var n,r,i,a,o,u,c,s=e.call(this)||this;s.priority=1001,s.identifier=gc,s._senderConfig=$l();var l,f,d,p,v,g=0;return ne(t,s,function(e,m){function h(t,r,i,a,o,u){var c=null;if(e._appId||(c=_(u))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!y(i))return void e[ml](r,o);!e[rl][xl]()&&A(t)?(k(r),Lr(e[Qs](),2,40,". Response code "+t+". Will retry to send "+r[Ms]+" items.")):e[ml](r,o)}else if(d&&!d[Us]()){if(!e[rl][xl]()){k(r,10),Lr(e[Qs](),2,40,". Offline - Response Code: ".concat(t,". Offline status: ").concat(!d.isOnline(),". Will retry to send ").concat(r.length," items."))}}else y(i),206===t?(c||(c=_(u)),c&&!e[rl][xl]()?e[hl](r,c):e[ml](r,o)):(n=0,e[yl](r,a))}function y(t){return!(u>=10)&&(!ln(t)&&""!==t&&t!==e[rl][cl]()&&(e[rl][cl]=function(){return t},++u,!0))}function w(e,t){f?f(e,!1):b(e)}function x(t){var n=lr(),r=e[al],i=e[rl][cl](),a=e._buffer[Hs](t),o=new Blob([a],{type:"text/plain;charset=UTF-8"}),u=n.sendBeacon(i,o);return u&&(r[Bs](t),e._onSuccess(t,t[Ms])),u}function b(t,n){if(wn(t)&&t[Ms]>0&&!x(t)){for(var r=[],i=0;i<t[Ms];i++){var a=t[i];x([a])||r[Os](a)}r[Ms]>0&&(l&&l(r,!0),Lr(e[Qs](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function I(t,n){var r=new XMLHttpRequest,i=e[rl][cl]();try{r[Za]=!0}catch(o){}r.open("POST",i,n),r[bl]("Content-type","application/json"),yu(i)&&r[bl](Oo[6],Oo[7]),Sn(Dn(c),function(e){r[bl](e,c[e])}),r.onreadystatechange=function(){return e._xhrReadyStateChange(r,t,t[Ms])},r.onerror=function(n){return e[ml](t,D(r),n)};var a=e._buffer[Hs](t);r.send(a),e._buffer[Bs](t)}function C(t,n){if(wn(t)){for(var r=t[Ms],i=0;i<t[Ms];i++)r+=t[i][Ms];g+r<=65e3?S(t,!1):wr()?b(t):(l&&l(t,!0),Lr(e[Qs](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}function T(e,t){S(e,!0)}function S(t,n){var r,i=e[rl][cl](),a=e._buffer[Hs](t),o=new Blob([a],{type:"application/json"}),u=new Headers,s=a[Ms],l=!1,f=!1;yu(i)&&u.append(Oo[6],Oo[7]),Sn(Dn(c),function(e){u.append(e,c[e])});var d=((r={method:"POST",headers:u,body:o})[Za]=!0,r);n||(d.keepalive=!0,l=!0,g+=s);var p=new Request(i,d);try{p[Za]=!0}catch(v){}e._buffer[Bs](t);try{fetch(p).then(function(r){n||(g-=s,s=0),f||(f=!0,r.ok?r.text().then(function(e){h(r.status,t,r.url,t[Ms],r.statusText,e)}):e[ml](t,r.statusText))}).catch(function(r){n||(g-=s,s=0),f||(f=!0,e[ml](t,r.message))})}catch(v){f||e[ml](t,yr(v))}l&&!f&&(f=!0,e._onSuccess(t,t[Ms]))}function _(t){try{if(t&&""!==t){var n=gr().parse(t);if(n&&n.itemsReceived&&n.itemsReceived>=n[wl]&&n.itemsReceived-n.itemsAccepted===n.errors[Ms])return n}}catch(r){Lr(e[Qs](),1,43,"Cannot parse the response. "+Un(r),{response:t})}return null}function k(t,i){if(void 0===i&&(i=1),t&&0!==t[Ms]){var a=e[al];a[Ks](t),n++;for(var o=0,u=t;o<u.length;o++){var c=u[o];a[js](c)}!function(e){var t,i=10;if(n<=1)t=i;else{var a=(Math.pow(2,n)-1)/2,o=Math.floor(Math.random()*a*i)+1;o*=e,t=Math.max(Math.min(o,3600),i)}var u=Ln()+1e3*t;r=u}(i),E()}}function E(){if(!a&&!i){var t=r?Math.max(0,r-Ln()):0,n=Math.max(e[rl][Il](),t);a=setTimeout(function(){a=null,e[Js](!0,null,1)},n)}}function M(){clearTimeout(a),a=null,r=null}function A(e){return ln(v)?401===e||408===e||429===e||500===e||502===e||503===e||504===e:v[Ms]&&_n(v,e)>-1}function D(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+Gl(e)||e.response||"":t}function P(t,n){var r=e[al],i=or(),a=new XDomainRequest;a.onload=function(){return e._xdrOnLoad(a,t)},a.onerror=function(n){return e[ml](t,N(a),n)};var o=i&&i.location&&i.location.protocol||"";if(0!==e[rl][cl]().lastIndexOf(o,0))return Lr(e[Qs](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void r[Fs]();var u=e[rl][cl]().replace(/^(https?:)/,"");a.open("POST",u);var c=r[Hs](t);a.send(c),r[Bs](t)}function N(e,t){return e?"XDomainRequest,Response:"+Gl(e)||"":t}function R(){e[nl]=null,e[al]=null,e._appId=null,e._sample=null,c={},d=null,n=0,r=null,i=!1,a=null,o=null,u=0,g=0,l=null,f=null,p=null}R(),e.pause=function(){M(),i=!0},e.resume=function(){i&&(i=!1,r=null,e._buffer.size()>e._senderConfig[Ys]()&&e[Js](!0,null,10),E())},e.flush=function(t,n,r){if(void 0===t&&(t=!0),!i){M();try{e[Js](t,null,r||1)}catch(a){Lr(e[Qs](),1,22,"flush failed, telemetry will not be collected: "+Un(a),{exception:yr(a)})}}},e.onunloadFlush=function(){if(!i)if(!1!==e._senderConfig[el]()&&!1!==e[rl][tl]()||!wr())e.flush();else try{e[Js](!0,w,2)}catch(t){Lr(e[Qs](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Un(t),{exception:yr(t)})}},e.addHeader=function(e,t){c[e]=t},e.initialize=function(t,i,a,c){e.isInitialized()&&Lr(e[Qs](),1,28,"Sender is already initialized"),m.initialize(t,i,a,c);var g=e._getTelCtx(),h=e.identifier;o=new Fl(i.logger),n=0,r=null,e[nl]=null,u=0;var y=e[Qs]();p=Zi(ii("Sender"),i.evtNamespace&&i.evtNamespace()),d=function(e){var t,n=cr(),r=lr(),i=!1,a=!0,o=Zi(ii("OfflineListener"),e);try{if(c(or())&&(i=!0),n){var u=n.body||n;u.ononline&&c(u)&&(i=!0)}i&&r&&!ln(r[Ls])&&(a=r[Ls])}catch(f){i=!1}function c(e){var t=!1;return e&&(t=Yi(e,"online",s,o))&&Yi(e,"offline",l,o),t}function s(){a=!0}function l(){a=!1}return(t={})[Us]=function(){var e=!0;return i?e=a:r&&!ln(r[Ls])&&(e=r[Ls]),e},t.isListening=function(){return i},t.unload=function(){var e=or();if(e&&i){if(jl(e,o),n){var t=n.body||n;sn(t.ononline)||jl(t,o)}i=!1}},t}(p),mn($l(),function(t,n){e[rl][t]=function(){var e=g.getConfig(h,t,n());return e||"endpointUrl"!==t||(e=n()),e}}),v=e[rl].retryCodes(),t.storagePrefix&&Wo(t.storagePrefix);var w=e[rl][il]()&&!(!e._senderConfig[Gs]()&&!Yo());e[al]=w?new ql(y,e[rl]):new Ol(y,e[rl]),e._sample=new Kl(e[rl][ol](),y),function(e){var t=!ln(e[Tl])&&e[Tl];if(t)return!0;return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e[ul])}(t)||Lr(y,1,100,"Invalid Instrumentation key "+t[ul]),!yu(e._senderConfig.endpointUrl())&&e._senderConfig.customHeaders()&&e._senderConfig.customHeaders()[Ms]>0&&Sn(e[rl][sl](),function(e){s.addHeader(e.header,e.value)});var x=e[rl],S=null;!x[ll]()&&br()?S=P:!x[ll]()&&Ir()&&(S=I),!S&&xr()&&(S=T),l=S||I,!x[tl]()&&wr()&&(S=b),e[nl]=S||I,f=!x[fl]()&&xr(!0)?C:wr()?b:!x[ll]()&&br()?P:!x[ll]()&&Ir()?I:l},e.processTelemetry=function(n,r){var i,a=(r=e._getTelCtx(r))[Qs]();try{if(e[rl][dl]())return;if(!n)return void Lr(a,1,7,"Cannot send empty telemetry");if(n.baseData&&!n[pl])return void Lr(a,1,70,"Cannot send telemetry without baseData and baseType");if(n[pl]||(n[pl]="EventData"),!e[nl])return void Lr(a,1,28,"Sender was not initialized");if(i=n,!e._sample.isSampledIn(i))return void Lr(a,2,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample[vl]});n[Ya]=e._sample[vl];var u=e[rl][gl]()||void 0,c=n.iKey||e[rl][ul](),s=t.constructEnvelope(n,c,a,u);if(!s)return void Lr(a,1,47,"Unable to create an AppInsights envelope");var l=!1;if(n[Ts]&&n[Ts][Ja]&&(Sn(n[Ts][Ja],function(e){try{e&&!1===e(s)&&(l=!0,Ur(a,"Telemetry processor check returns false"))}catch(t){Lr(a,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Un(t),{exception:yr(t)},!0)}}),delete n[Ts][Ja]),l)return;var f=o.serialize(s),p=e[al];p.size()+f[Ms]>e[rl][Ys]()&&(d&&!d[Us]()||e[Js](!0,null,10)),p[js](f),E()}catch(v){Lr(a,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Un(v),{exception:yr(v)})}e.processNext(n,r)},e._xhrReadyStateChange=function(e,t,n){4===e.readyState&&h(e.status,t,e.responseURL,n,D(e),Gl(e)||e.response)},e[Js]=function(t,n,r){if(void 0===t&&(t=!0),!i)try{var a=e[al];if(e[rl][dl]())a[Fs]();else{if(a[zs]()>0){var o=a.getItems();!function(t,n){var r=function(){var t="getNotifyMgr";if(e.core[t])return e.core[t]();return e.core._notificationManager}();if(r&&r[Cl])try{r[Cl](t,n)}catch(i){Lr(e[Qs](),1,74,"send request notification failed: "+Un(i),{exception:yr(i)})}}(r||0,t),n?n.call(e,o,t):e[nl](o,t)}+new Date}M()}catch(c){var u=hr();(!u||u>9)&&Lr(e[Qs](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Un(c),{exception:yr(c)})}},e._doTeardown=function(t,n){e.onunloadFlush(),d.unload(),R()},e[ml]=function(t,n,r){Lr(e[Qs](),2,26,"Failed to send telemetry.",{message:n}),e._buffer&&e._buffer[Ks](t)},e[hl]=function(t,n){for(var r=[],i=[],a=0,o=n.errors.reverse();a<o.length;a++){var u=o[a],c=t.splice(u.index,1)[0];A(u.statusCode)?i[Os](c):r[Os](c)}t[Ms]>0&&e[yl](t,n[wl]),r[Ms]>0&&e[ml](r,D(null,["partial success",n[wl],"of",n.itemsReceived].join(" "))),i[Ms]>0&&(k(i),Lr(e[Qs](),2,40,"Partial success. Delivered: "+t[Ms]+", Failed: "+r[Ms]+". Will retry to send "+i[Ms]+" our of "+n.itemsReceived+" items"))},e[yl]=function(t,n){e._buffer&&e._buffer[Ks](t)},e._xdrOnLoad=function(t,r){var i=Gl(t);if(!t||i+""!="200"&&""!==i){var a=_(i);a&&a.itemsReceived&&a.itemsReceived>a[wl]&&!e[rl][xl]()?e[hl](r,a):e[ml](r,N(t))}else n=0,e[yl](r,0)}}),s}return xe(t,e),t.constructEnvelope=function(e,t,n,r){var i;return i=t===e.iKey||ln(t)?e:ye(ye({},e),{iKey:t}),(Xl[i.baseType]||Ul)(n,i,r)},t}(Aa),Zl="duration",Yl="properties",Jl="requestUrl",Ql="inst",ef="length",tf="traceID",nf="spanID",rf="traceFlags",af="context",of="aborted",uf="traceId",cf="spanId",sf="core",lf="includeCorrelationHeaders",ff="canIncludeCorrelationHeader",df="getAbsoluteUrl",pf="headers",vf="requestHeaders",gf="appId",mf="setRequestHeader",hf="trackDependencyDataInternal",yf="distributedTracingMode",wf="startTime",xf="toLowerCase",bf="enableRequestHeaderTracking",If="enableAjaxErrorStatusText",Cf="enableAjaxPerfTracking",Tf="maxAjaxCallsPerView",Sf="enableResponseHeaderTracking",_f="excludeRequestFromAutoTrackingPatterns",kf="addRequestContext",Ef="disableAjaxTracking",Mf="disableFetchTracking",Af="status",Df="statusText",Pf="headerMap",Nf="openDone",Rf="sendDone",Lf="requestSentTime",Uf="abortDone",jf="getTraceId",zf="getTraceFlags",Vf="method",Of="errorStatusText",qf="stateChangeAttached",Ff="responseFinishedTime",Hf="CreateTrackItem",Bf="response",Kf="getAllResponseHeaders",Gf="getPartAProps",$f="getCorrelationContext",Xf="perfMark",Wf="name",Zf="perfTiming",Yf="ajaxTotalDuration",Jf="eventTraceCtx";function Qf(e,t,n){var r=0,i=e[t],a=e[n];return i&&a&&(r=bu(i,a)),r}function ed(e,t,n,r,i){var a=0,o=Qf(n,r,i);return o&&(a=td(e,t,zo(o))),a}function td(e,t,n){var r="ajaxPerf",i=0;e&&t&&n&&((e[r]=e[r]||{})[t]=n,i=1);return i}var nd=function(){var e=this;e[Nf]=!1,e.setRequestHeaderDone=!1,e[Rf]=!1,e[Uf]=!1,e[qf]=!1},rd=function(){function e(t,n,r,i){var a,o=this,u=r;o[Xf]=null,o.completed=!1,o.requestHeadersSize=null,o[vf]=null,o.responseReceivingDuration=null,o.callbackDuration=null,o[Yf]=null,o[of]=0,o.pageUrl=null,o[Jl]=null,o.requestSize=0,o[Vf]=null,o[Af]=null,o[Lf]=null,o.responseStartedTime=null,o[Ff]=null,o.callbackFinishedTime=null,o.endTime=null,o.xhrMonitoringState=new nd,o.clientFailure=0,o[tf]=t,o[nf]=n,o[rf]=null==i?void 0:i.getTraceFlags(),o[Jf]=i?((a={})[uf]=i[jf](),a[cf]=i.getSpanId(),a[rf]=i[zf](),a):null,ne(e,o,function(e){e.getAbsoluteUrl=function(){return e[Jl]?function(e){var t,n=vu(e);return n&&(t=n.href),t}(e[Jl]):null},e.getPathName=function(){return e[Jl]?ru(u,(t=e[Vf],n=e[Jl],t?t.toUpperCase()+" "+n:n)):null;var t,n},e[Hf]=function(t,n,r){var i;if(e.ajaxTotalDuration=Math.round(1e3*bu(e.requestSentTime,e.responseFinishedTime))/1e3,e[Yf]<0)return null;var a=((i={id:"|"+e[tf]+"."+e[nf],target:e[df]()})[Wf]=e.getPathName(),i.type=t,i[wf]=null,i.duration=e[Yf],i.success=+e[Af]>=200&&+e[Af]<400,i.responseCode=+e[Af],i[Yl]={HttpMethod:e[Vf]},i),o=a[Yl];if(e[of]&&(o[of]=!0),e[Lf]&&(a[wf]=new Date,a[wf].setTime(e[Lf])),function(e,t){var n=e[Zf],r=t[Yl]||{},i=0,a="name",o="Start",u="End",c="domainLookup",s="connect",l="redirect",f="request",d="response",p="startTime",v=c+o,g=c+u,m=s+o,h=s+u,y=f+o,w=f+u,x=d+o,b=d+u,I=l+o,C=l=u,T="transferSize",S="encodedBodySize",_="decodedBodySize",k="serverTiming";if(n){i|=ed(r,l,n,I,C),i|=ed(r,c,n,v,g),i|=ed(r,s,n,m,h),i|=ed(r,f,n,y,w),i|=ed(r,d,n,x,b),i|=ed(r,"networkConnect",n,p,h),i|=ed(r,"sentRequest",n,y,b);var E=n[Zl];E||(E=Qf(n,p,b)||0),i|=td(r,Zl,E),i|=td(r,"perfTotal",E);var M=n[k];if(M){var A={};Sn(M,function(e,t){var n=gn(e[a]||""+t),r=A[n]||{};mn(e,function(e,t){(e!==a&&bn(t)||In(t))&&(r[e]&&(t=r[e]+";"+t),!t&&bn(t)||(r[e]=t))}),A[n]=r}),i|=td(r,k,A)}i|=td(r,T,n[T]),i|=td(r,S,n[S]),i|=td(r,_,n[_])}else e[Xf]&&(i|=td(r,"missing",e.perfAttempts));i&&(t[Yl]=r)}(e,a),n&&Dn(e.requestHeaders)[ef]>0&&(o[vf]=e[vf]),r){var u=r();if(u){var c=u.correlationContext;if(c&&(a.correlationContext=c),u[Pf]&&Dn(u.headerMap)[ef]>0&&(o.responseHeaders=u[Pf]),e[Of])if(e[Af]>=400){var s=u.type;""!==s&&"text"!==s||(o.responseText=u.responseText?u[Df]+" - "+u.responseText:u[Df]),"json"===s&&(o.responseText=u.response?u[Df]+" - "+JSON.stringify(u[Bf]):u[Df])}else 0===e[Af]&&(o.responseText=u[Df]||"")}}return a},e[Gf]=function(){var t,n=null,r=e[Jf];if(r&&(r[uf]||r[cf])){var i=(n={})[sc]=((t={})[tf]=r[uf],t.parentID=r[cf],t);ln(r[rf])||(i[rf]=r[rf])}return n}})}return e.__ieDyn=1,e}(),id="ai.ajxmn.",ad="diagLog",od="_ajaxData",ud="fetch",cd="Failed to monitor XMLHttpRequest",sd=", monitoring data for this ajax call ",ld=sd+"may be incorrect.",fd=sd+"won't be sent.",dd="Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",pd="Failed to add custom defined request context as configured call back may missing a null check.",vd="Failed to calculate the duration of the ",gd=0;var md=null;var hd=function(e,t){return e&&t&&e[od]?(e[od].i||{})[t]:null},yd=function(e,t){var n=!1;if(e){var r=(e[od]||{}).xh;r&&Sn(r,function(e){if(e.n===t)return n=!0,-1})}return n};function wd(e,t){var n="";try{var r=hd(e,t);r&&r[Jl]&&(n+="(url: '"+r[Jl]+"')")}catch(i){}return n}function xd(e,t,n,r,i){Lr(e[ad](),1,t,n,r,i)}function bd(e,t,n,r,i){Lr(e[ad](),2,t,n,r,i)}function Id(e,t,n){return function(r){xd(e,t,n,{ajaxDiagnosticsMessage:wd(r[Ql],e._ajaxDataId),exception:yr(r.err)})}}function Cd(e,t){return e&&t?e.indexOf(t):-1}function Td(e,t,n){var r={id:t,fn:n};return e.push(r),{remove:function(){Sn(e,function(t,n){if(t.id===r.id)return e.splice(n,1),-1})}}}function Sd(e,t,n,r){var i=!0;return Sn(t,function(t,a){try{!1===t.fn.call(null,n)&&(i=!1)}catch(o){Lr(e&&e.logger,1,64,"Dependency "+r+" [#"+a+"] failed: "+Un(o),{exception:yr(o)},!0)}}),i}var _d="*.blob.core.",kd=Nn([_d+"windows.net",_d+"chinacloudapi.cn",_d+"cloudapi.de",_d+"usgovcloudapi.net"]),Ed=[/https:\/\/[^\/]*(\.pipe\.aria|aria\.pipe|events\.data|collector\.azure)\.[^\/]+\/(OneCollector\/1|Collector\/3)\.0/i];function Md(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!1,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:1,correlationHeaderExcludedDomains:kd,correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"],addRequestContext:void 0,addIntEndpoints:!0}}function Ad(){var e=Md();return mn(e,function(t){e[t]=void 0}),e}var Dd=function(e){function t(){var n,r,i,a,o,u,c,s,l,f,d,p,v,g,m,h,y,w,x,b,I,C,T,S,_=e.call(this)||this;return _.identifier=t.identifier,_.priority=120,ne(t,_,function(e,_){var k=_._addHook;function E(){var _=dr();n=!1,r=!1,i=_&&_.host&&_.host[xf](),a=t.getEmptyConfig(),o=!1,u=!1,c=0,s=null,l=!1,f=!1,d=null,p=!1,v=0,g=!1,m={},h=!1,y=!1,w=null,x=null,b=null,C=0,T=[],S=[],I=ii("ajaxData"),e._ajaxDataId=I}function M(e){var t=!0;return(e||a.ignoreHeaders)&&Sn(a.ignoreHeaders,function(n){if(n[xf]()===e[xf]())return t=!1,-1}),t}function A(e,t,n){k(function(e,t,n){return e?Xa(e[oe],t,n,!1):null}(e,t,n))}function D(e,t,n){var r=!1,i=((bn(t)?t:(t||{}).url||"")||"")[xf]();if(Sn(w,function(e){var t=e;bn(e)&&(t=new RegExp(e)),r||(r=t.test(i))}),r)return r;var a=Cd(i,"?"),o=Cd(i,"#");return(-1===a||-1!==o&&o<a)&&(a=o),-1!==a&&(i=i.substring(0,a)),ln(e)?ln(t)||(r="object"==typeof t&&!0===t[Za]||!!n&&!0===n[Za]):r=!0===e[Za]||!0===i[Za],!r&&i&&yu(i)&&(r=!0),r?m[i]||(m[i]=1):m[i]&&(r=!0),r}function P(e,t,n){var i=!0,a=r;return ln(e)||(i=!0===n||!ln(t)),a&&i}function N(){var t=null;return e[sf]&&e[sf].getTraceCtx&&(t=e[sf].getTraceCtx(!1)),!t&&s&&s.telemetryTrace&&(t=Iu(s.telemetryTrace)),t}function R(e){try{var t=e.responseType;if(""===t||"text"===t)return e.responseText}catch(n){}return null}function L(t){try{var n=t[Kf]();if(null!==n)if(-1!==Cd(n[xf](),Oo[8])){var r=t.getResponseHeader(Oo[0]);return wu[$f](r)}}catch(i){bd(e,18,dd,{ajaxDiagnosticsMessage:wd(t,I),exception:yr(i)})}}function U(e,t){if(t[Jl]&&d&&p){var n=pr();if(n&&vn(n.mark)){gd++;var r=d+e+"#"+gd;n.mark(r);var i=n.getEntriesByName(r);i&&1===i[ef]&&(t[Xf]=i[0])}}}function j(e,t,n,r){var i=t[Xf],o=pr(),u=a.maxAjaxPerfLookupAttempts,c=a.ajaxPerfLookupDelay,s=t[Jl],l=0;!function a(){try{if(o&&i){l++;for(var f=null,d=o.getEntries(),p=d[ef]-1;p>=0;p--){var v=d[p];if(v){if("resource"===v.entryType)v.initiatorType!==e||-1===Cd(v[Wf],s)&&-1===Cd(s,v[Wf])||(f=v);else if("mark"===v.entryType&&v[Wf]===i[Wf]){t[Zf]=f;break}if(v[wf]<i[wf]-1e3)break}}}!i||t[Zf]||l>=u||!1===t.async?(i&&vn(o.clearMarks)&&o.clearMarks(i[Wf]),t.perfAttempts=l,n()):setTimeout(a,c)}catch(g){r(g)}}()}function z(t){var n="";try{ln(t)||(bn(t)?n+="(url: '".concat(t,"')"):n+="(url: '".concat(t.url,"')"))}catch(r){xd(e,15,"Failed to grab failed fetch diagnostics message",{exception:yr(r)})}return n}function V(t,n,r,i,a,u,c){function s(t,n,i){var a=i||{};a.fetchDiagnosticsMessage=z(r),n&&(a.exception=yr(n)),bd(e,t,vd+"fetch call"+fd,a)}a&&(a[Ff]=xu(),a[Af]=n,j(ud,a,function(){var t,c=a[Hf]("Fetch",o,u);try{x&&(t=x({status:n,request:r,response:i}))}catch(f){bd(e,104,pd)}if(c){void 0!==t&&(c[Yl]=ye(ye({},c.properties),t));var l=a[Gf]();q(S,e[sf],a,c,null,l)}else s(14,null,{requestSentTime:a[Lf],responseFinishedTime:a[Ff]})},function(e){s(18,e,null)}))}function O(t){if(t&&t[pf])try{var n=t[pf].get(Oo[0]);return wu[$f](n)}catch(r){bd(e,18,dd,{fetchDiagnosticsMessage:z(t),exception:yr(r)})}}function q(t,n,r,i,a,o){var u=!0;t[ef]>0&&(u=Sd(n,t,{item:i,properties:a,sysProperties:o,context:r?r[af]:null,aborted:!!r&&!!r[of]},"initializer"));u&&e[hf](i,a,o)}E(),e.initialize=function(i,c,m,C){var T;e.isInitialized()||(_.initialize(i,c,m,C),b=Zi(ii("ajax"),c&&c.evtNamespace&&c.evtNamespace()),function(n){var r=Ia(null,n,e[sf]);a=Ad(),mn(Md(),function(e,n){a[e]=r.getConfig(t.identifier,e,n)});var i=a[yf];if(o=a[bf],u=a[If],p=a[Cf],v=a[Tf],g=a[Sf],w=[].concat(a[_f]||[],!1!==a.addIntEndpoints?Ed:[]),x=a[kf],f=0===i||1===i,l=1===i||2===i,p){var c=n.instrumentationKey||"unkwn";d=c[ef]>5?id+c.substring(c[ef]-5)+".":id+c+"."}h=!!a[Ef],y=!!a[Mf]}(i),!function(e,t){var n,r=!1;if(Ir()){var i=XMLHttpRequest[oe];r=!(ln(i)||ln(i.open)||ln(i.send)||ln(i.abort))}var a=hr();if(a&&a<9&&(r=!1),r)try{var o=new XMLHttpRequest,u={xh:[],i:(n={},n[t]={},n)};o[od]=u;var c=XMLHttpRequest[oe].open;XMLHttpRequest[oe].open=c}catch(s){r=!1,xd(e,15,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:yr(s)})}return r}(e,I)||h||r||(A(XMLHttpRequest,"open",{ns:b,req:function(t,n,r,i){if(!h){var a=t[Ql],c=hd(a,I);!D(a,r)&&P(a,c,!0)&&(c&&c.xhrMonitoringState[Nf]||(c=function(t,n,r,i){var a,o=N(),c=o&&o[jf]()||ra(),s=ra().substr(0,16),l=t[od]=t[od]||{xh:[],i:{}},f=l.i=l.i||{},d=f[I]=f[I]||new rd(c,s,e[ad](),null===(a=e.core)||void 0===a?void 0:a.getTraceCtx());return d[rf]=o&&o[zf](),d[Vf]=n,d[Jl]=r,d.xhrMonitoringState[Nf]=!0,d[vf]={},d.async=i,d[Of]=u,d}(a,n,r,i)),function(t,n){n.xhrMonitoringState[qf]=Yi(t,"readystatechange",function(){try{t&&4===t.readyState&&P(t,n)&&function(t){var n=hd(t,I);function r(n,r){var i=r||{};i.ajaxDiagnosticsMessage=wd(t,I),n&&(i.exception=yr(n)),bd(e,14,vd+"ajax call"+fd,i)}n[Ff]=xu(),n[Af]=t[Af],j("xmlhttprequest",n,function(){try{var i=n[Hf]("Ajax",o,function(){var e={statusText:t[Df],headerMap:null,correlationContext:L(t),type:t.responseType,responseText:R(t),response:t[Bf]};if(g){var n=t[Kf]();if(n){var r=En(n).split(/[\r\n]+/),i={};Sn(r,function(e){var t=e.split(": "),n=t.shift(),r=t.join(": ");M(n)&&(i[n]=r)}),e[Pf]=i}}return e}),a=void 0;try{x&&(a=x({status:t[Af],xhr:t}))}catch(s){bd(e,104,pd)}if(i){void 0!==a&&(i[Yl]=ye(ye({},i.properties),a));var u=n[Gf]();q(S,e[sf],n,i,null,u)}else r(null,{requestSentTime:n[Lf],responseFinishedTime:n[Ff]})}finally{try{var c=(t[od]||{i:{}}).i||{};c[I]&&(c[I]=null)}catch(s){}}},function(e){r(e,null)})}(t)}catch(i){var r=yr(i);r&&-1!==Cd(r[xf](),"c00c023f")||xd(e,16,cd+" 'readystatechange' event handler"+ld,{ajaxDiagnosticsMessage:wd(t,I),exception:r})}},b)}(a,c))}},hkErr:Id(e,15,cd+".open"+ld)}),A(XMLHttpRequest,"send",{ns:b,req:function(t,n){if(!h){var r=t[Ql],i=hd(r,I);P(r,i)&&!i.xhrMonitoringState[Rf]&&(U("xhr",i),i[Lf]=xu(),e[lf](i,void 0,void 0,r),i.xhrMonitoringState[Rf]=!0)}},hkErr:Id(e,17,cd+ld)}),A(XMLHttpRequest,"abort",{ns:b,req:function(e){if(!h){var t=e[Ql],n=hd(t,I);P(t,n)&&!n.xhrMonitoringState[Uf]&&(n[of]=1,n.xhrMonitoringState[Uf]=!0)}},hkErr:Id(e,13,cd+".abort"+ld)}),A(XMLHttpRequest,"setRequestHeader",{ns:b,req:function(e,t,n){if(!h){var r=e[Ql],i=hd(r,I);i&&P(r,i)&&(function(e,t,n){if(e){var r=(e[od]||{}).xh;r&&r.push({n:t,v:n})}}(r,t,n),o&&M(t)&&i&&(i[vf][t]=n))}},hkErr:Id(e,71,cd+".setRequestHeader"+ld)}),r=!0),function(){var t=(i=ge(),!i||ln(i.Request)||ln(i.Request[oe])||ln(i[ud])?null:i[ud]);var i;if(!t)return;ge();var a=t.polyfill;y||n?a&&k(Xa(globalThis,ud,{ns:b,req:function(e,t,n){D(null,t,n)}})):(k(Xa(globalThis,ud,{ns:b,req:function(t,i,c){var s;if(!y&&n&&!D(null,i,c)&&(!a||!r)){var l=t.ctx();s=function(t,n){var r,i=N(),a=i&&i[jf]()||ra(),c=ra().substr(0,16),s=new rd(a,c,e[ad](),null===(r=e.core)||void 0===r?void 0:r.getTraceCtx());s[rf]=i&&i[zf](),s[Lf]=xu(),s[Of]=u,t instanceof Request?s[Jl]=t?t.url:"":s[Jl]=t;var l="GET";n&&n[Vf]?l=n[Vf]:t&&t instanceof Request&&(l=t[Vf]);s[Vf]=l;var f={};if(o){new Headers((n?n[pf]:0)||t instanceof Request&&t[pf]||{}).forEach(function(e,t){M(t)&&(f[t]=e)})}return s[vf]=f,U(ud,s),s}(i,c);var f=e[lf](s,i,c);f!==c&&t.set(1,f),l.data=s}},rsp:function(e,t){if(!y){var n=e.ctx().data;n&&(e.rslt=e.rslt.then(function(r){return V(e,(r||{})[Af],t,r,n,function(){var e={statusText:(r||{})[Df],headerMap:null,correlationContext:O(r)};if(g&&r){var t={};r.headers.forEach(function(e,n){M(n)&&(t[n]=e)}),e[Pf]=t}return e}),r}).catch(function(r){throw V(e,0,t,null,n,null,{error:r.message||yr(r)}),r}))}},hkErr:Id(e,15,"Failed to monitor Window.fetch"+ld)},!0,function(){if(null==md)try{md=!!(self&&self instanceof WorkerGlobalScope)}catch(e){md=!1}return md}())),n=!0);a&&(globalThis[ud].polyfill=a)}(),(T=e[sf].getPlugin(vc))&&(s=T.plugin[af]))},e._doTeardown=function(){E()},e.trackDependencyData=function(t,n){q(S,e[sf],null,t,n)},e[lf]=function(t,n,r,u){var c=e._currentWindowHost||i;if(function(e,t,n,r,i,a){if(e[ef]>0){var o={core:t,xhr:r,input:i,init:a,traceId:n[tf],spanId:n[nf],traceFlags:n[rf],context:n[af]||{},aborted:!!n[of]};Sd(t,e,o,"listener"),n[tf]=o[uf],n[nf]=o[cf],n[rf]=o[rf],n[af]=o[af]}}(T,e[sf],t,u,n,r),n||""===n){if(wu[ff](a,t[df](),c)){r||(r={});var d=new Headers(r[pf]||n instanceof Request&&n[pf]||{});if(f){var p="|"+t[tf]+"."+t[nf];d.set(Oo[3],p),o&&(t[vf][Oo[3]]=p)}if((g=a[gf]||s&&s[gf]())&&(d.set(Oo[0],Oo[2]+g),o&&(t[vf][Oo[0]]=Oo[2]+g)),l){ln(m=t[rf])&&(m=1);var v=da(sa(t[tf],t[nf],m));d.set(Oo[4],v),o&&(t[vf][Oo[4]]=v)}r[pf]=d}return r}if(u){if(wu[ff](a,t[df](),c)){if(f)if(yd(u,Oo[3]))bd(e,71,"Unable to set ["+Oo[3]+"] as it has already been set by another instance");else{p="|"+t[tf]+"."+t[nf];u[mf](Oo[3],p),o&&(t[vf][Oo[3]]=p)}var g,m;if((g=a[gf]||s&&s[gf]())&&(yd(u,Oo[0])?bd(e,71,"Unable to set ["+Oo[0]+"] as it has already been set by another instance"):(u[mf](Oo[0],Oo[2]+g),o&&(t[vf][Oo[0]]=Oo[2]+g))),l)if(ln(m=t[rf])&&(m=1),yd(u,Oo[4]))bd(e,71,"Unable to set ["+Oo[4]+"] as it has already been set by another instance");else{v=da(sa(t[tf],t[nf],m));u[mf](Oo[4],v),o&&(t[vf][Oo[4]]=v)}}return u}},e[hf]=function(t,n,r){if(-1===v||c<v){2!==a[yf]&&1!==a[yf]||"string"!=typeof t.id||"."===t.id[t.id[ef]-1]||(t.id+="."),ln(t[wf])&&(t[wf]=new Date);var i=oc(t,Ku.dataType,Ku.envelopeType,e[ad](),n,r);e[sf].track(i)}else c===v&&xd(e,55,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++c},e.addDependencyListener=function(e){return Td(T,C++,e)},e.addDependencyInitializer=function(e){return Td(S,C++,e)}}),_}return xe(t,e),t.prototype.processTelemetry=function(e,t){this.processNext(e,t)},t.prototype.addDependencyInitializer=function(e){return null},t.identifier="AjaxDependencyPlugin",t.getDefaultConfig=Md,t.getEmptyConfig=Ad,t}(Aa),Pd=function(){},Nd=function(){this.id="browser",this.deviceClass="Browser"},Rd="sessionManager",Ld="update",Ud="isUserCookieSet",jd="isNewUser",zd="getTraceCtx",Vd="telemetryTrace",Od="applySessionContext",qd="applyApplicationContext",Fd="applyDeviceContext",Hd="applyOperationContext",Bd="applyUserContext",Kd="applyOperatingSystemContxt",Gd="applyLocationContext",$d="applyInternalContext",Xd="accountId",Wd="sdkExtension",Zd="getSessionId",Yd="namePrefix",Jd="sessionCookiePostfix",Qd="userCookiePostfix",ep="idLength",tp="getNewId",np="length",rp="automaticSession",ip="authenticatedId",ap="sessionExpirationMs",op="sessionRenewalMs",up="config",cp="acquisitionDate",sp="renewalDate",lp="cookieDomain",fp="join",dp="cookieSeparator",pp="authUserCookieName",vp=function(e){this.sdkVersion=(e[Wd]&&e[Wd]()?e[Wd]()+"_":"")+"javascript:2.8.18"},gp=function(){},mp=function(){},hp=function(){function e(t,n){var r,i,a=Pr(n),o=Ii(n);ne(e,this,function(n){t||(t={}),vn(t[ap])||(t[ap]=function(){return e.acquisitionSpan}),vn(t[op])||(t[op]=function(){return e.renewalSpan}),n[up]=t;var u=n.config[Jd]&&n[up][Jd]()?n.config[Jd]():n.config[Yd]&&n[up][Yd]()?n[up][Yd]():"";function c(e,t){var n=!1,r=", session will be reset",i=t.split("|");if(i[np]>=2)try{var o=+i[1]||0,u=+i[2]||0;isNaN(o)||o<=0?Lr(a,2,27,"AI session acquisition date is 0"+r):isNaN(u)||u<=0?Lr(a,2,27,"AI session renewal date is 0"+r):i[0]&&(e.id=i[0],e[cp]=o,e[sp]=u,n=!0)}catch(c){Lr(a,1,9,"Error parsing ai_session value ["+(t||"")+"]"+r+" - "+Un(c),{exception:yr(c)})}return n}function s(e,t){var a=e[cp];e[sp]=t;var u=n[up],c=u[op](),s=a+u[ap]()-t,l=[e.id,a,t],f=0;f=s<c?s/1e3:c/1e3;var d=u[lp]?u[lp]():null;o.set(r(),l.join("|"),u[ap]()>0?f:null,d),i=t}r=function(){return"ai_session"+u},n[rp]=new mp,n[Ld]=function(){var t=Ln(),u=!1,l=n[rp];l.id||(u=!function(e){var t=!1,n=o.get(r());if(n&&vn(n.split))t=c(e,n);else{var i=function(e,t){var n=Go();if(null!==n)try{return n.getItem(t)}catch(r){Ho=!1,Lr(e,2,1,"Browser failed read of local storage. "+Un(r),{exception:yr(r)})}return null}(a,r());i&&(t=c(e,i))}return t||!!e.id}(l));var f=n.config[ap]();if(!u&&f>0){var d=n.config[op](),p=t-l[cp],v=t-l[sp];u=(u=(u=p<0||v<0)||p>f)||v>d}u?function(e){var t=n[up]||{},r=(t[tp]?t[tp]():null)||Yr;n.automaticSession.id=r(t[ep]?t[ep]():22),n[rp][cp]=e,s(n[rp],e),Zo()||Lr(a,2,0,"Browser does not support local storage. Session durations will be inaccurate.")}(t):(!i||t-i>e.cookieUpdateInterval)&&s(l,t)},n.backup=function(){var e,t,i,o=n[rp];e=o.id,t=o[cp],i=o[sp],function(e,t,n){var r=Go();if(null!==r)try{return r.setItem(t,n),!0}catch(i){Ho=!1,Lr(e,2,3,"Browser failed write to local storage. "+Un(i),{exception:yr(i)})}}(a,r(),[e,t,i][fp]("|"))}})}return e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e}(),yp=function(e,t,n,r){var i=this;i.traceID=e||ra(),i.parentID=t;var a=dr();!n&&a&&a.pathname&&(n=a.pathname),i.name=nu(r,n)};function wp(e){return!("string"!=typeof e||!e||e.match(/,|;|=| |\|/))}var xp=function(){function e(t,n){this.isNewUser=!1,this.isUserCookieSet=!1;var r,i=Pr(n),a=Ii(n);ne(e,this,function(n){n[up]=t;var o=n.config[Qd]&&n[up][Qd]()?n[up][Qd]():"";r=function(){return e.userCookieName+o};var u=a.get(r());if(u){n[jd]=!1;var c=u.split(e[dp]);c[np]>0&&(n.id=c[0],n[Ud]=!!n.id)}function s(){var e=t||{};return((e[tp]?e[tp]():null)||Yr)(e[ep]?t[ep]():22)}function l(e){var t=Tn(new Date);return n.accountAcquisitionDate=t,n[jd]=!0,[e,t]}function f(e){n[Ud]=a.set(r(),e,31536e3)}if(!n.id){n.id=s(),f(l(n.id)[fp](e[dp]));var d=t[Yd]&&t[Yd]()?t[Yd]()+"ai_session":"ai_session";!function(e,t){var n=Go();if(null!==n)try{return n[lo](t),!0}catch(r){Ho=!1,Lr(e,2,5,"Browser failed removal of local storage item. "+Un(r),{exception:yr(r)})}}(i,d)}n[Xd]=t[Xd]?t[Xd]():void 0;var p=a.get(e[pp]);if(p){var v=(p=decodeURI(p)).split(e[dp]);v[0]&&(n[ip]=v[0]),v[np]>1&&v[1]&&(n[Xd]=v[1])}n.setAuthenticatedUserContext=function(t,r,o){if(void 0===o&&(o=!1),!wp(t)||r&&!wp(r))Lr(i,2,60,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{n[ip]=t;var u=n[ip];r&&(n[Xd]=r,u=[n[ip],n.accountId][fp](e[dp])),o&&a.set(e[pp],encodeURI(u))}},n.clearAuthenticatedUserContext=function(){n[ip]=null,n[Xd]=null,a.del(e[pp])},n[Ld]=function(t){n.id===t&&n[Ud]||f(l(t||s())[fp](e[dp]))}})}return e.cookieSeparator="|",e.userCookieName="ai_user",e.authUserCookieName="ai_authUser",e}(),bp="ext",Ip="tags";
/**
* TelemetryContext.ts
* @copyright Microsoft 2018
*/function Cp(e,t){e&&e[t]&&0===Dn(e[t])[np]&&delete e[t]}var Tp=function(){function e(t,n,r){var i=this,a=t.logger;this.appId=function(){return null},this[Zd]=function(){return null},ne(e,this,function(e){if(e.application=new Pd,e.internal=new vp(n),ar()){e[Rd]=new hp(n,t),e.device=new Nd,e.location=new gp,e.user=new xp(n,t);var o,u=void 0,c=void 0;r&&(u=r.getTraceId(),c=r.getSpanId(),o=r.getName()),e[Vd]=new yp(u,c,o,a),e.session=new mp}e[Zd]=function(){var t=e.session,n=null;if(t&&bn(t.id))n=t.id;else{var r=(e[Rd]||{})[rp];n=r&&bn(r.id)?r.id:null}return n},e[Od]=function(t,n){jn(zn(t.ext,fc),"sesId",e[Zd](),bn)},e[Kd]=function(t,n){jn(t.ext,dc,e.os)},e[qd]=function(t,n){var r=e.application;if(r){var i=zn(t,Ip);jn(i,pc.applicationVersion,r.ver,bn),jn(i,pc.applicationBuild,r.build,bn)}},e[Fd]=function(t,n){var r=e.device;if(r){var i=zn(zn(t,bp),cc);jn(i,"localId",r.id,bn),jn(i,"ip",r.ip,bn),jn(i,"model",r.model,bn),jn(i,"deviceClass",r.deviceClass,bn)}},e[$d]=function(t,n){var r=e.internal;if(r){var i=zn(t,Ip);jn(i,pc.internalAgentVersion,r.agentVersion,bn),jn(i,pc.internalSdkVersion,nu(a,r.sdkVersion,64),bn),t.baseType!==Dr.dataType&&t.baseType!==Bu.dataType||(jn(i,pc.internalSnippet,r.snippetVer,bn),jn(i,pc.internalSdkSrc,r.sdkSrc,bn))}},e[Gd]=function(e,t){var n=i.location;n&&jn(zn(e,Ip,[]),pc.locationIp,n.ip,bn)},e[Hd]=function(t,n){var r=e[Vd];if(r){var i=zn(zn(t,bp),sc,{traceID:void 0,parentID:void 0});jn(i,"traceID",r.traceID,bn,ln),jn(i,"name",r.name,bn,ln),jn(i,"parentID",r.parentID,bn,ln)}},e.applyWebContext=function(e,t){var n=i.web;n&&jn(zn(e,bp),lc,n)},e[Bd]=function(t,n){var r=e.user;if(r){jn(zn(t,Ip,[]),pc.userAccountId,r[Xd],bn);var i=zn(zn(t,bp),uc);jn(i,"id",r.id,bn),jn(i,"authId",r[ip],bn)}},e.cleanUp=function(e,t){var n=e.ext;n&&(Cp(n,cc),Cp(n,uc),Cp(n,lc),Cp(n,dc),Cp(n,fc),Cp(n,sc))}})}return e.__ieDyn=1,e}(),Sp=function(e){function t(){var n,r,i,a=e.call(this)||this;return a.priority=110,a.identifier=vc,ne(t,a,function(e,a){function o(){n=null,r=null,i=null}o(),e.initialize=function(o,u,c,s){a.initialize(o,u,c,s),function(a){var o=e.identifier,u=e.core,c=Ia(null,a,u),s=t.getDefaultConfig();n=n||{},mn(s,function(e,t){n[e]=function(){return c.getConfig(o,e,t())}}),a.storagePrefix&&Wo(a.storagePrefix);i=u[zd](!1),e.context=new Tp(u,n,i),r=Iu(e.context[Vd],i),u.setTraceCtx(r),e.context.appId=function(){var e=u.getPlugin(gc);return e?e.plugin._appId:null},e._extConfig=n}(o)},e.processTelemetry=function(t,n){if(ln(t));else{n=e._getTelCtx(n),t.name===Bu.envelopeType&&n.diagLog().resetInternalMessageCount();var r=e.context||{};r.session&&"string"!=typeof e.context.session.id&&r[Rd]&&r[Rd][Ld]();var i=r.user;if(i&&!i[Ud]&&i[Ld](r.user.id),function(t,n){zn(t,"tags",[]),zn(t,"ext",{});var r=e.context;r[Od](t,n),r[qd](t,n),r[Fd](t,n),r[Hd](t,n),r[Bd](t,n),r[Kd](t,n),r.applyWebContext(t,n),r[Gd](t,n),r[$d](t,n),r.cleanUp(t,n)}(t,n),i&&i[jd]){i[jd]=!1;var a=new Dr(72,(lr()||{}).userAgent||"");!function(e,t,n){Rr(e)[lt](t,n)}(n.diagLog(),1,a)}e.processNext(t,n)}},e._doTeardown=function(e,t){var n=(e||{}).core();n&&n[zd]&&(n[zd](!1)===r&&n.setTraceCtx(i));o()}}),a}return xe(t,e),t.getDefaultConfig=function(){var e,t,n=null;return(e={instrumentationKey:function(){return t}})[Xd]=function(){return n},e.sessionRenewalMs=function(){return 18e5},e.samplingPercentage=function(){return 100},e.sessionExpirationMs=function(){return 864e5},e[lp]=function(){return n},e[Wd]=function(){return n},e.isBrowserLinkTrackingEnabled=function(){return!1},e.appId=function(){return n},e[Zd]=function(){return n},e[Yd]=function(){return t},e[Jd]=function(){return t},e[Qd]=function(){return t},e[ep]=function(){return 22},e[tp]=function(){return n},e},t}(Aa);
/**
* PropertiesPlugin.ts
* @copyright Microsoft 2018
*/const _p=Sp;var kp,Ep="AuthenticatedUserContext",Mp="track",Ap="snippet",Dp="flush",Pp="pollInternalLogs",Np="getPlugin",Rp="evtNamespace",Lp=Mp+"Event",Up=Mp+"Trace",jp=Mp+"Metric",zp=Mp+"PageView",Vp=Mp+"Exception",Op=Mp+"DependencyData",qp="set"+Ep,Fp="clear"+Ep,Hp="endpointUrl",Bp="diagnosticLogInterval",Kp="config",Gp="context",$p="push",Xp="version",Wp="queue",Zp="connectionString",Yp="instrumentationKey",Jp="appInsights",Qp="disableIkeyDeprecationMessage",ev="getTransmissionControls",tv="onunloadFlush",nv="addHousekeepingBeforeUnload",rv="indexOf",iv=[Ap,"dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],av=function(){function e(t){var n,r,i,a,o,u,c,s=this;ne(e,this,function(e){o=ii("AISKU"),u=null,n=null,r=null,i=null,a=null,a=""+(t.sv||t[Xp]||""),t[Wp]=t[Wp]||[],t[Xp]=t[Xp]||2;var l=t[Kp]||{};if(l[Zp]){var f=Cu(l[Zp]),d=f.ingestionendpoint;l[Hp]=d?d+to:l[Hp],l[Yp]=f.instrumentationkey||l[Yp]}e[Jp]=new Is,r=new _p,n=new Dd,i=new Wl,c=new qa,e.core=c;var p=!!ln(l[Qp])||l[Qp];l[Zp]||p||Lr(c.logger,1,106,"Instrumentation key support will end soon, see aka.ms/IkeyMigrate"),e[Ap]=t,e[Kp]=l,e.config[Bp]=e.config[Bp]&&e[Kp][Bp]>0?e[Kp][Bp]:1e4,e[Dp]=function(e){void 0===e&&(e=!0),Hr(c,function(){return"AISKU.flush"},function(){Sn(c[ev](),function(t){Sn(t,function(t){t[Dp](e)})})},null,e)},e[tv]=function(e){void 0===e&&(e=!0),Sn(c[ev](),function(t){Sn(t,function(t){t[tv]?t[tv]():t[Dp](e)})})},e.loadAppInsights=function(t,o,u){return void 0===t&&(t=!1),t&&e[Kp].extensions&&e[Kp].extensions.length>0&&qn("Extensions not allowed in legacy mode"),Hr(e.core,function(){return"AISKU.loadAppInsights"},function(){var s=[];s[$p](i),s[$p](r),s[$p](n),s[$p](e[Jp]),c.initialize(e[Kp],s,o,u),e[Gp]=r[Gp],kp&&e[Gp]&&(e[Gp].internal.sdkSrc=kp),function(n){if(n){var r="";ln(a)||(r+=a),t&&(r+=".lg"),e[Gp]&&e[Gp].internal&&(e[Gp].internal.snippetVer=r||"-"),mn(e,function(e,t){bn(e)&&!vn(t)&&e&&"_"!==e[0]&&-1===_n(iv,e)&&(n[e]=t)})}}(e[Ap]),e.emptyQueue(),e[Pp](),e[nv](e)}),e},e.updateSnippetDefinitions=function(t){!function(e,t,n){if(e&&t&&pn(e)&&pn(t)){var r=function(r){if(bn(r)){var i=t[r];vn(i)?n&&!n(r,!0,t,e)||(e[r]=Fn(t,r)):n&&!n(r,!1,t,e)||(dn(e,r)&&delete e[r],Pn(e,r,function(){return t[r]},function(e){t[r]=e})||(e[r]=i))}};for(var i in t)r(i)}}(t,e,function(e){return e&&-1===_n(iv,e)})},e.emptyQueue=function(){try{if(wn(e.snippet[Wp])){for(var t=e.snippet[Wp].length,n=0;n<t;n++){(0,e.snippet[Wp][n])()}e.snippet[Wp]=void 0,delete e.snippet[Wp]}}catch(r){r&&vn(r.toString)&&r.toString()}},e[nv]=function(e){if(ar()||ur()){var t=function(){if(e[tv](!1),vn(s.core[Np])){var t=s.core[Np](vc);if(t){var n=t.plugin;n&&n[Gp]&&n[Gp]._sessionManager&&n[Gp]._sessionManager.backup()}}},n=!1,r=e.appInsights[Kp].disablePageUnloadEvents;u||(u=Zi(o,c[Rp]&&c[Rp]())),e.appInsights.config.disableFlushOnBeforeUnload||(ta(t,r,u)&&(n=!0),na(t,r,u)&&(n=!0),n||(i=lr())&&i.product&&"ReactNative"===i.product||Lr(e[Jp].core.logger,1,19,"Could not add handler for beforeunload and pagehide")),n||e.appInsights.config.disableFlushOnUnload||na(t,r,u)}var i},e.getSender=function(){return i},e.unload=function(t,n,r){e[tv](t),u&&(ea([zi,ji,Ui],null,u),function(e,t){var n=Zi(Vi,t);ea([Ui],e,n),ea([Li],null,n)}(null,u)),c.unload&&c.unload(t,n,r)},Bn(e,e[Jp],["getCookieMgr",Lp,zp,"trackPageViewPerformance",Vp,"_onerror",Up,jp,"startTrackPage","stopTrackPage","startTrackEvent","stopTrackEvent"]),Bn(e,function(){return n},[Op,"addDependencyListener","addDependencyInitializer"]),Bn(e,c,["addTelemetryInitializer",Pp,"stopPollingInternalLogs",Np,"addPlugin",Rp,"addUnloadCb","getTraceCtx"]),Bn(e,function(){var e=r[Gp];return e?e.user:null},[qp,Fp])})}return e.prototype.addDependencyInitializer=function(e){return null},e}();!function(){var e=null,t=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var n=(document||{}).currentScript;n&&(e=n.src)}catch(o){}if(e)try{var r=e.toLowerCase();if(r)for(var i="",a=0;a<t.length;a++)if(-1!==r[rv](t[a])){i="cdn"+(a+1),-1===r[rv]("/scripts/")&&(-1!==r[rv]("/next/")?i+="-next":-1!==r[rv]("/beta/")&&(i+="-beta")),kp=i+"";break}}catch(o){}}();const ov=new(function(e){function t(){var n,r,i,a,o=e.call(this)||this;return o.priority=185,o.identifier="ReactPlugin",ne(t,o,function(t,u){function c(){n=null,r=null,i=null,a=null}function s(){return n||Lr(t.diagLog(),1,64,"Analytics plugin is not available, React plugin telemetry will not be sent: "),n}c(),t.initialize=function(u,c,s,l){if(e.prototype.initialize.call(o,u,c,s,l),r=u.extensionConfig&&u.extensionConfig[t.identifier]?u.extensionConfig[t.identifier]:{history:null},Sn(s,function(e){"ApplicationInsightsAnalytics"===e.identifier&&(n=e)}),r.history){!function(e){var n=function(e){var n=null;n="location"in e?e.location:e,a=setTimeout(function(){a=null;var e={uri:n.pathname};t.trackPageView(e)},500)};i=e.listen(n)}(r.history);var f={uri:r.history.location.pathname};t.trackPageView(f)}},t.getCookieMgr=function(){return Ii(t.core)},t.getAppInsights=s,t.processTelemetry=function(e,n){t.processNext(e,n)},t._doTeardown=function(e,t,n){vn(i)&&i(),a&&clearTimeout(a),c()},Bn(t,s,["trackMetric","trackPageView","trackEvent","trackException","trackTrace"]),Pn(t,"_extensionConfig",function(){return r})}),o}return xe(t,e),t.__ieDyn=1,t}(Aa)),uv=new av({config:{instrumentationKey:{}.VITE_AZURE_APP_INSIGHTS_KEY||"",enableAutoRouteTracking:!0,enableCorsCorrelation:!0,enableRequestHeaderTracking:!0,enableResponseHeaderTracking:!0,disableFetchTracking:!1,extensions:[ov]}}),cv={}.VITE_AZURE_MAPS_KEY||"",sv={}.VITE_AZURE_MAPS_KEY_EMERGENCY||"",lv={}.VITE_AZURE_COGNITIVE_ENDPOINT||"",fv={}.VITE_AZURE_COGNITIVE_KEY||"",dv={}.VITE_AZURE_STORAGE_ACCOUNT||"",pv={}.VITE_AZURE_FUNCTIONS_URL||"";const vv=new class{initialized=!1;textAnalyticsClient=null;anomalyDetectorClient=null;async initialize(){if(!this.initialized)try{if({}.VITE_AZURE_APP_INSIGHTS_KEY&&(uv.loadAppInsights(),uv.trackPageView()),lv&&fv)try{const e=new p(fv);this.textAnalyticsClient=new l(lv,e),this.anomalyDetectorClient=new d(lv,e)}catch(e){}this.initialized=!0}catch(e){throw e}}getAppInsights(){return uv}getAzureMapsKey(){return cv||sv}getBlobServiceClient(){return null}getQueueServiceClient(){return null}getTextAnalyticsClient(){return this.textAnalyticsClient}getAnomalyDetectorClient(){return this.anomalyDetectorClient}getComputerVisionClient(){return null}getFunctionsUrl(){return pv}getStorageAccountName(){return dv}getConfigStatus(){return{appInsights:!!{}.VITE_AZURE_APP_INSIGHTS_KEY,azureMaps:!!cv,cognitiveServices:!(!lv||!fv),storage:!!dv,functions:!!pv,initialized:this.initialized}}},gv=n.createContext(void 0),mv=({children:t})=>{const[r,i]=n.useState(null),[a,o]=n.useState([]),[u,c]=n.useState([]),[l,f]=n.useState(!0),[d,p]=n.useState(null),[v,g]=n.useState({lat:40.4168,lon:-3.7038}),[m,h]=n.useState(x.getServiceStatus()),y=async()=>{f(!0),p(null);try{const e=vv.getAzureMapsKey();e&&!m.configured&&(x.configure(e),h(x.getServiceStatus()));const[t,n,r]=await Promise.all([x.getCurrentWeather(v.lat,v.lon),x.getForecast(v.lat,v.lon),x.getHourlyData(v.lat,v.lon)]);i(t),o(n),c(r)}catch(e){p(e instanceof Error?e.message:"Error al obtener datos meteorológicos")}finally{f(!1)}};return n.useEffect(()=>{y();const e=setInterval(y,9e5);return()=>clearInterval(e)},[v]),e.jsx(gv.Provider,{value:{currentWeather:r,forecast:a,hourlyData:u,loading:l,error:d,refreshWeather:y,setLocation:(e,t)=>{g({lat:e,lon:t})},configureAzureMaps:e=>{x.configure(e),s.configure(e),h(x.getServiceStatus()),y()},serviceStatus:m},children:t})};const hv=new class{textAnalyticsClient=null;anomalyDetectorClient=null;isConfigured=!1;constructor(){this.initialize()}async initialize(){try{if(this.textAnalyticsClient=vv.getTextAnalyticsClient(),this.anomalyDetectorClient=vv.getAnomalyDetectorClient(),!this.textAnalyticsClient&&{}.VITE_AZURE_COGNITIVE_ENDPOINT&&{}.VITE_AZURE_COGNITIVE_KEY){const e=new f({}.VITE_AZURE_COGNITIVE_KEY);this.textAnalyticsClient=new l({}.VITE_AZURE_COGNITIVE_ENDPOINT,e)}if(!this.anomalyDetectorClient&&{}.VITE_AZURE_COGNITIVE_ENDPOINT&&{}.VITE_AZURE_COGNITIVE_KEY){const e=new f({}.VITE_AZURE_COGNITIVE_KEY);this.anomalyDetectorClient=new d({}.VITE_AZURE_COGNITIVE_ENDPOINT,e)}this.isConfigured=!(!this.textAnalyticsClient&&!this.anomalyDetectorClient),this.isConfigured}catch(e){}}async analyzeText(e,t="es"){if(!this.textAnalyticsClient)return null;try{const[n,r,i,a]=await Promise.all([this.textAnalyticsClient.analyzeSentiment([{id:"1",text:e,language:t}]),this.textAnalyticsClient.recognizeEntities([{id:"1",text:e,language:t}]),this.textAnalyticsClient.extractKeyPhrases([{id:"1",text:e,language:t}]),this.textAnalyticsClient.detectLanguage([e])]),o=n[0],u=r[0],c=i[0],s=a[0];if(o.error||u.error||c.error||s.error)throw new Error("Error in text analysis");return{sentiment:{score:o.confidenceScores.positive,label:"mixed"===o.sentiment?"neutral":o.sentiment,confidence:Math.max(o.confidenceScores.positive,o.confidenceScores.negative,o.confidenceScores.neutral)},entities:u.entities.map(e=>({text:e.text,category:e.category,subCategory:e.subCategory,confidence:e.confidenceScore})),keyPhrases:c.keyPhrases,language:s.primaryLanguage.iso6391Name}}catch(n){return null}}async analyzeImage(e){return null}async detectAnomalies(e,t=95){if(!this.anomalyDetectorClient)return null;try{const n={series:e.map(e=>({timestamp:e.timestamp,value:e.value})),granularity:"hourly",maxAnomalyRatio:.25,sensitivity:t},r=await this.anomalyDetectorClient.detectEntireSeriesAnomaly(n);return r.isAnomaly&&r.expectedValues&&r.upperMargins&&r.lowerMargins?r.isAnomaly.map((e,t)=>({isAnomaly:e,severity:e?100*Math.random():0,score:e?1:0,expectedValue:r.expectedValues[t],boundaryUnits:1,upperBoundary:r.expectedValues[t]+r.upperMargins[t],lowerBoundary:r.expectedValues[t]-r.lowerMargins[t]})):null}catch(n){return null}}async assessFireRisk(e,t,n){try{const r=`\n        Evaluación de riesgo de incendio:\n        Temperatura: ${e.temperature}°C\n        Humedad: ${e.humidity}%\n        Velocidad del viento: ${e.windSpeed} km/h\n        Índice de vegetación (NDVI): ${t?.ndvi||.5}\n        Sequedad de vegetación: ${t?.dryness||.5}\n        Incendios históricos en la zona: ${n?.length||0}\n      `,i=(await this.analyzeText(r),Math.min(40,Math.max(0,2*(e.temperature-15)))),a=Math.min(30,Math.max(0,.75*(60-e.humidity))),o=Math.min(30,Math.max(0,1.5*e.windSpeed)),u=Math.min(25,Math.max(0,25*(1-(t?.ndvi||.5)))),c=Math.min(25,25*(t?.dryness||.5)),s=Math.min(10,2*(n?.length||0)),l=i+a+o+u+c+s;let f;f=l>=85?"extreme":l>=65?"high":l>=45?"medium":"low";const d=this.generateFireRiskRecommendations(f,e);return{riskScore:Math.min(100,l),riskLevel:f,confidence:.85,factors:{temperature:i,humidity:a,windSpeed:o,vegetation:u,dryness:c,historical:s},recommendations:d}}catch(r){return this.fallbackFireRiskAssessment(e)}}generateFireRiskRecommendations(e,t){const n=[];switch(e){case"extreme":n.push("🚨 ACTIVAR PROTOCOLO DE EMERGENCIA NIVEL 4 - Riesgo extremo de incendio"),n.push("🚫 Prohibir todas las actividades que puedan generar ignición"),n.push("🚒 Desplegar recursos preventivos en zonas de alto riesgo"),n.push("📡 Activar centros de comando de emergencia"),n.push("🏃 Preparar evacuaciones preventivas en zonas vulnerables");break;case"high":n.push("⚠️ ACTIVAR PROTOCOLO DE EMERGENCIA NIVEL 3 - Riesgo alto de incendio"),n.push("🚧 Restringir acceso a zonas forestales"),n.push("👮 Aumentar patrullaje preventivo"),n.push("🚒 Preparar recursos de extinción");break;case"medium":n.push("📊 ACTIVAR PROTOCOLO DE EMERGENCIA NIVEL 2 - Riesgo moderado"),n.push("👁️ Mantener vigilancia aumentada"),n.push("✅ Verificar disponibilidad de recursos");break;case"low":n.push("📋 Mantener protocolos estándar de prevención")}return t.temperature>35&&n.push("🌡️ Temperatura crítica: Evitar trabajos al aire libre durante horas pico"),t.humidity<20&&n.push("💧 Humedad crítica: Riesgo extremo de ignición y propagación rápida"),t.windSpeed>25&&(n.push("💨 Vientos fuertes: Riesgo de propagación errática y salto de fuego"),n.push("🚁 Considerar suspensión de operaciones aéreas de extinción")),n}fallbackFireRiskAssessment(e){const{temperature:t,humidity:n,windSpeed:r}=e;let i,a=0;return t>35?a+=40:t>30?a+=30:t>25?a+=20:t>20&&(a+=10),n<20?a+=30:n<30?a+=25:n<40?a+=20:n<50?a+=15:n<60&&(a+=10),r>25?a+=30:r>20?a+=25:r>15?a+=20:r>10?a+=15:r>5&&(a+=10),i=a>=80?"extreme":a>=60?"high":a>=40?"medium":"low",{riskScore:a,riskLevel:i,confidence:.7,factors:{temperature:Math.min(40,t>35?40:t>30?30:t>25?20:10),humidity:n<20?30:n<30?25:n<40?20:15,windSpeed:r>25?30:r>20?25:r>15?20:15,vegetation:0,dryness:0,historical:0},recommendations:this.generateFireRiskRecommendations(i,{temperature:t,humidity:n,windSpeed:r})}}getServiceStatus(){return{configured:this.isConfigured,textAnalytics:!!this.textAnalyticsClient,computerVision:!1,anomalyDetector:!!this.anomalyDetectorClient,provider:"Microsoft Azure Cognitive Services"}}},yv=n.createContext(void 0),wv=({children:t})=>{const[r,i]=n.useState(hv.getServiceStatus());n.useEffect(()=>{const e=setInterval(()=>{i(hv.getServiceStatus())},3e4);return()=>clearInterval(e)},[]);const a={isConfigured:r.configured,assessFireRisk:hv.assessFireRisk.bind(hv),analyzeText:hv.analyzeText.bind(hv),analyzeImage:hv.analyzeImage.bind(hv),detectAnomalies:hv.detectAnomalies.bind(hv),serviceStatus:r};return e.jsx(yv.Provider,{value:a,children:t})},xv=r.lazy(()=>c(()=>import("../js/WelcomeScreen-4c802193.js"),["js/WelcomeScreen-4c802193.js","js/tactical-components-ecb51026.js","js/ui-vendor-b7f86872.js","js/react-vendor-e58626de.js","js/map-vendor-95ccbafd.js"])),bv=r.lazy(()=>c(()=>import("../js/ZoneConfiguration-65f1d62a.js"),["js/ZoneConfiguration-65f1d62a.js","js/tactical-components-ecb51026.js","js/ui-vendor-b7f86872.js","js/react-vendor-e58626de.js","js/map-vendor-95ccbafd.js","assets/ZoneConfiguration-ba550af6.css","assets/leaflet-4d8e306f.css"])),Iv=r.lazy(()=>c(()=>import("../js/EmergencyDashboard-6904e265.js"),["js/EmergencyDashboard-6904e265.js","js/tactical-components-ecb51026.js","js/ui-vendor-b7f86872.js","js/react-vendor-e58626de.js","js/map-vendor-95ccbafd.js","js/chart-vendor-bdde4f4f.js","assets/leaflet-4d8e306f.css"])),Cv=r.lazy(()=>c(()=>import("../js/BiodiversityAnalysis-f8bbaa32.js"),["js/BiodiversityAnalysis-f8bbaa32.js","js/tactical-components-ecb51026.js","js/ui-vendor-b7f86872.js","js/react-vendor-e58626de.js","js/map-vendor-95ccbafd.js","js/geo-vendor-30c39c1d.js","js/emergency-services-9499df0c.js"])),Tv=()=>e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"}),e.jsx("p",{className:"text-gray-600",children:"Cargando..."})]})});function Sv(){const[t,r]=n.useState(null),[u,c]=n.useState([]),[s,l]=n.useState("welcome");n.useEffect(()=>{uv.trackPageView({name:`Step: ${s}`})},[s]);return e.jsx(wv,{children:e.jsx(h,{children:e.jsx(mv,{children:e.jsx(w,{children:e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx(n.Suspense,{fallback:e.jsx(Tv,{}),children:e.jsxs(i,{children:[e.jsx(a,{path:"/",element:"welcome"===s?e.jsx(xv,{onSetup:e=>{r(e),l("zone-config"),uv.trackEvent({name:"OrganizationConfigured",properties:{type:e.type}})}}):"zone-config"===s?e.jsx(bv,{organization:t,onZonesConfigured:e=>{c(e),l("dashboard"),uv.trackEvent({name:"ZonesConfigured",properties:{count:e.length}})}}):e.jsx(Iv,{organization:t,monitoringZones:u})}),e.jsx(a,{path:"/biodiversity",element:e.jsx(Cv,{})}),e.jsx(a,{path:"*",element:e.jsx(o,{to:"/",replace:!0})})]})})})})})})})}(async()=>{try{await vv.initialize()}catch(t){}v.createRoot(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(u,{children:e.jsx(Sv,{})})}))})();export{uv as a,vv as b};
