import{j as e}from"../js/tactical-components-ecb51026.js";import{a as t,r as n,R as r,b as i,d as a,N as o,B as u}from"../js/react-vendor-e58626de.js";import{_ as c}from"../js/geo-vendor-30c39c1d.js";import{a as s}from"../js/emergency-services-9499df0c.js";import{TextAnalyticsClient as l}from"@azure/ai-text-analytics";import{AnomalyDetectorClient as f}from"@azure/ai-anomaly-detector";import{AzureKeyCredential as d}from"@azure/core-auth";import"../js/ui-vendor-b7f86872.js";import"../js/map-vendor-95ccbafd.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var p={},v=t;p.createRoot=v.createRoot,p.hydrateRoot=v.hydrateRoot;const g=n.createContext(void 0),m=({children:t})=>{const[r,i]=n.useState(!1),[a,o]=n.useState("low");return e.jsx(g.Provider,{value:{isEmergencyActive:r,setEmergencyActive:i,emergencyLevel:a,setEmergencyLevel:o},children:t})},h=n.createContext(void 0),y=({children:t})=>{const[r,i]=n.useState([]),a=e=>{const t={...e,id:Date.now().toString(),timestamp:(new Date).toISOString(),read:!1};i(e=>[t,...e])};return n.useEffect(()=>{i([{id:"1",title:"Riesgo Extremo de Incendio",message:"Condiciones meteorológicas extremas detectadas. Temperatura alta, baja humedad y vientos fuertes.",severity:"extreme",status:"active",location:"Parque Nacional de Doñana",timestamp:new Date(Date.now()-72e5).toISOString(),read:!1},{id:"2",title:"Alerta de Viento Fuerte",message:"Vientos superiores a 25 km/h detectados. Riesgo de propagación rápida de incendios.",severity:"high",status:"active",location:"Sierra de Guadarrama",timestamp:new Date(Date.now()-144e5).toISOString(),read:!1},{id:"3",title:"Temperatura Elevada",message:"Temperatura superior a 35°C registrada. Aumento del riesgo de ignición.",severity:"medium",status:"active",location:"Costa Brava",timestamp:new Date(Date.now()-216e5).toISOString(),read:!0},{id:"4",title:"Condiciones Normalizadas",message:"Las condiciones meteorológicas han vuelto a la normalidad. Riesgo reducido.",severity:"low",status:"resolved",location:"Picos de Europa",timestamp:new Date(Date.now()-432e5).toISOString(),read:!0},{id:"5",title:"Sequía Prolongada",message:"Período de sequía de más de 15 días. Vegetación seca aumenta el riesgo.",severity:"high",status:"active",location:"Andalucía Oriental",timestamp:new Date(Date.now()-864e5).toISOString(),read:!0}]);const e=setInterval(()=>{if(Math.random()<.3){const e=["low","medium","high","extreme"],t=["Madrid Centro","Barcelona","Valencia","Sevilla","Bilbao"],n=["Nueva Alerta Meteorológica","Cambio en Condiciones de Riesgo","Actualización de Pronóstico","Alerta de Temperatura"];a({title:n[Math.floor(Math.random()*n.length)],message:"Condiciones meteorológicas actualizadas detectadas por Azure Cognitive Services.",severity:e[Math.floor(Math.random()*e.length)],status:"active",location:t[Math.floor(Math.random()*t.length)]})}},3e4);return()=>clearInterval(e)},[]),e.jsx(h.Provider,{value:{alerts:r,addAlert:a,markAsRead:e=>{i(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},dismissAlert:e=>{i(t=>t.map(t=>t.id===e?{...t,status:"resolved"}:t))}},children:t})};const w=new class{config={subscriptionKey:"",baseUrl:"https://atlas.microsoft.com/weather"};configure(e){this.config.subscriptionKey=e}async getCurrentWeather(e=40.4168,t=-3.7038){try{if(!this.config.subscriptionKey)return this.getFallbackWeather(e,t);const n=new URLSearchParams({"api-version":"1.0",query:`${e},${t}`,"subscription-key":this.config.subscriptionKey,language:"es-ES",details:"true"}),r=await fetch(`${this.config.baseUrl}/currentConditions/json?${n}`);if(!r.ok)throw new Error(`Azure Maps Weather API error: ${r.status}`);const i=await r.json();if(!i.results||0===i.results.length)throw new Error("No weather data returned from Azure Maps");const a=i.results[0];return{temperature:Math.round(a.temperature.value),feelsLike:Math.round(a.realFeelTemperature.value),humidity:a.relativeHumidity,pressure:Math.round(a.pressure.value),windSpeed:Math.round(a.wind.speed.value),windDirection:a.wind.direction.degrees,visibility:Math.round(a.visibility.value),cloudCover:a.cloudCover,dewPoint:Math.round(a.dewPoint.value),description:a.phrase,timestamp:(new Date).toISOString(),uvIndex:a.uvIndex,windGust:Math.round(a.windGust?.speed?.value||1.3*a.wind.speed.value),precipitationProbability:0}}catch(n){return this.getFallbackWeather(e,t)}}async getForecast(e=40.4168,t=-3.7038){try{if(!this.config.subscriptionKey)return this.getFallbackForecast(e,t);const n=new URLSearchParams({"api-version":"1.0",query:`${e},${t}`,"subscription-key":this.config.subscriptionKey,language:"es-ES",duration:"5"}),r=await fetch(`${this.config.baseUrl}/forecast/daily/json?${n}`);if(!r.ok)throw new Error(`Azure Maps Forecast API error: ${r.status}`);return(await r.json()).forecasts.map(e=>({date:new Date(e.date).toISOString(),maxTemp:Math.round(e.temperature.maximum.value),minTemp:Math.round(e.temperature.minimum.value),humidity:50,windSpeed:Math.round(e.day.wind.speed.value),description:e.day.shortPhrase,precipitationProbability:e.day.precipitationProbability,thunderstormProbability:e.day.thunderstormProbability,windGust:Math.round(e.day.windGust?.speed?.value||1.3*e.day.wind.speed.value),uvIndex:5}))}catch(n){return this.getFallbackForecast(e,t)}}async getHourlyData(e=40.4168,t=-3.7038){try{if(!this.config.subscriptionKey)return this.getFallbackHourlyData(e,t);const n=new URLSearchParams({"api-version":"1.0",query:`${e},${t}`,"subscription-key":this.config.subscriptionKey,language:"es-ES",duration:"24"}),r=await fetch(`${this.config.baseUrl}/forecast/hourly/json?${n}`);if(!r.ok)throw new Error(`Azure Maps Hourly API error: ${r.status}`);return(await r.json()).forecasts.map(e=>({time:new Date(e.date).getHours().toString().padStart(2,"0")+":00",temperature:Math.round(e.temperature.value),humidity:e.relativeHumidity,windSpeed:Math.round(e.wind.speed.value),pressure:1013,precipitationProbability:e.precipitationProbability,cloudCover:e.cloudCover,uvIndex:e.uvIndex,windGust:Math.round(e.windGust?.speed?.value||1.3*e.wind.speed.value)}))}catch(n){return this.getFallbackHourlyData(e,t)}}async getSevereWeatherAlerts(e,t){try{if(!this.config.subscriptionKey)return[];const n=new URLSearchParams({"api-version":"1.0",query:`${e},${t}`,"subscription-key":this.config.subscriptionKey,language:"es-ES"}),r=await fetch(`${this.config.baseUrl}/severe/alerts/json?${n}`);if(!r.ok)return[];const i=await r.json();return i.results?.map(e=>({id:e.alertId,title:e.description.localized,description:e.description.english,severity:e.severity.toLowerCase(),urgency:e.urgency.toLowerCase(),certainty:e.certainty.toLowerCase(),startTime:e.startTime,endTime:e.endTime,areas:e.areas?.map(e=>e.name)||[]}))||[]}catch(n){return[]}}async getAirQuality(e,t){try{if(!this.config.subscriptionKey)return null;const n=new URLSearchParams({"api-version":"1.0",query:`${e},${t}`,"subscription-key":this.config.subscriptionKey,language:"es-ES"}),r=await fetch(`${this.config.baseUrl}/airQuality/current/json?${n}`);if(!r.ok)return null;const i=await r.json();if(!i.results||0===i.results.length)return null;const a=i.results[0];return{index:a.globalIndex,category:a.category,pollutants:a.pollutants?.map(e=>({name:e.name,value:e.concentration.value,unit:e.concentration.unit,category:e.category}))||[]}}catch(n){return null}}async getFallbackWeather(e=40.4168,t=-3.7038){try{const n=new URLSearchParams({latitude:e.toString(),longitude:t.toString(),current_weather:"true",hourly:"temperature_2m,relativehumidity_2m,windspeed_10m,surface_pressure,visibility,cloudcover",timezone:"auto",forecast_days:"1"}),r=await fetch(`https://api.open-meteo.com/v1/forecast?${n}`);if(!r.ok)throw new Error(`Open-Meteo API error: ${r.status}`);const i=await r.json(),a=i.current_weather,o=i.hourly,u=(new Date).getHours(),c=Math.min(u,o.time.length-1),s=o.relativehumidity_2m[c]||50,l=o.surface_pressure[c]||1013,f=o.visibility[c]||1e4,d=o.cloudcover[c]||0,p=this.calculateDewPoint(a.temperature,s),v=this.calculateFeelsLike(a.temperature,s,a.windspeed);return{temperature:Math.round(a.temperature),feelsLike:v,humidity:Math.round(s),pressure:Math.round(l),windSpeed:Math.round(a.windspeed),windDirection:Math.round(a.winddirection),visibility:Math.round(f/1e3),cloudCover:Math.round(d),dewPoint:Math.round(p),description:"Datos de Open-Meteo",timestamp:(new Date).toISOString(),uvIndex:5,windGust:Math.round(1.3*a.windspeed),precipitationProbability:0}}catch(n){return{temperature:25,feelsLike:26,humidity:50,pressure:1013,windSpeed:10,windDirection:180,visibility:10,cloudCover:30,dewPoint:15,description:"Datos predeterminados",timestamp:(new Date).toISOString(),uvIndex:5,windGust:13,precipitationProbability:0}}}async getFallbackForecast(e=40.4168,t=-3.7038){try{const n=new URLSearchParams({latitude:e.toString(),longitude:t.toString(),daily:"temperature_2m_max,temperature_2m_min,windspeed_10m_max,relative_humidity_2m_max,weathercode",timezone:"auto",forecast_days:"7"}),r=await fetch(`https://api.open-meteo.com/v1/forecast?${n}`);if(!r.ok)throw new Error(`Open-Meteo Forecast API error: ${r.status}`);const i=(await r.json()).daily;return i.time.map((e,t)=>({date:new Date(e).toISOString(),maxTemp:Math.round(i.temperature_2m_max[t]),minTemp:Math.round(i.temperature_2m_min[t]),humidity:Math.round(i.relative_humidity_2m_max[t]),windSpeed:Math.round(i.windspeed_10m_max[t]),description:"Pronóstico Open-Meteo",precipitationProbability:0,thunderstormProbability:0,windGust:Math.round(1.3*i.windspeed_10m_max[t]),uvIndex:5}))}catch(n){return Array(5).fill(null).map((e,t)=>{const n=new Date;return n.setDate(n.getDate()+t),{date:n.toISOString(),maxTemp:25+t,minTemp:15+t,humidity:50,windSpeed:10,description:"Pronóstico predeterminado",precipitationProbability:0,thunderstormProbability:0,windGust:13,uvIndex:5}})}}async getFallbackHourlyData(e=40.4168,t=-3.7038){try{const n=new URLSearchParams({latitude:e.toString(),longitude:t.toString(),hourly:"temperature_2m,relativehumidity_2m,windspeed_10m,surface_pressure",timezone:"auto",forecast_days:"1"}),r=await fetch(`https://api.open-meteo.com/v1/forecast?${n}`);if(!r.ok)throw new Error(`Open-Meteo Hourly API error: ${r.status}`);const i=(await r.json()).hourly;return i.time.map((e,t)=>({time:new Date(e).getHours().toString().padStart(2,"0")+":00",temperature:Math.round(i.temperature_2m[t]),humidity:Math.round(i.relativehumidity_2m[t]),windSpeed:Math.round(i.windspeed_10m[t]),pressure:Math.round(i.surface_pressure[t]),precipitationProbability:0,cloudCover:0,uvIndex:5,windGust:Math.round(1.3*i.windspeed_10m[t])}))}catch(n){return Array(24).fill(null).map((e,t)=>({time:t.toString().padStart(2,"0")+":00",temperature:20+5*Math.sin(t/12*Math.PI),humidity:50,windSpeed:10,pressure:1013,precipitationProbability:0,cloudCover:0,uvIndex:5,windGust:13}))}}calculateDewPoint(e,t){const n=17.27*e/(237.7+e)+Math.log(t/100);return 237.7*n/(17.27-n)}calculateFeelsLike(e,t,n){if(e>=26){const n=1.61139411*e-8.78469475556+2.33854883889*t+-.14611605*e*t+-.012308094*e*e+-.0164248277778*t*t+.002211732*e*e*t+72546e-8*e*t*t+-3582e-9*e*e*t*t;return Math.round(n)}if(e<=10&&n>4.8){const t=e,r=n,i=13.12+.6215*t-11.37*Math.pow(r,.16)+.3965*t*Math.pow(r,.16);return Math.round(i)}return e}getServiceStatus(){return{provider:"Azure Maps Weather Services (Microsoft + AccuWeather)",configured:!!this.config.subscriptionKey,capabilities:["Current Weather Conditions","Multi-day Forecasts","Hourly Forecasts","Severe Weather Alerts","Air Quality Index","UV Index","Wind Gust Data","Precipitation Probability","Professional AccuWeather Data"],fallbackAvailable:!0}}};
/*!
 * Microsoft Dynamic Proto Utility, 1.1.11
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var x,b="undefined",I="constructor",C="prototype",T="function",S="_dynInstFuncs",_="_isDynProxy",k="_dynClass",E="_dynInstChk",M=E,A="_dfOpts",D="_unknown_",P="__proto__",N="_dyn"+P,R="__dynProto$Gbl",L="_dynInstProto",U="useBaseInst",j="setInstFuncs",z=Object,V=z.getPrototypeOf,O=z.getOwnPropertyNames;var q,F=(typeof globalThis!==b&&(q=globalThis),q||typeof self===b||(q=self),q||typeof window===b||(q=window),q||typeof globalThis===b||(q=globalThis),q||{}),H=F[R]||(F[R]={o:(x={},x[j]=!0,x[U]=!0,x),n:1e3});function B(e,t){return e&&z[C].hasOwnProperty.call(e,t)}function K(e){return e&&(e===z[C]||e===Array[C])}function G(e){return K(e)||e===Function[C]}function $(e){var t;if(e){if(V)return V(e);var n=e[P]||e[C]||(e[I]?e[I][C]:null);t=e[N]||n,B(e,N)||(delete e[L],t=e[N]=e[L]||e[N],e[L]=n)}return t}function X(e,t){var n=[];if(O)n=O(e);else for(var r in e)"string"==typeof r&&B(e,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function W(e,t,n){return t!==I&&typeof e[t]===T&&(n||B(e,t))&&t!==P&&t!==C}function Z(e){throw new TypeError("DynamicProto: "+e)}function Y(){return Object.create?(e=null,(t=Object.create)?t(e):{}):{};var e,t}function J(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function Q(e,t,n,r,i){function a(e,t){var n=function(){var r=function(e,t,n,r){var i=null;if(e&&B(n,k)){var a=e[S]||Y();if((i=(a[n[k]]||Y())[t])||Z("Missing ["+t+"] "+T),!i[E]&&!1!==a[M]){for(var o=!B(e,t),u=$(e),c=[];o&&u&&!G(u)&&!J(c,u);){var s=u[t];if(s){o=s===r;break}c.push(u),u=$(u)}try{o&&(e[t]=i),i[E]=1}catch(l){a[M]=!1}}}return i}(this,t,e,n)||function(e,t,n){var r=t[e];return r===n&&(r=$(t)[e]),typeof r!==T&&Z("["+e+"] is not a "+T),r}(t,e,n);return r.apply(this,arguments)};return n[_]=1,n}if(!K(e)){var o=n[S]=n[S]||Y();if(!K(o)){var u=o[t]=o[t]||Y();!1!==o[M]&&(o[M]=!!i),K(u)||X(n,function(t){W(n,t,!1)&&n[t]!==r[t]&&(u[t]=n[t],delete n[t],(!B(e,t)||e[t]&&!e[t][_])&&(e[t]=a(e,t)))})}}}function ee(e,t){return B(e,C)?e.name||t||D:((e||{})[I]||{}).name||t||D}function te(e,t,n,r){B(e,C)||Z("theClass is an invalid class definition.");var i=e[C];(function(e,t){if(V){for(var n=[],r=$(t);r&&!G(r)&&!J(n,r);){if(r===e)return!0;n.push(r),r=$(r)}return!1}return!0})(i,t)||Z("["+ee(e)+"] not in hierarchy of ["+ee(t)+"]");var a=null;B(i,k)?a=i[k]:(a="_dynCls$"+ee(e,"_")+"$"+H.n,H.n++,i[k]=a);var o=te[A],u=!!o[U];u&&r&&void 0!==r[U]&&(u=!!r[U]);var c=function(e){var t=Y();return X(e,function(n){!t[n]&&W(e,n,!1)&&(t[n]=e[n])}),t}(t),s=function(e,t,n,r){function i(e,t,n){var i=t[n];if(i[_]&&r){var a=e[S]||{};!1!==a[M]&&(i=(a[t[k]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var a=Y();X(n,function(e){a[e]=i(t,n,e)});for(var o=$(e),u=[];o&&!G(o)&&!J(u,o);)X(o,function(e){!a[e]&&W(o,e,!V)&&(a[e]=i(t,o,e))}),u.push(o),o=$(o);return a}(i,t,c,u);n(t,s);var l=!!V&&!!o[j];l&&r&&(l=!!r[j]),Q(i,a,t,c,!1!==l)}te[A]=H.o;var ne="function",re="object",ie="undefined",ae="prototype",oe="hasOwnProperty",ue=Object,ce=ue[ae],se=ue.assign,le=ue.create,fe=ue.defineProperty,de=ce[oe],pe=null;function ve(e){void 0===e&&(e=!0);var t=!1===e?null:pe;return t||(typeof globalThis!==ie&&(t=globalThis),t||typeof self===ie||(t=self),t||typeof window===ie||(t=window),t||typeof globalThis===ie||(t=globalThis),pe=t),t}function ge(e){throw new TypeError(e)}function me(e){if(le)return le(e);if(null==e)return{};var t=typeof e;function n(){}return t!==re&&t!==ne&&ge("Object prototype may only be an Object:"+e),n[ae]=e,new n}(ve()||{}).Symbol,(ve()||{}).Reflect;var he=se||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])ce[oe].call(t,i)&&(e[i]=t[i]);return e},ye=function(e,t){return ye=ue.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[oe](n)&&(e[n]=t[n])},ye(e,t)};function we(e,t){function n(){this.constructor=e}typeof t!==ne&&null!==t&&ge("Class extends value "+String(t)+" is not a constructor or null"),ye(e,t),e[ae]=null===t?me(t):(n[ae]=t[ae],new n)}function xe(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}var be="initialize",Ie="name",Ce="getNotifyMgr",Te="identifier",Se="push",_e="isInitialized",ke="config",Ee="instrumentationKey",Me="logger",Ae="length",De="time",Pe="processNext",Ne="getProcessTelContext",Re="addNotificationListener",Le="removeNotificationListener",Ue="stopPollingInternalLogs",je="onComplete",ze="getPlugin",Ve="flush",Oe="_extensions",qe="splice",Fe="teardown",He="messageId",Be="message",Ke="isAsync",Ge="_doTeardown",$e="update",Xe="getNext",We="diagLog",Ze="setNextPlugin",Ye="createNew",Je="cookieCfg",Qe="indexOf",et="substring",tt="userAgent",nt="split",rt="setEnabled",it="substr",at="nodeType",ot="apply",ut="replace",ct="enableDebugExceptions",st="logInternalMessage",lt="toLowerCase",ft="call",dt="type",pt="handler",vt="listeners",gt="isChildEvt",mt="getCtx",ht="setCtx",yt="complete",wt="traceId",xt="spanId",bt="traceFlags",It="version",Ct="",Tt="channels",St="core",_t="createPerfMgr",kt="disabled",Et="extensionConfig",Mt="processTelemetry",At="priority",Dt="eventsSent",Pt="eventsDiscarded",Nt="eventsSendRequest",Rt="perfEvent",Lt="errorToConsole",Ut="warnToConsole",jt="getPerfMgr",zt="toISOString",Vt="endsWith",Ot="indexOf",qt="reduce",Ft="trim",Ht="toString",Bt="constructor",Kt=fe,Gt=ue.freeze,$t=ue.keys,Xt=String[ae],Wt=Xt[Ft],Zt=Xt[Vt],Yt=Date[ae][zt],Jt=Array.isArray,Qt=ce[Ht],en=de[Ht],tn=en[ft](ue),nn=/-([a-z])/g,rn=/([^\w\d_$])/g,an=/^(\d+[\w\d_$])/,on=Object.getPrototypeOf;function un(e){if(e){if(on)return on(e);var t=e.__proto__||e[ae]||e[Bt];if(t)return t}return null}function cn(e){return void 0===e||typeof e===ie}function sn(e){return null===e||cn(e)}function ln(e){return!sn(e)}function fn(e,t){return!(!e||!de[ft](e,t))}function dn(e){return!(!e||typeof e!==re)}function pn(e){return!(!e||typeof e!==ne)}function vn(e){var t=e;return t&&xn(t)&&(t=(t=(t=t[ut](nn,function(e,t){return t.toUpperCase()}))[ut](rn,"_"))[ut](an,function(e,t){return"_"+t})),t}function gn(e,t){if(e)for(var n in e)de[ft](e,n)&&t[ft](e,n,e[n])}function mn(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=Zt?e[Vt](t):function(e,t){var n=!1,r=t?t[Ae]:0,i=e?e[Ae]:0;if(r&&i&&i>=r&&!(n=e===t)){for(var a=i-1,o=r-1;o>=0;o--){if(e[a]!=t[o])return!1;a--}n=!0}return n}(e,t)),n}function hn(e,t){return!(!e||!t)&&-1!==e[Qe](t)}var yn=Jt||function(e){return!(!e||"[object Array]"!==Qt[ft](e))};function wn(e){return!(!e||"[object Error]"!==Qt[ft](e))}function xn(e){return"string"==typeof e}function bn(e){return"number"==typeof e}function In(e){var t=!1;if(e&&"object"==typeof e){var n=on?on(e):un(e);n?(n[Bt]&&de[ft](n,Bt)&&(n=n[Bt]),t=typeof n===ne&&en[ft](n)===tn):t=!0}return t}function Cn(e){if(e)return Yt?e[zt]():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t[Ae]&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function Tn(e,t,n){var r=e[Ae];try{for(var i=0;i<r&&(!(i in e)||-1!==t[ft](n||e,e[i],i,e));i++);}catch(a){}}function Sn(e,t,n){if(e){if(e[Ot])return e[Ot](t,n);var r=e[Ae],i=n||0;try{for(var a=Math.max(i>=0?i:r-Math.abs(i),0);a<r;a++)if(a in e&&e[a]===t)return a}catch(o){}}return-1}function _n(e,t,n){var r;if(e){if(e.map)return e.map(t,n);var i=e[Ae],a=n||e;r=new Array(i);try{for(var o=0;o<i;o++)o in e&&(r[o]=t[ft](a,e[o],e))}catch(u){}}return r}function kn(e){return e&&(e=Wt&&e[Ft]?e[Ft]():e[ut]?e[ut](/^\s+|(?=\s)\s+$/g,Ct):e),e}var En=!{toString:null}.propertyIsEnumerable("toString"),Mn=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function An(e){var t=typeof e;if(t===ne||t===re&&null!==e||ge("objKeys called on non-object"),!En&&$t)return $t(e);var n=[];for(var r in e)e&&de[ft](e,r)&&n[Se](r);if(En)for(var i=Mn[Ae],a=0;a<i;a++)e&&de[ft](e,Mn[a])&&n[Se](Mn[a]);return n}function Dn(e,t,n,r){if(Kt)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),Kt(e,t,i),!0}catch(a){}return!1}function Pn(e){return Gt&&gn(e,function(e,t){(yn(t)||dn(t))&&Gt(t)}),Nn(e)}var Nn=Gt||function(e){return e};function Rn(){var e=Date;return e.now?e.now():(new e).getTime()}function Ln(e){return wn(e)?e[Ie]:Ct}function Un(e,t,n,r,i){var a=n;return e&&((a=e[t])===n||i&&!i(a)||r&&!r(n)||(a=n,e[t]=a)),a}function jn(e,t,n){var r;return e?!(r=e[t])&&sn(r)&&(r=cn(n)?{}:n,e[t]=r):r=cn(n)?{}:n,r}function zn(e,t){return sn(e)?t:e}function Vn(e){return!!e}function On(e){throw new Error(e)}function qn(e,t){var n=null,r=null;return pn(e)?n=e:r=e,function(){var e=arguments;if(n&&(r=n()),r)return r[t][ot](r,e)}}function Fn(e,t,n,r,i){e&&t&&n&&(!1!==i||cn(e[t]))&&(e[t]=qn(n,r))}function Hn(e,t,n,r){return e&&t&&dn(e)&&yn(n)&&Tn(n,function(n){xn(n)&&Fn(e,n,t,n,r)}),e}function Bn(e){return e&&se&&(e=ue(se({},e))),e}function Kn(e,t,n,r,i,a){var o=arguments,u=o[0]||{},c=o[Ae],s=!1,l=1;for(c>0&&"boolean"==typeof u&&(s=u,u=o[l]||{},l++),dn(u)||(u={});l<c;l++){var f=o[l],d=yn(f),p=dn(f);for(var v in f){if(d&&v in f||p&&de[ft](f,v)){var g=f[v],m=void 0;if(s&&g&&((m=yn(g))||In(g))){var h=u[v];m?yn(h)||(h=[]):In(h)||(h={}),g=Kn(s,h,g)}void 0!==g&&(u[v]=g)}}}return u}function Gn(e){var t={};return gn(e,function(e,n){t[e]=n,t[n]=e}),Pn(t)}var $n="window",Xn="JSON",Wn="msie",Zn="trident/",Yn="XMLHttpRequest",Jn=null,Qn=null,er=null,tr=null;function nr(e,t){var n=!1;if(e){try{if(!(n=t in e)){var r=e[ae];r&&(n=t in r)}}catch(i){}if(!n)try{n=!cn((new e)[t])}catch(i){}}return n}function rr(e){var t=ve();return t&&t[e]?t[e]:e===$n&&ir()?window:null}function ir(){return Boolean(typeof window===re&&window)}function ar(){return ir()?window:rr($n)}function or(){return Boolean(typeof document===re&&document)}function ur(){return or()?document:rr("document")}function cr(){return Boolean(typeof navigator===re&&navigator)}function sr(){return cr()?navigator:rr("navigator")}function lr(){return Boolean(typeof history===re&&history)}function fr(e){return typeof location===re&&location?location:rr("location")}function dr(){return rr("performance")}function pr(){return Boolean(typeof JSON===re&&JSON||null!==rr(Xn))}function vr(){return pr()?JSON||rr(Xn):null}function gr(){var e=sr();if(e&&(e[tt]!==Qn||null===Jn)){var t=((Qn=e[tt])||Ct)[lt]();Jn=hn(t,Wn)||hn(t,Zn)}return Jn}function mr(e){if(void 0===e&&(e=null),!e){var t=sr()||{};e=t?(t[tt]||Ct)[lt]():Ct}var n=(e||Ct)[lt]();if(hn(n,Wn)){var r=ur()||{};return Math.max(parseInt(n[nt](Wn)[1]),r.documentMode||0)}if(hn(n,Zn)){var i=parseInt(n[nt](Zn)[1]);if(i)return i+4}return null}function hr(e){var t=Object[ae].toString[ft](e),n=Ct;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[Ie]+"'":pr()&&(n=vr().stringify(e)),t+n}function yr(){return null===tr&&(tr=cr()&&Boolean(sr().sendBeacon)),tr}function wr(e){var t=!1;try{t=!!rr("fetch");var n=rr("Request");t&&e&&n&&(t=nr(n,"keepalive"))}catch(r){}return t}function xr(){return null===er&&(er=typeof XDomainRequest!==ie)&&br()&&(er=er&&!nr(rr(Yn),"withCredentials")),er}function br(){var e=!1;try{e=!!rr(Yn)}catch(t){}return e}var Ir,Cr=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],Tr=null;function Sr(e,t){return function(){var n=arguments,r=_r(t);if(r){var i=r.listener;i&&i[e]&&i[e][ot](i,n)}}}function _r(e){var t,n=Tr;return n||!0===e.disableDbgExt||(n=Tr||((t=rr("Microsoft"))&&(Tr=t.ApplicationInsights),Tr)),n?n.ChromeDbgExt:null}function kr(e){if(!Ir){Ir={};for(var t=0;t<Cr[Ae];t++)Ir[Cr[t]]=Sr(Cr[t],e)}return Ir}function Er(e){return e?'"'+e[ut](/\"/g,Ct)+'"':Ct}function Mr(e,t){var n=typeof console!==ie?console:rr("console");if(n){var r="log";n[e]&&(r=e),pn(n[r])&&n[r](t)}}var Ar=function(){function e(e,t,n,r){void 0===n&&(n=!1);var i=this;i[He]=e,i[Be]=(n?"AI: ":"AI (Internal): ")+e;var a=Ct;pr()&&(a=vr().stringify(r));var o=(t?" message:"+Er(t):Ct)+(r?" props:"+Er(a):Ct);i[Be]+=o}return e.dataType="MessageData",e}();function Dr(e,t){return(e||{})[Me]||new Pr(t)}var Pr=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,r,i,a,o=0,u={};te(e,this,function(e){function c(t,n){if(!(o>=i)){var a=!0,c="AITR_"+n[He];if(u[c]?a=!1:u[c]=!0,a&&(t<=r&&(e.queue[Se](n),o++,s(1===t?"error":"warn",n)),o===i)){var l="Internal events throttle limit per PageView reached for this app.",f=new Ar(23,l,!1);e.queue[Se](f),1===t?e[Lt](l):e[Ut](l)}}}function s(e,n){var r=_r(t||{});r&&r[We]&&r[We](e,n)}!function(e){n=zn(e.loggingLevelConsole,0),r=zn(e.loggingLevelTelemetry,1),i=zn(e.maxMessageLimit,25),a=zn(e.enableDebug,zn(e[ct],!1))}(t||{}),e.consoleLoggingLevel=function(){return n},e.telemetryLoggingLevel=function(){return r},e.maxInternalMessageLimit=function(){return i},e[ct]=function(){return a},e.throwInternal=function(t,r,i,o,l){void 0===l&&(l=!1);var f=new Ar(r,i,l,o);if(a)throw hr(f);var d=1===t?Lt:Ut;if(cn(f[Be]))s("throw"+(1===t?"Critical":"Warning"),f);else{if(l){var p=+f[He];!u[p]&&n>=t&&(e[d](f[Be]),u[p]=!0)}else n>=t&&e[d](f[Be]);c(t,f)}},e[Ut]=function(e){Mr("warn",e),s("warning",e)},e[Lt]=function(e){Mr("error",e),s("error",e)},e.resetInternalMessageCount=function(){o=0,u={}},e[st]=c})}return e.__ieDyn=1,e}();function Nr(e){return e||new Pr}function Rr(e,t,n,r,i,a){void 0===a&&(a=!1),Nr(e).throwInternal(t,n,r,i,a)}function Lr(e,t){Nr(e)[Ut](t)}var Ur="ctx",jr="ParentContextKey",zr="ChildrenContextKey",Vr=function(){function e(t,n,r){var i,a=this,o=!1;(a.start=Rn(),a[Ie]=t,a[Ke]=r,a[gt]=function(){return!1},pn(n))&&(o=Dn(a,"payload",function(){return!i&&pn(n)&&(i=n(),n=null),i}));a[mt]=function(t){return t?t===e[jr]||t===e[zr]?a[t]:(a[Ur]||{})[t]:null},a[ht]=function(t,n){if(t)if(t===e[jr])a[t]||(a[gt]=function(){return!0}),a[t]=n;else if(t===e[zr])a[t]=n;else{(a[Ur]=a[Ur]||{})[t]=n}},a[yt]=function(){var t=0,r=a[mt](e[zr]);if(yn(r))for(var i=0;i<r[Ae];i++){var u=r[i];u&&(t+=u[De])}a[De]=Rn()-a.start,a.exTime=a[De]-t,a[yt]=function(){},!o&&pn(n)&&(a.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),Or=function(){function e(t){this.ctx={},te(e,this,function(e){e.create=function(e,t,n){return new Vr(e,t,n)},e.fire=function(e){e&&(e[yt](),t&&pn(t[Rt])&&t[Rt](e))},e[ht]=function(t,n){t&&((e[Ur]=e[Ur]||{})[t]=n)},e[mt]=function(t){return(e[Ur]||{})[t]}})}return e.__ieDyn=1,e}(),qr="CoreUtils.doPerf";function Fr(e,t,n,r,i){if(e){var a=e;if(a[jt]&&(a=a[jt]()),a){var o=void 0,u=a[mt](qr);try{if(o=a.create(t(),r,i)){if(u&&o[ht]&&(o[ht](Vr[jr],u),u[mt]&&u[ht])){var c=u[mt](Vr[zr]);c||(c=[],u[ht](Vr[zr],c)),c[Se](o)}return a[ht](qr,o),n(o)}}catch(s){o&&o[ht]&&o[ht]("exception",s)}finally{o&&a.fire(o),a[ht](qr,u)}}}return n()}var Hr=4294967296,Br=4294967295,Kr=!1,Gr=123456789,$r=987654321;function Xr(){try{var e=2147483647&Rn();(t=(Math.random()*Hr^e)+e)<0&&(t>>>=0),Gr=123456789+t&Br,$r=987654321-t&Br,Kr=!0}catch(n){}var t}function Wr(e){var t=0,n=rr("crypto")||rr("msCrypto");return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&Br),0===t&&gr()&&(Kr||Xr(),t=function(e){var t=(($r=36969*(65535&$r)+($r>>16)&Br)<<16)+(65535&(Gr=18e3*(65535&Gr)+(Gr>>16)&Br))>>>0&Br;e||(t>>>=0);return t}()&Br),0===t&&(t=Math.floor(Hr*Math.random()|0)),e||(t>>>=0),t}function Zr(e){void 0===e&&(e=22);for(var t=Wr()>>>0,n=0,r=Ct;r[Ae]<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(Wr()<<2&4294967295|3&t)>>>0,n=0);return r}var Yr=fe,Jr="2.8.18",Qr="."+Zr(6),ei=0;function ti(e){return 1===e[at]||9===e[at]||!+e[at]}function ni(e,t){var n=t[e.id];if(!n){n={};try{ti(t)&&(function(e,t,n){if(Yr)try{return Yr(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch(r){}return!1}(t,e.id,n)||(t[e.id]=n))}catch(r){}}return n}function ri(e,t){return void 0===t&&(t=!1),vn(e+ei+++(t?"."+Jr:Ct)+Qr)}function ii(e){var t={id:ri("_aiData-"+(e||Ct)+"."+Jr),accept:function(e){return ti(e)},get:function(e,n,r,i){var a=e[t.id];return a?a[vn(n)]:(i&&((a=ni(t,e))[vn(n)]=r),r)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(n){}}};return t}var ai="toGMTString",oi="toUTCString",ui="cookie",ci="expires",si="enabled",li="isCookieUseDisabled",fi="disableCookiesUsage",di="_ckMgr",pi=null,vi=null,gi=null,mi=ur(),hi={},yi={};function wi(e){return!e||e.isEnabled()}function xi(e,t){return!!(t&&e&&yn(e.ignoreCookies))&&-1!==e.ignoreCookies[Qe](t)}function bi(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t[Je];n=r[di]?r[di]:Ii(t)}return n||(n=function(e,t){var n=Ii[di]||yi[di];return n||(n=Ii[di]=Ii(e,t),yi[di]=n),n}(t,(e||{})[Me])),n}function Ii(e,t){var n,r=function(e){var t=e[Je]=e[Je]||{};if(Un(t,"domain",e.cookieDomain,ln,sn),Un(t,"path",e.cookiePath||"/",null,sn),sn(t[si])){var n=void 0;cn(e[li])||(n=!e[li]),cn(e[fi])||(n=!e[fi]),t[si]=n}return t}(e||yi),i=r.path||"/",a=r.domain,o=!1!==r[si],u=((n={isEnabled:function(){var e=o&&Ci(t),n=yi[di];return e&&n&&u!==n&&(e=wi(n)),e}})[rt]=function(e){o=!1!==e},n.set=function(e,t,n,o,c){var s=!1;if(wi(u)&&!function(e,t){return!!(t&&e&&yn(e.blockedCookies)&&-1!==e.blockedCookies[Qe](t))||xi(e,t)}(r,e)){var l={},f=kn(t||Ct),d=f[Qe](";");if(-1!==d&&(f=kn(t[et](0,d)),l=Ti(t[et](d+1))),Un(l,"domain",o||a,Vn,cn),!sn(n)){var p=gr();if(cn(l[ci])){var v=Rn()+1e3*n;if(v>0){var g=new Date;g.setTime(v),Un(l,ci,Si(g,p?ai:oi)||Si(g,p?ai:oi)||Ct,Vn)}}p||Un(l,"max-age",Ct+n,null,cn)}var m=fr();m&&"https:"===m.protocol&&(Un(l,"secure",null,null,cn),null===vi&&(vi=!function(e){if(!xn(e))return!1;if(hn(e,"CPU iPhone OS 12")||hn(e,"iPad; CPU OS 12"))return!0;if(hn(e,"Macintosh; Intel Mac OS X 10_14")&&hn(e,"Version/")&&hn(e,"Safari"))return!0;if(hn(e,"Macintosh; Intel Mac OS X 10_14")&&mn(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))return!0;if(hn(e,"Chrome/5")||hn(e,"Chrome/6"))return!0;if(hn(e,"UnrealEngine")&&!hn(e,"Chrome"))return!0;if(hn(e,"UCBrowser/12")||hn(e,"UCBrowser/11"))return!0;return!1}((sr()||{})[tt])),vi&&Un(l,"SameSite","None",null,cn)),Un(l,"path",c||i,null,cn),(r.setCookie||Ei)(e,_i(f,l)),s=!0}return s},n.get=function(e){var t=Ct;return wi(u)&&!xi(r,e)&&(t=(r.getCookie||ki)(e)),t},n.del=function(e,t){var n=!1;return wi(u)&&(n=u.purge(e,t)),n},n.purge=function(e,n){var i,a=!1;if(Ci(t)){var o=((i={}).path=n||"/",i[ci]="Thu, 01 Jan 1970 00:00:01 GMT",i);gr()||(o["max-age"]="0"),(r.delCookie||Ei)(e,_i(Ct,o)),a=!0}return a},n);return u[di]=u,u}function Ci(e){if(null===pi){pi=!1;try{pi=void 0!==(mi||{})[ui]}catch(t){Rr(e,2,68,"Cannot access document.cookie - "+Ln(t),{exception:hr(t)})}}return pi}function Ti(e){var t={};e&&e[Ae]&&Tn(kn(e)[nt](";"),function(e){if(e=kn(e||Ct)){var n=e[Qe]("=");-1===n?t[e]=null:t[kn(e[et](0,n))]=kn(e[et](n+1))}});return t}function Si(e,t){return pn(e[t])?e[t]():null}function _i(e,t){var n=e||Ct;return gn(t,function(e,t){n+="; "+e+(sn(t)?Ct:"="+t)}),n}function ki(e){var t=Ct;if(mi){var n=mi[ui]||Ct;gi!==n&&(hi=Ti(n),gi=n),t=kn(hi[e]||Ct)}return t}function Ei(e,t){mi&&(mi[ui]=e+"="+t)}var Mi="attachEvent",Ai="addEventListener",Di="detachEvent",Pi="removeEventListener",Ni="events",Ri="visibilitychange",Li="pagehide",Ui="unload",ji="beforeunload",zi=ri("aiEvtPageHide");ri("aiEvtPageShow");var Vi=/\.[\.]+/g,Oi=/[\.]+$/,qi=1,Fi=ii("events"),Hi=/^([^.]*)(?:\.(.+)|)/;function Bi(e){return e&&e[ut]?e[ut](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Ct):e}function Ki(e,t){var n;if(t){var r=Ct;yn(t)?(r=Ct,Tn(t,function(e){(e=Bi(e))&&("."!==e[0]&&(e="."+e),r+=e)})):r=Bi(t),r&&("."!==r[0]&&(r="."+r),e=(e||Ct)+r)}var i=Hi.exec(e||Ct)||[];return(n={})[dt]=i[1],n.ns=(i[2]||Ct).replace(Vi,".").replace(Oi,Ct)[nt](".").sort().join("."),n}function Gi(e,t,n){void 0===n&&(n=!0);var r=Fi.get(e,Ni,{},n),i=r[t];return i||(i=r[t]=[]),i}function $i(e,t,n,r){e&&t&&t[dt]&&(e[Pi]?e[Pi](t[dt],n,r):e[Di]&&e[Di]("on"+t[dt],n))}function Xi(e,t,n,r){for(var i=t[Ae];i--;){var a=t[i];a&&(n.ns&&n.ns!==a.evtName.ns||r&&!r(a)||($i(e,a.evtName,a[pt],a.capture),t[qe](i,1)))}}function Wi(e,t){return t?Ki("xx",yn(t)?[e].concat(t):[e,t]).ns[nt]("."):e}function Zi(e,t,n,r,i){var a;void 0===i&&(i=!1);var o=!1;if(e)try{var u=Ki(t,r);if(o=function(e,t,n,r){var i=!1;return e&&t&&t[dt]&&n&&(e[Ai]?(e[Ai](t[dt],n,r),i=!0):e[Mi]&&(e[Mi]("on"+t[dt],n),i=!0)),i}(e,u,n,i),o&&Fi.accept(e)){var c=((a={guid:qi++,evtName:u})[pt]=n,a.capture=i,a);Gi(e,u.type)[Se](c)}}catch(s){}return o}function Yi(e,t,n,r,i){if(void 0===i&&(i=!1),e)try{var a=Ki(t,r),o=!1;!function(e,t,n){if(t[dt])Xi(e,Gi(e,t[dt]),t,n);else{var r=Fi.get(e,Ni,{});gn(r,function(r,i){Xi(e,i,t,n)}),0===An(r)[Ae]&&Fi.kill(e,Ni)}}(e,a,function(e){return!((!a.ns||n)&&e[pt]!==n)&&(o=!0,!0)}),o||$i(e,a,n,i)}catch(u){}}function Ji(e,t,n,r){var i=!1;return t&&e&&e[Ae]>0&&Tn(e,function(e){e&&(n&&-1!==Sn(n,e)||(i=function(e,t,n){var r=!1,i=ar();i&&(r=Zi(i,e,t,n),r=Zi(i.body,e,t,n)||r);var a=ur();return a&&(r=Zi(a,e,t,n)||r),r}(e,t,r)||i))}),i}function Qi(e,t,n){e&&yn(e)&&Tn(e,function(e){e&&function(e,t,n){var r=ar();r&&(Yi(r,e,t,n),Yi(r.body,e,t,n));var i=ur();i&&Yi(i,e,t,n)}(e,t,n)})}function ea(e,t,n){return function(e,t,n,r){var i=!1;return t&&e&&yn(e)&&!(i=Ji(e,t,n,r))&&n&&n[Ae]>0&&(i=Ji(e,t,null,r)),i}([ji,Ui,Li],e,t,n)}function ta(e,t,n){var r=Wi(zi,n),i=Ji([Li],e,t,r);return t&&-1!==Sn(t,Ri)||(i=Ji([Ri],function(t){var n=ur();e&&n&&"hidden"===n.visibilityState&&e(t)},t,r)||i),!i&&t&&(i=ta(e,null,n)),i}function na(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=Ct,r=0;r<4;r++)n+=t[15&(e=Wr())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&Wr())|0];return n[it](0,8)+n[it](9,4)+"4"+n[it](13,3)+i+n[it](16,3)+n[it](19,12)}var ra="00",ia="00000000000000000000000000000000",aa="0000000000000000";function oa(e,t,n){return!(!e||e[Ae]!==t||e===n)&&!!e.match(/^[\da-f]*$/i)}function ua(e,t,n){return oa(e,t)?e:n}function ca(e,t,n,r){var i;return(i={})[It]=oa(r,2,"ff")?r:ra,i[wt]=sa(e)?e:na(),i.spanId=la(t)?t:na()[it](0,16),i.traceFlags=n>=0&&n<=255?n:1,i}function sa(e){return oa(e,32,ia)}function la(e){return oa(e,16,aa)}function fa(e){if(e){var t=function(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[Ae]<2;)t="0"+t;return t}(e[bt]);oa(t,2)||(t="01");var n=e[It]||ra;return"00"!==n&&"ff"!==n&&(n=ra),"".concat(n.toLowerCase(),"-").concat(ua(e.traceId,32,ia).toLowerCase(),"-").concat(ua(e.spanId,16,aa).toLowerCase(),"-").concat(t.toLowerCase())}return""}var da=ii("plugin");function pa(e){return da.get(e,"state",{},!0)}function va(e,t){for(var n,r=[],i=null,a=e[Xe]();a;){var o=a[ze]();if(o){i&&pn(i[Ze])&&pn(o[Mt])&&i[Ze](o);(pn(o[_e])?o[_e]():(n=pa(o))[_e])||r[Se](o),i=o,a=a[Xe]()}}Tn(r,function(r){var i=e[St]();r[be](e.getCfg(),i,t,e[Xe]()),n=pa(r),r[St]||n[St]||(n[St]=i),n[_e]=!0,delete n[Fe]})}function ga(e){return e.sort(function(e,t){var n=0;if(t){var r=pn(t[Mt]);pn(e[Mt])?n=r?e[At]-t[At]:1:r&&(n=-1)}else n=e?1:-1;return n})}var ma="TelemetryPluginChain",ha="_hasRun",ya="_getTelCtx",wa=0;function xa(e,t,n,r){var i=null,a=[];null!==r&&(i=r?function(e,t,n){for(;e;){if(e[ze]()===n)return e;e=e[Xe]()}return Ta([n],t[ke]||{},t)}(e,n,r):e);var o={_next:function(){var e=i;if(i=e?e[Xe]():null,!e){var t=a;t&&t[Ae]>0&&(Tn(t,function(e){try{e.func[ft](e.self,e.args)}catch(t){Rr(n[Me],2,73,"Unexpected Exception during onComplete - "+hr(t))}}),a=[])}return e},ctx:{core:function(){return n},diagLog:function(){return Dr(n,t)},getCfg:function(){return t},getExtCfg:u,getConfig:function(e,n,r){void 0===r&&(r=!1);var i,a=u(e,null);a&&!sn(a[n])?i=a[n]:t&&!sn(t[n])&&(i=t[n]);return sn(i)?r:i},hasNext:function(){return!!i},getNext:function(){return i},setNext:function(e){i=e},iterate:function(e){var t;for(;t=o._next();){var n=t[ze]();n&&e(n)}},onComplete:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e&&a[Se]({func:e,self:cn(t)?o.ctx:t,args:n})}}};function u(e,n,r){var i;if(void 0===n&&(n={}),void 0===r&&(r=0),t){var a=t[Et];a&&e&&(i=a[e])}if(i){if(dn(n)&&0!==r){var o=Kn(!0,n,i);t&&2===r&&gn(n,function(e){if(sn(o[e])){var n=t[e];sn(n)||(o[e]=n)}}),i=o}}else i=n;return i}return o}function ba(e,t,n,r){var i=xa(e,t,n,r),a=i.ctx;return a[Pe]=function(e){var t=i._next();return t&&t[Mt](e,a),!t},a[Ye]=function(e,r){return void 0===e&&(e=null),yn(e)&&(e=Ta(e,t,n,r)),ba(e||a[Xe](),t,n,r)},a}function Ia(e,t,n){var r=t[ke]||{},i=xa(e,r,t,n),a=i.ctx;return a[Pe]=function(e){var t=i._next();return t&&t.unload(a,e),!t},a[Ye]=function(e,n){return void 0===e&&(e=null),yn(e)&&(e=Ta(e,r,t,n)),Ia(e||a[Xe](),t,n)},a}function Ca(e,t,n){var r=t[ke]||{},i=xa(e,r,t,n).ctx;return i[Pe]=function(e){return i.iterate(function(t){pn(t[$e])&&t[$e](i,e)})},i[Ye]=function(e,n){return void 0===e&&(e=null),yn(e)&&(e=Ta(e,r,t,n)),Ca(e||i[Xe](),t,n)},i}function Ta(e,t,n,r){var i=null,a=!r;if(yn(e)&&e[Ae]>0){var o=null;Tn(e,function(e){if(a||r!==e||(a=!0),a&&e&&pn(e[Mt])){var u=function(e,t,n){var r,i=null,a=pn(e[Mt]),o=pn(e[Ze]);r=e?e[Te]+"-"+e[At]+"-"+wa++:"Unknown-0-"+wa++;var u={getPlugin:function(){return e},getNext:function(){return i},processTelemetry:l,unload:f,update:d,_id:r,_setNext:function(e){i=e}};function c(){var r;return e&&pn(e[ya])&&(r=e[ya]()),r||(r=ba(u,t,n)),r}function s(t,n,a,o,u){var c=!1,s=e?e[Te]:ma,l=t[ha];return l||(l=t[ha]={}),t.setNext(i),e&&Fr(t[St](),function(){return s+":"+a},function(){l[r]=!0;try{var e=i?i._id:Ct;e&&(l[e]=!1),c=n(t)}catch(u){var o=!i||l[i._id];o&&(c=!0),i&&o||Rr(t[We](),1,73,"Plugin ["+s+"] failed during "+a+" - "+hr(u)+", run flags: "+hr(l))}},o,u),c}function l(t,n){function r(n){if(!e||!a)return!1;var r=pa(e);return!r[Fe]&&!r[kt]&&(o&&e[Ze](i),e[Mt](t,n),!0)}s(n=n||c(),r,"processTelemetry",function(){return{item:t}},!t.sync)||n[Pe](t)}function f(t,n){function r(){var r=!1;if(e){var i=pa(e),a=e[St]||i[St];!e||a&&a!==t.core()||i[Fe]||(i[St]=null,i[Fe]=!0,i[_e]=!1,e[Fe]&&!0===e[Fe](t,n)&&(r=!0))}return r}s(t,r,"unload",function(){},n[Ke])||t[Pe](n)}function d(t,n){function r(){var r=!1;if(e){var i=pa(e),a=e[St]||i[St];!e||a&&a!==t.core()||i[Fe]||e[$e]&&!0===e[$e](t,n)&&(r=!0)}return r}s(t,r,"update",function(){},!1)||t[Pe](n)}return Nn(u)}(e,t,n);i||(i=u),o&&o._setNext(u),o=u}})}return r&&!i?Ta([r],t,n):i}var Sa=500;function _a(e,t,n){t&&yn(t)&&t[Ae]>0&&(Tn(t=t.sort(function(e,t){return e[At]-t[At]}),function(e){e[At]<Sa&&On("Channel has invalid priority - "+e[Te])}),e[Se]({queue:Nn(t),chain:Ta(t,n[ke],n)}))}function ka(){var e=[];return{add:function(t){t&&e[Se](t)},run:function(t,n){Tn(e,function(e){try{e(t,n)}catch(r){Rr(t[We](),2,73,"Unexpected error calling unload handler - "+hr(r))}}),e=[]}}}var Ea="getPlugin",Ma=function(){function e(){var t,n,r,i,a,o=this;function u(e){void 0===e&&(e=null);var t=e;if(!t){var i=n||ba(null,{},o[St]);t=r&&r[Ea]?i[Ye](null,r[Ea]):i[Ye](null,r)}return t}function c(e,t,i){e&&Un(e,Et,[],null,sn),!i&&t&&(i=t[Ne]()[Xe]());var a=r;r&&r[Ea]&&(a=r[Ea]()),o[St]=t,n=ba(i,e,t,a)}function s(){t=!1,o[St]=null,n=null,r=null,a=[],i=ka()}s(),te(e,o,function(e){e[be]=function(e,n,r,i){c(e,n,i),t=!0},e[Fe]=function(t,n){var o,u=e[St];if(u&&(!t||u===t[St]())){var c,l=!1,f=t||Ia(null,u,r&&r[Ea]?r[Ea]():r),d=n||((o={reason:0})[Ke]=!1,o);return e[Ge]&&!0===e[Ge](f,d,p)?c=!0:p(),c}function p(){if(!l){l=!0,i.run(f,n);var e=a;a=[],Tn(e,function(e){e.rm()}),!0===c&&f[Pe](d),s()}}},e[$e]=function(t,n){var i=e[St];if(i&&(!t||i===t[St]())){var a,o=!1,u=t||Ca(null,i,r&&r[Ea]?r[Ea]():r),s=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(u,s,l)?a=!0:l(),a}function l(){o||(o=!0,c(u.getCfg(),u.core(),u[Xe]()))}},e._addHook=function(e){e&&(yn(e)?a=a.concat(e):a[Se](e))},Fn(e,"_addUnloadCb",function(){return i},"add")}),o[We]=function(e){return u(e)[We]()},o[_e]=function(){return t},o.setInitialized=function(e){t=e},o[Ze]=function(e){r=e},o[Pe]=function(e,t){t?t[Pe](e):r&&pn(r[Mt])&&r[Mt](e,null)},o._getTelCtx=u}return e.__ieDyn=1,e}(),Aa=function(e){function t(){var n,r,i=e.call(this)||this;function a(){n=0,r=[]}return i.identifier="TelemetryInitializerPlugin",i.priority=199,a(),te(t,i,function(e,t){e.addTelemetryInitializer=function(e){var t={id:n++,fn:e};return r[Se](t),{remove:function(){Tn(r,function(e,n){if(e.id===t.id)return r[qe](n,1),-1})}}},e[Mt]=function(t,n){for(var i=!1,a=r[Ae],o=0;o<a;++o){var u=r[o];if(u)try{if(!1===u.fn[ot](null,[t])){i=!0;break}}catch(c){Rr(n[We](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Ln(c),{exception:hr(c)},!0)}}i||e[Pe](t,n)},e[Ge]=function(){a()}}),i}return we(t,e),t.__ieDyn=1,t}(Ma),Da="Plugins must provide initialize method",Pa="_notificationManager",Na="SDK is still unloading...",Ra={loggingLevelConsole:1};function La(e,t){return new Or(t)}function Ua(e,t){var n=!1;return Tn(t,function(t){if(t===e)return n=!0,-1}),n}var ja=function(){function e(){var t,n,r,i,a,o,u,c,s,l,f,d,p,v,g,m,h,y,w,x,b=0,I=!1;te(e,this,function(e){function C(n){if(!b&&!I&&(n||e[Me]&&e[Me].queue[Ae]>0)){var r=zn(t.diagnosticLogInterval);r&&r>0||(r=1e4),b=setInterval(function(){clearInterval(b),b=0,A()},r)}return b}function T(){n=!1,t=Kn(!0,{},Ra),e[ke]=t,e[Me]=new Pr(t),e[Oe]=[],g=new Aa,r=[],i=null,a=null,o=null,u=null,c=null,l=null,s=[],f=null,d=null,p=null,v=!1,m=null,h=ri("AIBaseCore",!0),y=ka(),x=null}function S(){var n=ba(E(),t,e);return n[je](C),n}function _(n){var r=function(e,t,n){var r,i=[],a={};return Tn(n,function(n){(sn(n)||sn(n[be]))&&On(Da);var r=n[At],o=n[Te];n&&r&&(sn(a[r])?a[r]=o:Lr(e,"Two extensions have same priority #"+r+" - "+a[r]+", "+o)),(!r||r<t)&&i[Se](n)}),(r={all:n})[St]=i,r}(e[Me],Sa,s);l=r[St],c=null;var i=r.all;if(p=Nn(function(e,t,n){var r=[];if(e&&Tn(e,function(e){return _a(r,e,n)}),t){var i=[];Tn(t,function(e){e[At]>Sa&&i[Se](e)}),_a(r,i,n)}return r}(d,i,e)),f){var a=Sn(i,f);-1!==a&&i[qe](a,1),-1!==(a=Sn(l,f))&&l[qe](a,1),f._setQueue(p)}else f=function(e,t){function n(){return ba(null,t[ke],t,null)}function r(e,t,n,r){var i=e?e[Ae]+1:1;function a(){0===--i&&(r&&r(),r=null)}i>0&&Tn(e,function(e){if(e&&e.queue[Ae]>0){var r=e.chain,o=t[Ye](r);o[je](a),n(o)}else i--}),a()}var i=!1,a={identifier:"ChannelControllerPlugin",priority:Sa,initialize:function(t,n,r,a){i=!0,Tn(e,function(e){e&&e.queue[Ae]>0&&va(ba(e.chain,t,n),r)})},isInitialized:function(){return i},processTelemetry:function(t,i){r(e,i||n(),function(e){e[Pe](t)},function(){i[Pe](t)})},update:function(t,n){var i=n||{reason:0};return r(e,t,function(e){e[Pe](i)},function(){t[Pe](i)}),!0},pause:function(){r(e,n(),function(e){e.iterate(function(e){e.pause&&e.pause()})},null)},resume:function(){r(e,n(),function(e){e.iterate(function(e){e.resume&&e.resume()})},null)},teardown:function(t,n){var a=n||{reason:0,isAsync:!1};return r(e,t,function(e){e[Pe](a)},function(){t[Pe](a),i=!1}),!0},getChannel:function(t){var n=null;return e&&e[Ae]>0&&Tn(e,function(e){if(e&&e.queue[Ae]>0&&(Tn(e.queue,function(e){if(e[Te]===t)return n=e,-1}),n))return-1}),n},flush:function(t,i,a,o){var u=1,c=!1,s=null;function l(){u--,c&&0===u&&(s&&(clearTimeout(s),s=null),i&&i(c),i=null)}return o=o||5e3,r(e,n(),function(e){e.iterate(function(e){if(e[Ve]){u++;var n=!1;e[Ve](t,function(){n=!0,l()},a)||n||(t&&null==s?s=setTimeout(function(){s=null,l()},o):l())}})},function(){c=!0,l()}),!0},_setQueue:function(t){e=t}};return a}(p,e);i[Se](f),l[Se](f),e[Oe]=ga(i),f[be](t,e,i),va(S(),i),e[Oe]=Nn(ga(l||[])).slice(),n&&function(t){var n=Ca(E(),e);n[je](C),e._updateHook&&!0===e._updateHook(n,t)||n[Pe](t)}(n)}function k(t){var n,r=null,i=null;return Tn(e[Oe],function(e){if(e[Te]===t&&e!==f&&e!==g)return i=e,-1}),!i&&f&&(i=f.getChannel(t)),i&&((n={plugin:i})[rt]=function(e){pa(i)[kt]=!e},n.isEnabled=function(){var e=pa(i);return!e[Fe]&&!e[kt]},n.remove=function(e,t){var n;void 0===e&&(e=!0);var r=[i],a=((n={reason:1})[Ke]=e,n);M(r,a,function(e){e&&_({reason:32,removed:r}),t&&t(e)})},r=n),r}function E(){if(!c){var n=(l||[]).slice();-1===Sn(n,g)&&n[Se](g),c=Ta(ga(n),t,e)}return c}function M(n,r,i){if(n&&n[Ae]>0){var a=Ia(Ta(n,t,e),e);a[je](function(){var e=!1,t=[];Tn(s,function(r,i){Ua(r,n)?e=!0:t[Se](r)}),s=t;var r=[];d&&(Tn(d,function(t,i){var a=[];Tn(t,function(t){Ua(t,n)?e=!0:a[Se](t)}),r[Se](a)}),d=r),i&&i(e),C()}),a[Pe](r)}else i(!1)}function A(){if(e[Me]&&e[Me].queue){var n=e[Me].queue.slice(0);e[Me].queue[Ae]=0,Tn(n,function(n){var r,i=((r={})[Ie]=m||"InternalMessageId: "+n[He],r.iKey=zn(t[Ee]),r.time=Cn(new Date),r.baseType=Ar.dataType,r.baseData={message:n[Be]},r);e.track(i)})}}function D(e,t,n,r){return f?f[Ve](e,t,n||6,r):(t&&t(!1),!0)}function P(t){var n=e[Me];n?(Rr(n,2,73,t),C()):On(t)}T(),e[_e]=function(){return n},e[be]=function(r,a,u,c){v&&On(Na),e[_e]()&&On("Core should not be initialized more than once"),t=r||{},e[ke]=t,sn(r[Ee])&&On("Please provide instrumentation key"),i=c,e[Pa]=c,function(){var e=zn(t.disableDbgExt);!0===e&&w&&(i[Le](w),w=null);i&&!w&&!0!==e&&(w=kr(t),i[Re](w))}(),function(){var e=zn(t.enablePerfMgr);!e&&o&&(o=null);e&&jn(t,_t,La)}(),jn(t,Et,{}).NotificationManager=i,u&&(e[Me]=u);var l=jn(t,"extensions",[]);(s=[])[Se].apply(s,xe(xe([],a),l)),d=jn(t,Tt,[]),_(null),p&&0!==p[Ae]||On("No "+Tt+" available"),n=!0,e.releaseQueue()},e.getTransmissionControls=function(){var e=[];return p&&Tn(p,function(t){e[Se](t.queue)}),Nn(e)},e.track=function(n){n.iKey=n.iKey||t[Ee],n[De]=n[De]||Cn(new Date),n.ver=n.ver||"4.0",!v&&e[_e]()?S()[Pe](n):r[Se](n)},e[Ne]=S,e[Ce]=function(){return i||(i=function(){var e;return me(((e={})[Re]=function(e){},e[Le]=function(e){},e[Dt]=function(e){},e[Pt]=function(e,t){},e[Nt]=function(e,t){},e))}(),e[Pa]=i),i},e[Re]=function(e){i&&i[Re](e)},e[Le]=function(e){i&&i[Le](e)},e.getCookieMgr=function(){return u||(u=Ii(t,e[Me])),u},e.setCookieMgr=function(e){u=e},e[jt]=function(){if(!a&&!o&&zn(t.enablePerfMgr)){var n=zn(t[_t]);pn(n)&&(o=n(e,e[Ce]()))}return a||o||null},e.setPerfMgr=function(e){a=e},e.eventCnt=function(){return r[Ae]},e.releaseQueue=function(){if(n&&r[Ae]>0){var e=r;r=[],Tn(e,function(e){S()[Pe](e)})}},e.pollInternalLogs=function(e){return m=e||null,I=!1,b&&(clearInterval(b),b=null),C(!0)},e[Ue]=function(){I=!0,b&&(clearInterval(b),b=0,A())},Hn(e,function(){return g},["addTelemetryInitializer"]),e.unload=function(t,r,i){var a;void 0===t&&(t=!0),n||On("SDK is not initialized"),v&&On(Na);var o=((a={reason:50})[Ke]=t,a.flushComplete=!1,a),u=Ia(E(),e);function c(t){o.flushComplete=t,v=!0,y.run(u,o),e[Ue](),u[Pe](o)}u[je](function(){T(),r&&r(o)},e),A(),D(t,c,6,i)||c(!1)},e[ze]=k,e.addPlugin=function(e,t,n,r){if(!e)return r&&r(!1),void P(Da);var i=k(e[Te]);if(i&&!t)return r&&r(!1),void P("Plugin ["+e[Te]+"] is already loaded!");var a={reason:16};function o(t){s[Se](e),a.added=[e],_(a),r&&r(!0)}if(i){var u=[i.plugin];M(u,{reason:2,isAsync:!!n},function(e){e?(a.removed=u,a.reason|=32,o()):r&&r(!1)})}else o()},e.evtNamespace=function(){return h},e[Ve]=D,e.getTraceCtx=function(e){var t,n;return x||(n={},x={getName:function(){return n[Ie]},setName:function(e){t&&t.setName(e),n[Ie]=e},getTraceId:function(){return n[wt]},setTraceId:function(e){t&&t.setTraceId(e),sa(e)&&(n[wt]=e)},getSpanId:function(){return n[xt]},setSpanId:function(e){t&&t.setSpanId(e),la(e)&&(n[xt]=e)},getTraceFlags:function(){return n[bt]},setTraceFlags:function(e){t&&t.setTraceFlags(e),n[bt]=e}}),x},e.setTraceCtx=function(e){x=e||null},Fn(e,"addUnloadCb",function(){return y},"add")})}return e.__ieDyn=1,e}();function za(e,t,n,r){Tn(e,function(e){if(e&&e[t])if(n)setTimeout(function(){return r(e)},0);else try{r(e)}catch(i){}})}var Va=function(){function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;te(e,this,function(e){e[Re]=function(t){e.listeners[Se](t)},e[Le]=function(t){for(var n=Sn(e[vt],t);n>-1;)e.listeners[qe](n,1),n=Sn(e[vt],t)},e[Dt]=function(t){za(e[vt],Dt,!0,function(e){e[Dt](t)})},e[Pt]=function(t,n){za(e[vt],Pt,!0,function(e){e[Pt](t,n)})},e[Nt]=function(t,n){za(e[vt],Nt,n,function(e){e[Nt](t,n)})},e[Rt]=function(t){t&&(!n&&t[gt]()||za(e[vt],Rt,!1,function(e){t[Ke]?setTimeout(function(){return e[Rt](t)},0):e[Rt](t)}))}})}return e.__ieDyn=1,e}(),Oa=function(e){function t(){var n=e.call(this)||this;return te(t,n,function(e,t){function n(t){var n=e[Ce]();n&&n[Pt]([t],2)}e[be]=function(e,n,r,i){t[be](e,n,r||new Pr(e),i||new Va(e))},e.track=function(r){Fr(e[jt](),function(){return"AppInsightsCore:track"},function(){null===r&&(n(r),On("Invalid telemetry item")),function(e){sn(e[Ie])&&(n(e),On("telemetry name required"))}(r),t.track(r)},function(){return{item:r}},!r.sync)}}),n}return we(t,e),t.__ieDyn=1,t}(ja),qa="_aiHooks",Fa=["req","rsp","hkErr","fnErr"];function Ha(e,t){if(e)for(var n=0;n<e[Ae]&&!t(e[n],n);n++);}function Ba(e,t,n,r,i){i>=0&&i<=2&&Ha(e,function(e,a){var o=e.cbks,u=o[Fa[i]];if(u){t.ctx=function(){return r[a]=r[a]||{}};try{u[ot](t.inst,n)}catch(l){var c=t.err;try{var s=o[Fa[2]];s&&(t.err=l,s[ot](t.inst,n))}catch(f){}finally{t.err=c}}}})}function Ka(e,t,n,r){var i=null;return e&&(fn(e,t)?i=e:n&&(i=Ka(un(e),t,r,!1))),i}function Ga(e,t,n,r){var i=n&&n[qa];if(!i){var a=function(e){return function(){var t,n=arguments,r=e.h,i=((t={})[Ie]=e.n,t.inst=this,t.ctx=null,t.set=function(e,t){(n=u([],n))[e]=t,o=u([i],n)},t),a=[],o=u([i],n);function u(e,t){return Ha(t,function(t){e[Se](t)}),e}i.evt=rr("event"),Ba(r,i,o,a,0);var c=e.f;if(c)try{i.rslt=c[ot](this,n)}catch(s){throw i.err=s,Ba(r,i,o,a,3),s}return Ba(r,i,o,a,1),i.rslt}}(i={i:0,n:t,f:n,h:[]});a[qa]=i,e[t]=a}var o={id:i.i,cbks:r,rm:function(){var e=this.id;Ha(i.h,function(t,n){if(t.id===e)return i.h[qe](n,1),1})}};return i.i++,i.h[Se](o),o}function $a(e,t,n,r,i){if(void 0===r&&(r=!0),e&&t&&n){var a=Ka(e,t,r,i);if(a){var o=a[t];if(typeof o===ne)return Ga(a,t,o,n)}}return null}function Xa(e,t,n,r,i){if(e&&t&&n){var a=Ka(e,t,r,i)||e;if(a)return Ga(a,t,a[t],n)}return null}var Wa="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Za="sampleRate",Ya="ProcessLegacy",Ja="http.method",Qa="https://dc.services.visualstudio.com",eo="/v2/track",to="not_specified",no="iKey";function ro(e){var t=null;if(pn(Event))t=new Event(e);else{var n=ur();n&&n.createEvent&&(t=n.createEvent("Event")).initEvent(e,!0,!0)}return t}var io="split",ao="length",oo="toLowerCase",uo="ingestionendpoint",co="toString",so="removeItem",lo="name",fo="message",po="stringify",vo="pathname",go="correlationHeaderExcludePatterns",mo="indexOf",ho="exceptions",yo="parsedStack",wo="properties",xo="measurements",bo="sizeInBytes",Io="typeName",Co="severityLevel",To="problemGroup",So="isManual",_o="CreateFromInterface",ko="assembly",Eo="fileName",Mo="hasFullStack",Ao="level",Do="method",Po="line",No="duration",Ro="receivedResponse",Lo="substring";function Uo(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString()[oo]()}function jo(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,a=Math.floor(e/864e5);return t=1===t[ao]?"00"+t:2===t[ao]?"0"+t:t,n=n[ao]<2?"0"+n:n,r=r[ao]<2?"0"+r:r,(a>0?a+".":"")+(i=i[ao]<2?"0"+i:i)+":"+r+":"+n+"."+t}var zo,Vo=(zo={},gn({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]},function(e,t){zo[e]=t[1],zo[t[0]]=t[1]}),Pn(zo)),Oo=Gn({LocalStorage:0,SessionStorage:1});Gn({AI:0,AI_AND_W3C:1,W3C:2});var qo,Fo=void 0,Ho=void 0,Bo="";function Ko(){return Wo()?Go(Oo.LocalStorage):null}function Go(e){try{if(sn(ve()))return null;var t=(new Date)[co](),n=rr(e===Oo.LocalStorage?"localStorage":"sessionStorage"),r=Bo+t;n.setItem(r,t);var i=n.getItem(r)!==t;if(n[so](r),!i)return n}catch(a){}return null}function $o(){return Zo()?Go(Oo.SessionStorage):null}function Xo(e){Bo=e||""}function Wo(e){return(e||void 0===Fo)&&(Fo=!!Go(Oo.LocalStorage)),Fo}function Zo(e){return(e||void 0===Ho)&&(Ho=!!Go(Oo.SessionStorage)),Ho}function Yo(e,t){var n=$o();if(null!==n)try{return n.getItem(t)}catch(r){Ho=!1,Rr(e,2,2,"Browser failed read of session storage. "+Ln(r),{exception:hr(r)})}return null}function Jo(e,t,n){var r=$o();if(null!==r)try{return r.setItem(t,n),!0}catch(i){Ho=!1,Rr(e,2,4,"Browser failed write to session storage. "+Ln(i),{exception:hr(i)})}return!1}function Qo(e,t,n){var r=t[ao],i=eu(e,t);if(i[ao]!==r){for(var a=0,o=i;void 0!==n[o];)a++,o=i[Lo](0,147)+su(a);i=o}return i}function eu(e,t){var n;return t&&(t=kn(t[co]()))[ao]>150&&(n=t[Lo](0,150),Rr(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}function tu(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=kn(t)).toString()[ao]>n&&(r=t[co]()[Lo](0,n),Rr(e,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function nu(e,t){return cu(e,t,2048,66)}function ru(e,t){var n;return t&&t[ao]>32768&&(n=t[Lo](0,32768),Rr(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function iu(e,t){var n;if(t){var r=""+t;r[ao]>32768&&(n=r[Lo](0,32768),Rr(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return n||t}function au(e,t){if(t){var n={};gn(t,function(t,r){if(dn(r)&&pr())try{r=vr()[po](r)}catch(i){Rr(e,2,49,"custom property is not valid",{exception:i},!0)}r=tu(e,r,8192),t=Qo(e,t,n),n[t]=r}),t=n}return t}function ou(e,t){if(t){var n={};gn(t,function(t,r){t=Qo(e,t,n),n[t]=r}),t=n}return t}function uu(e,t){return t?cu(e,t,128,69)[co]():t}function cu(e,t,n,r){var i;return t&&(t=kn(t))[ao]>n&&(i=t[Lo](0,n),Rr(e,2,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),i||t}function su(e){var t="00"+e;return t.substr(t[ao]-3)}(qo={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768}).sanitizeKeyAndAddUniqueness=Qo,qo.sanitizeKey=eu,qo.sanitizeString=tu,qo.sanitizeUrl=nu,qo.sanitizeMessage=ru,qo.sanitizeException=iu,qo.sanitizeProperties=au,qo.sanitizeMeasurements=ou,qo.sanitizeId=uu,qo.sanitizeInput=cu,qo.padNumber=su,qo.trim=kn;var lu=ur()||{},fu=0,du=[null,null,null,null,null];function pu(e){var t=fu,n=du,r=n[t];return lu.createElement?n[t]||(r=n[t]=lu.createElement("a")):r={host:vu(e,!0)},r.href=e,++t>=n[ao]&&(t=0),fu=t,r}function vu(e,t){var n=gu(e,t)||"";if(n){var r=n.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=r&&r[ao]>3&&xn(r[2])&&r[2][ao]>0)return r[2]+(r[3]||"")}return n}function gu(e,t){var n=null;if(e){var r=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(null!=r&&r[ao]>2&&xn(r[2])&&r[2][ao]>0&&(n=r[2]||"",t&&r[ao]>2)){var i=(r[1]||"")[oo](),a=r[3]||"";("http"===i&&":80"===a||"https"===i&&":443"===a)&&(a=""),n+=a}}return n}var mu=[Qa+eo,"https://breeze.aimon.applicationinsights.io"+eo,"https://dc-int.services.visualstudio.com"+eo];function hu(e){return-1!==Sn(mu,e[oo]())}var yu={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e[go])for(var r=0;r<e.correlationHeaderExcludePatterns[ao];r++)if(e[go][r].test(t))return!1;var i=pu(t).host[oo]();if(!i||-1===i[mo](":443")&&-1===i[mo](":80")||(i=(gu(t,!0)||"")[oo]()),(!e||!e.enableCorsCorrelation)&&i&&i!==n)return!1;var a,o=e&&e.correlationHeaderDomains;if(o&&(Tn(o,function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));a=a||t.test(i)}),!a))return!1;var u=e&&e.correlationHeaderExcludedDomains;if(!u||0===u[ao])return!0;for(r=0;r<u[ao];r++){if(new RegExp(u[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(i))return!1}return i&&i[ao]>0},getCorrelationContext:function(e){if(e){var t=yu.getCorrelationContextValue(e,Vo[1]);if(t&&t!==yu.correlationIdPrefix)return t}},getCorrelationContextValue:function(e,t){if(e)for(var n=e[io](","),r=0;r<n[ao];++r){var i=n[r][io]("=");if(2===i[ao]&&i[0]===t)return i[1]}}};function wu(){var e=dr();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return Rn()}function xu(e,t){var n=null;return 0===e||0===t||sn(e)||sn(t)||(n=t-e),n}function bu(e,t){var n=e||{};return{getName:function(){return n[lo]},setName:function(e){t&&t.setName(e),n[lo]=e},getTraceId:function(){return n.traceID},setTraceId:function(e){t&&t.setTraceId(e),sa(e)&&(n.traceID=e)},getSpanId:function(){return n.parentID},setSpanId:function(e){t&&t.setSpanId(e),la(e)&&(n.parentID=e)},getTraceFlags:function(){return n.traceFlags},setTraceFlags:function(e){t&&t.setTraceFlags(e),n.traceFlags=e}}}function Iu(e){if(!e)return{};var t=function(e,t,n){var r;if(e){if(e[qt])return e[qt](t,n);var i=e[Ae],a=0;if(arguments[Ae]>=3)r=arguments[2];else{for(;a<i&&!(a in e);)a++;r=e[a++]}for(;a<i;)a in e&&(r=t(r,e[a],a,e)),a++}return r}(e[io](";"),function(e,t){var n=t[io]("=");if(2===n[ao]){var r=n[0][oo](),i=n[1];e[r]=i}return e},{});if(An(t)[ao]>0){if(t.endpointsuffix){var n=t.location?t.location+".":"";t[uo]=t[uo]||"https://"+n+"dc."+t.endpointsuffix,mn(t[uo],"/")&&(t[uo]=t[uo].slice(0,-1))}t[uo]=t[uo]||Qa}return t}var Cu=function(e,t,n){var r=this,i=this;i.ver=1,i.sampleRate=100,i.tags={},i[lo]=tu(e,n)||to,i.data=t,i.time=Cn(new Date),i.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===r.sampleRate?4:1},tags:1,data:1}},Tu=function(){function e(e,t,n,r){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var i=this;i.ver=2,i[lo]=tu(e,t)||to,i[wo]=au(e,n),i[xo]=ou(e,r)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}(),Su="error",_u="stack",ku="stackDetails",Eu="errorSrc",Mu="message",Au="description";function Du(e,t){var n=e;return n&&!xn(n)&&(JSON&&JSON[po]?(n=JSON[po](e),!t||n&&"{}"!==n||(n=pn(e[co])?e[co]():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function Pu(e,t){var n=e;return e&&(n&&!xn(n)&&(n=e[Mu]||e[Au]||n),n&&!xn(n)&&(n=Du(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(n||"")[mo](t)&&(n=t+": "+n),n||""}function Nu(e){return e&&e.src&&xn(e.src)&&e.obj&&yn(e.obj)}function Ru(e){var t=e||"";xn(t)||(t=xn(t[_u])?t[_u]:""+t);var n=t[io]("\n");return{src:t,obj:n}}function Lu(e){var t=null;if(e)try{if(e[_u])t=Ru(e[_u]);else if(e[Su]&&e[Su][_u])t=Ru(e[Su][_u]);else if(e.exception&&e.exception[_u])t=Ru(e.exception[_u]);else if(Nu(e))t=e;else if(Nu(e[ku]))t=e[ku];else if(window&&window.opera&&e[Mu])t=function(e){for(var t=[],n=e[io]("\n"),r=0;r<n[ao];r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),t.push(i)}return{src:e,obj:t}}(e[fo]);else if(e.reason&&e.reason[_u])t=Ru(e.reason[_u]);else if(xn(e))t=Ru(e);else{var n=e[Mu]||e[Au]||"";xn(e[Eu])&&(n&&(n+="\n"),n+=" from "+e[Eu]),n&&(t=Ru(n))}}catch(r){t=Ru(r)}return t||{src:"",obj:null}}function Uu(e){var t="";if(e&&!(t=e.typeName||e[lo]||""))try{var n=/function (.{1,200})\(/.exec(e.constructor[co]());t=n&&n[ao]>1?n[1]:""}catch(r){}return t}function ju(e){if(e)try{if(!xn(e)){var t=Uu(e),n=Du(e,!1);return n&&"{}"!==n||(e[Su]&&(t=Uu(e=e[Su])),n=Du(e,!0)),0!==n[mo](t)&&"String"!==t?t+":"+n:n}}catch(r){}return""+(e||"")}var zu=function(){function e(e,t,n,r,i,a){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var o=this;o.ver=2,!function(e){try{if(dn(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(t){}return!1}(t)?(n||(n={}),o[ho]=[new Vu(e,t,n)],o[wo]=au(e,n),o[xo]=ou(e,r),i&&(o[Co]=i),a&&(o.id=a)):(o[ho]=t[ho]||[],o[wo]=t[wo],o[xo]=t[xo],t[Co]&&(o[Co]=t[Co]),t.id&&(o.id=t.id),t[To]&&(o[To]=t[To]),sn(t[So])||(o[So]=t[So]))}return e.CreateAutoException=function(e,t,n,r,i,a,o,u){var c,s=Uu(i||a||e);return(c={})[fo]=Pu(e,s),c.url=t,c.lineNumber=n,c.columnNumber=r,c.error=ju(i||a||e),c.evt=ju(a||e),c[Io]=s,c.stackDetails=Lu(o||i||a),c.errorSrc=u,c},e.CreateFromInterface=function(t,n,r,i){var a=n[ho]&&_n(n[ho],function(e){return Vu[_o](t,e)});return new e(t,he(he({},n),{exceptions:a}),r,i)},e.prototype.toInterface=function(){var e,t=this,n=t.exceptions,r=t.properties,i=t.measurements,a=t.severityLevel,o=t.problemGroup,u=t.id,c=t.isManual,s=n instanceof Array&&_n(n,function(e){return e.toInterface()})||void 0;return(e={ver:"4.0"})[ho]=s,e.severityLevel=a,e.properties=r,e.measurements=i,e.problemGroup=o,e.id=u,e.isManual=c,e},e.CreateSimpleException=function(e,t,n,r,i,a){var o;return{exceptions:[(o={},o[Mo]=!0,o.message=e,o.stack=i,o.typeName=t,o)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=ju,e}(),Vu=function(){function e(e,t,n){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var r=this;if(function(e){try{if(dn(e))return"hasFullStack"in e&&"typeName"in e}catch(t){}return!1}(t))r[Io]=t[Io],r[fo]=t[fo],r[_u]=t[_u],r[yo]=t[yo]||[],r[Mo]=t[Mo];else{var i=t,a=i&&i.evt;wn(i)||(i=i[Su]||a||i),r[Io]=tu(e,Uu(i))||to,r[fo]=ru(e,Pu(t||i,r[Io]))||to;var o=t[ku]||Lu(t);r[yo]=function(e){var t,n=e.obj;if(n&&n[ao]>0){t=[];var r=0,i=0;if(Tn(n,function(e){var n=e[co]();if(Ou.regex.test(n)){var a=new Ou(n,r++);i+=a[bo],t.push(a)}}),i>32768)for(var a=0,o=t[ao]-1,u=0,c=a,s=o;a<o;){if((u+=t[a][bo]+t[o][bo])>32768){var l=s-c+1;t.splice(c,l);break}c=a,s=o,a++,o--}}return t}(o),yn(r[yo])&&_n(r[yo],function(t){t[ko]=tu(e,t[ko]),t[Eo]=tu(e,t[Eo])}),r[_u]=iu(e,function(e){var t="";return e&&(e.obj?Tn(e.obj,function(e){t+=e+"\n"}):t=e.src||""),t}(o)),r.hasFullStack=yn(r.parsedStack)&&r.parsedStack[ao]>0,n&&(n[Io]=n[Io]||r[Io])}}return e.prototype.toInterface=function(){var e,t=this,n=t[yo]instanceof Array&&_n(t[yo],function(e){return e.toInterface()});return(e={id:t.id,outerId:t.outerId,typeName:t[Io],message:t[fo],hasFullStack:t[Mo],stack:t[_u]})[yo]=n||void 0,e},e.CreateFromInterface=function(t,n){var r=n[yo]instanceof Array&&_n(n[yo],function(e){return Ou[_o](e)})||n[yo];return new e(t,he(he({},n),{parsedStack:r}))},e}(),Ou=function(){function e(t,n){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var r=this;if(r[bo]=0,"string"==typeof t){var i=t;r[Ao]=n,r[Do]="<no_method>",r[ko]=kn(i),r[Eo]="",r[Po]=0;var a=i.match(e.regex);a&&a[ao]>=5&&(r[Do]=kn(a[2])||r[Do],r[Eo]=kn(a[4]),r[Po]=parseInt(a[5])||0)}else r[Ao]=t[Ao],r[Do]=t[Do],r[ko]=t[ko],r[Eo]=t[Eo],r[Po]=t[Po],r[bo]=0;r.sizeInBytes+=r.method[ao],r.sizeInBytes+=r.fileName[ao],r.sizeInBytes+=r.assembly[ao],r[bo]+=e.baseSize,r.sizeInBytes+=r.level.toString()[ao],r.sizeInBytes+=r.line.toString()[ao]}return e.CreateFromInterface=function(t){return new e(t,null)},e.prototype.toInterface=function(){var e=this;return{level:e[Ao],method:e[Do],assembly:e[ko],fileName:e[Eo],line:e[Po]}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}(),qu=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},Fu=function(){function e(e,t,n,r,i,a,o,u,c){this.aiDataContract={ver:1,metrics:1,properties:0};var s=this;s.ver=2;var l=new qu;l.count=r>0?r:void 0,l.max=isNaN(a)||null===a?void 0:a,l.min=isNaN(i)||null===i?void 0:i,l[lo]=tu(e,t)||to,l.value=n,l.stdDev=isNaN(o)||null===o?void 0:o,s.metrics=[l],s[wo]=au(e,u),s[xo]=ou(e,c)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}(),Hu=function(){function e(e,t,n,r,i,a,o){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var u=this;u.ver=2,u.id=uu(e,o),u.url=nu(e,n),u[lo]=tu(e,t)||to,isNaN(r)||(u[No]=jo(r)),u[wo]=au(e,i),u[xo]=ou(e,a)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}(),Bu=function(){function e(e,t,n,r,i,a,o,u,c,s,l,f){void 0===c&&(c="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var d=this;d.ver=2,d.id=t,d[No]=jo(i),d.success=a,d.resultCode=o+"",d.type=tu(e,c);var p=function(e,t,n,r){var i,a=r,o=r;if(t&&t[ao]>0){var u=pu(t);if(i=u.host,!a)if(null!=u[vo]){var c=0===u.pathname[ao]?"/":u[vo];"/"!==c.charAt(0)&&(c="/"+c),o=u[vo],a=tu(e,n?n+" "+c:c)}else a=tu(e,t)}else i=r,a=r;return{target:i,name:a,data:o}}(e,n,u,r);d.data=nu(e,r)||p.data,d.target=tu(e,p.target),s&&(d.target="".concat(d.target," | ").concat(s)),d[lo]=tu(e,p[lo]),d[wo]=au(e,l),d[xo]=ou(e,f)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}(),Ku=function(){function e(e,t,n,r,i){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var a=this;a.ver=2,t=t||to,a[fo]=ru(e,t),a[wo]=au(e,r),a[xo]=ou(e,i),n&&(a[Co]=n)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}(),Gu=function(){function e(e,t,n,r,i,a,o){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var u=this;u.ver=2,u.url=nu(e,n),u[lo]=tu(e,t)||to,u[wo]=au(e,i),u[xo]=ou(e,a),o&&(u.domProcessing=o.domProcessing,u[No]=o[No],u.networkConnect=o.networkConnect,u.perfTotal=o.perfTotal,u[Ro]=o[Ro],u.sentRequest=o.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}(),$u=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t};function Xu(e){var t="ai."+e+".";return function(e){return t+e}}var Wu,Zu=Xu("application"),Yu=Xu("device"),Ju=Xu("location"),Qu=Xu("operation"),ec=Xu("session"),tc=Xu("user"),nc=Xu("cloud"),rc=Xu("internal"),ic=function(e){function t(){return e.call(this)||this}return we(t,e),t}((Wu={applicationVersion:Zu("ver"),applicationBuild:Zu("build"),applicationTypeId:Zu("typeId"),applicationId:Zu("applicationId"),applicationLayer:Zu("layer"),deviceId:Yu("id"),deviceIp:Yu("ip"),deviceLanguage:Yu("language"),deviceLocale:Yu("locale"),deviceModel:Yu("model"),deviceFriendlyName:Yu("friendlyName"),deviceNetwork:Yu("network"),deviceNetworkName:Yu("networkName"),deviceOEMName:Yu("oemName"),deviceOS:Yu("os"),deviceOSVersion:Yu("osVersion"),deviceRoleInstance:Yu("roleInstance"),deviceRoleName:Yu("roleName"),deviceScreenResolution:Yu("screenResolution"),deviceType:Yu("type"),deviceMachineName:Yu("machineName"),deviceVMName:Yu("vmName"),deviceBrowser:Yu("browser"),deviceBrowserVersion:Yu("browserVersion"),locationIp:Ju("ip"),locationCountry:Ju("country"),locationProvince:Ju("province"),locationCity:Ju("city"),operationId:Qu("id"),operationName:Qu("name"),operationParentId:Qu("parentId"),operationRootId:Qu("rootId"),operationSyntheticSource:Qu("syntheticSource"),operationCorrelationVector:Qu("correlationVector"),sessionId:ec("id"),sessionIsFirst:ec("isFirst"),sessionIsNew:ec("isNew"),userAccountAcquisitionDate:tc("accountAcquisitionDate"),userAccountId:tc("accountId"),userAgent:tc("userAgent"),userId:tc("id"),userStoreRegion:tc("storeRegion"),userAuthUserId:tc("authUserId"),userAnonymousUserAcquisitionDate:tc("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:tc("authUserAcquisitionDate"),cloudName:nc("name"),cloudRole:nc("role"),cloudRoleVer:nc("roleVer"),cloudRoleInstance:nc("roleInstance"),cloudEnvironment:nc("environment"),cloudLocation:nc("location"),cloudDeploymentUnit:nc("deploymentUnit"),internalNodeName:rc("nodeName"),internalSdkVersion:rc("sdkVersion"),internalAgentVersion:rc("agentVersion"),internalSnippet:rc("snippet"),internalSdkSrc:rc("sdkSrc")},function(){var e=this;Wu&&gn(Wu,function(t,n){e[t]=n})}));function ac(e,t,n,r,i,a){var o;n=tu(r,n)||to,(sn(e)||sn(t)||sn(n))&&On("Input doesn't contain all required fields");var u="";e[no]&&(u=e[no],delete e[no]);var c=((o={})[lo]=n,o.time=Cn(new Date),o.iKey=u,o.ext=a||{},o.tags=[],o.data={},o.baseType=t,o.baseData=e,o);return sn(i)||gn(i,function(e,t){c.data[e]=t}),c}var oc="user",uc="device",cc="trace",sc="web",lc="app",fc="os",dc=new ic,pc="AppInsightsPropertiesPlugin",vc="AppInsightsChannelPlugin",gc="toString",mc="disableExceptionTracking",hc="autoTrackPageVisitTime",yc="overridePageViewDuration",wc="enableUnhandledPromiseRejectionTracking",xc="samplingPercentage",bc="isStorageUseDisabled",Ic="isBrowserLinkTrackingEnabled",Cc="enableAutoRouteTracking",Tc="namePrefix",Sc="disableFlushOnBeforeUnload",_c="core",kc="dataType",Ec="envelopeType",Mc="diagLog",Ac="track",Dc="trackPageView",Pc="trackPreviousPageVisit",Nc="sendPageViewInternal",Rc="sendPageViewPerformanceInternal",Lc="populatePageViewPerformanceEvent",Uc="href",jc="sendExceptionInternal",zc="exception",Vc="error",Oc="_onerror",qc="errorSrc",Fc="lineNumber",Hc="columnNumber",Bc="message",Kc="CreateAutoException",Gc="addTelemetryInitializer",$c="duration",Xc="length",Wc="isPerformanceTimingSupported",Zc="getPerformanceTiming",Yc="navigationStart",Jc="shouldCollectDuration",Qc="isPerformanceTimingDataReady",es="responseStart",ts="loadEventEnd",ns="responseEnd",rs="connectEnd",is="pageVisitStartTime",as=null;var os=function(){function e(t,n,r,i){te(e,this,function(e){var a,o=null,u=[],c=!1;function s(e){r&&r.flush(e)}function l(){o||(o=setTimeout(function(){o=null;var e=u.slice(0),t=!1;u=[],Tn(e,function(e){e()?t=!0:u.push(e)}),u[Xc]>0&&l(),t&&s(!0)},100))}function f(e){u.push(e),l()}r&&(a=r.logger),e[Dc]=function(e,r){var o=e.name;if(sn(o)||"string"!=typeof o){var u=ur();o=e.name=u&&u.title||""}var l=e.uri;if(sn(l)||"string"!=typeof l){var d=fr();l=e.uri=d&&d[Uc]||""}if(!i[Wc]())return t[Nc](e,r),s(!0),void(function(){if(null==as)try{as=!!(self&&self instanceof WorkerGlobalScope)}catch(e){as=!1}return as}()||Rr(a,2,25,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info."));var p,v,g=!1,m=i[Zc]()[Yc];m>0&&(p=xu(m,+new Date),i[Jc](p)||(p=void 0)),sn(r)||sn(r[$c])||(v=r[$c]),!n&&isNaN(v)||(isNaN(v)&&(r||(r={}),r[$c]=p),t[Nc](e,r),s(!0),g=!0);r||(r={}),f(function(){var n=!1;try{if(i[Qc]()){n=!0;var u={name:o,uri:l};i[Lc](u),u.isValid||g?(g||(r[$c]=u.durationMs,t[Nc](e,r)),c||(t[Rc](u,r),c=!0)):(r[$c]=p,t[Nc](e,r))}else m>0&&xu(m,+new Date)>6e4&&(n=!0,g||(r[$c]=6e4,t[Nc](e,r)))}catch(s){Rr(a,1,38,"trackPageView failed on page load calculation: "+Ln(s),{exception:hr(s)})}return n})},e.teardown=function(e,t){if(o){clearTimeout(o),o=null;var n=u.slice(0);u=[],Tn(n,function(e){e()})}}})}return e.__ieDyn=1,e}(),us=["googlebot","adsbot-google","apis-google","mediapartners-google"];function cs(){var e=dr();return e&&!!e.timing}function ss(){var e=dr(),t=e?e.timing:0;return t&&t.domainLookupStart>0&&t[Yc]>0&&t[es]>0&&t.requestStart>0&&t[ts]>0&&t[ns]>0&&t[rs]>0&&t.domLoading>0}function ls(){return cs()?dr().timing:null}function fs(){return(e=dr())&&e.getEntriesByType&&e.getEntriesByType("navigation")[Xc]>0?dr().getEntriesByType("navigation")[0]:null;var e}function ds(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(sr()||{}).userAgent,r=!1;if(n)for(var i=0;i<us[Xc];i++)r=r||-1!==n.toLowerCase().indexOf(us[i]);if(r)return!1;for(i=0;i<e[Xc];i++)if(e[i]<0||e[i]>=36e5)return!1;return!0}var ps=function(){function e(t){var n=Dr(t);te(e,this,function(e){e[Lc]=function(t){t.isValid=!1;var r=fs(),i=ls(),a=0,o=0,u=0,c=0,s=0;(r||i)&&(r?(a=r[$c],o=0===r.startTime?r[rs]:xu(r.startTime,r[rs]),u=xu(r.requestStart,r[es]),c=xu(r[es],r[ns]),s=xu(r.responseEnd,r[ts])):(a=xu(i[Yc],i[ts]),o=xu(i[Yc],i[rs]),u=xu(i.requestStart,i[es]),c=xu(i[es],i[ns]),s=xu(i.responseEnd,i[ts])),0===a?Rr(n,2,10,"error calculating page view performance.",{total:a,network:o,request:u,response:c,dom:s}):e[Jc](a,o,u,c,s)?a<Math.floor(o)+Math.floor(u)+Math.floor(c)+Math.floor(s)?Rr(n,2,8,"client performance math error.",{total:a,network:o,request:u,response:c,dom:s}):(t.durationMs=a,t.perfTotal=t[$c]=jo(a),t.networkConnect=jo(o),t.sentRequest=jo(u),t.receivedResponse=jo(c),t.domProcessing=jo(s),t.isValid=!0):Rr(n,2,45,"Invalid page load duration value. Browser perf data won't be sent.",{total:a,network:o,request:u,response:c,dom:s}))},e[Zc]=ls,e[Wc]=cs,e[Qc]=ss,e[Jc]=ds})}return e.__ieDyn=1,e}(),vs=function(){function e(t,n){var r="prevPageVisitData";te(e,this,function(e){e[Pc]=function(e,i){try{var a=function(e,n){var i=null;try{i=function(){var e=null;try{if(Zo()){var n=Rn(),i=Yo(t,r);i&&pr()&&((e=vr().parse(i)).pageVisitTime=n-e[is],function(e,t){var n=$o();if(null!==n)try{return n[so](t),!0}catch(r){Ho=!1,Rr(e,2,6,"Browser failed removal of session storage item. "+Ln(r),{exception:hr(r)})}}(t,r))}}catch(a){Lr(t,"Stop page visit timer failed: "+hr(a)),e=null}return e}(),function(e,n){try{if(Zo()){null!=Yo(t,r)&&On("Cannot call startPageVisit consecutively without first calling stopPageVisit");var i=new gs(e,n),a=vr().stringify(i);Jo(t,r,a)}}catch(o){Lr(t,"Call to start failed: "+hr(o))}}(e,n)}catch(a){Lr(t,"Call to restart failed: "+hr(a)),i=null}return i}(e,i);a&&n(a.pageName,a.pageUrl,a.pageVisitTime)}catch(o){Lr(t,"Auto track page visit time failed, metric will not be collected: "+hr(o))}},Dn(e,"_logger",function(){return t}),Dn(e,"pageVisitTimeTrackingHandler",function(){return n})})}return e.__ieDyn=1,e}(),gs=function(e,t){this[is]=Rn(),this.pageName=e,this.pageUrl=t},ms=function(e,t){var n=this,r={};n.start=function(t){void 0!==r[t]&&Rr(e,2,62,"start was called more than once for this event without calling stop.",{name:t,key:t},!0),r[t]=+new Date},n.stop=function(t,i,a,o){var u=r[t];if(isNaN(u))Rr(e,2,63,"stop was called without a corresponding start.",{name:t,key:t},!0);else{var c=xu(u,+new Date);n.action(t,i,c,a,o)}delete r[t],r[t]=void 0}};function hs(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}function ys(e,t){return(e=e||t)<6e4&&(e=6e4),e}function ws(e){return e||(e={}),e.sessionRenewalMs=ys(e.sessionRenewalMs,18e5),e.sessionExpirationMs=ys(e.sessionExpirationMs,864e5),e[mc]=Uo(e[mc]),e[hc]=Uo(e[hc]),e[yc]=Uo(e[yc]),e[wc]=Uo(e[wc]),(isNaN(e[xc])||e[xc]<=0||e[xc]>=100)&&(e[xc]=100),e[bc]=Uo(e[bc]),e[Ic]=Uo(e[Ic]),e[Cc]=Uo(e[Cc]),e[Tc]=e[Tc]||"",e.enableDebug=Uo(e.enableDebug),e[Sc]=Uo(e[Sc]),e.disableFlushOnUnload=Uo(e.disableFlushOnUnload,e[Sc]),e}function xs(e){cn(e[bc])||(e[bc]?(Fo=!1,Ho=!1):(Fo=Wo(!0),Ho=Zo(!0)))}var bs=function(e){function t(){var n,r,i,a,o,u,c,s,l,f,d,p,v,g,m,h,y,w=e.call(this)||this;return w.identifier="ApplicationInsightsAnalytics",w.priority=180,w.autoRoutePVDelay=500,te(t,w,function(e,t){var w=t._addHook;function x(t,n,r,i,a){e[Mc]().throwInternal(t,n,r,i,a)}function b(){n=null,r=null,i=null,a=null,o=null,u=null,c=!1,s=!1,l=!1,f=!1,d=!1,p=!1,v=!1,g=!1;var e=fr();m=e&&e[Uc]||"",h=null,y=null}b(),e.getCookieMgr=function(){return bi(e[_c])},e.processTelemetry=function(t,n){e.processNext(t,n)},e.trackEvent=function(t,n){try{var r=ac(t,Tu[kc],Tu[Ec],e[Mc](),n);e[_c][Ac](r)}catch(i){x(2,39,"trackTrace failed, trace will not be collected: "+Ln(i),{exception:hr(i)})}},e.startTrackEvent=function(e){try{n.start(e)}catch(t){x(1,29,"startTrackEvent failed, event will not be collected: "+Ln(t),{exception:hr(t)})}},e.stopTrackEvent=function(e,t,r){try{n.stop(e,void 0,t,r)}catch(i){x(1,30,"stopTrackEvent failed, event will not be collected: "+Ln(i),{exception:hr(i)})}},e.trackTrace=function(t,n){try{var r=ac(t,Ku[kc],Ku[Ec],e[Mc](),n);e[_c][Ac](r)}catch(i){x(2,39,"trackTrace failed, trace will not be collected: "+Ln(i),{exception:hr(i)})}},e.trackMetric=function(t,n){try{var r=ac(t,Fu[kc],Fu[Ec],e[Mc](),n);e[_c][Ac](r)}catch(i){x(1,36,"trackMetric failed, metric will not be collected: "+Ln(i),{exception:hr(i)})}},e[Dc]=function(t,n){try{var r=t||{};i[Dc](r,he(he(he({},r.properties),r.measurements),n)),e.config[hc]&&o[Pc](r.name,r.uri)}catch(a){x(1,37,"trackPageView failed, page view will not be collected: "+Ln(a),{exception:hr(a)})}},e[Nc]=function(t,n,r){var i=ur();i&&(t.refUri=void 0===t.refUri?i.referrer:t.refUri);var a=ac(t,Hu[kc],Hu[Ec],e[Mc](),n,r);e[_c][Ac](a)},e[Rc]=function(t,n,r){var i=ac(t,Gu[kc],Gu[Ec],e[Mc](),n,r);e[_c][Ac](i)},e.trackPageViewPerformance=function(t,n){var r=t||{};try{a[Lc](r),e[Rc](r,n)}catch(i){x(1,37,"trackPageViewPerformance failed, page view will not be collected: "+Ln(i),{exception:hr(i)})}},e.startTrackPage=function(e){try{if("string"!=typeof e){var t=ur();e=t&&t.title||""}r.start(e)}catch(n){x(1,31,"startTrackPage failed, page view may not be collected: "+Ln(n),{exception:hr(n)})}},e.stopTrackPage=function(t,n,i,a){try{if("string"!=typeof t){var u=ur();t=u&&u.title||""}if("string"!=typeof n){var c=fr();n=c&&c[Uc]||""}r.stop(t,n,i,a),e.config[hc]&&o[Pc](t,n)}catch(s){x(1,32,"stopTrackPage failed, page view will not be collected: "+Ln(s),{exception:hr(s)})}},e[jc]=function(t,n,r){var i=t&&(t[zc]||t[Vc])||wn(t)&&t||{name:t&&typeof t,message:t||to};t=t||{};var a=ac(new zu(e[Mc](),i,t.properties||n,t.measurements,t.severityLevel,t.id).toInterface(),zu[kc],zu[Ec],e[Mc](),n,r);e[_c][Ac](a)},e.trackException=function(t,n){t&&!t[zc]&&t[Vc]&&(t[zc]=t[Vc]);try{e[jc](t,n)}catch(r){x(1,35,"trackException failed, exception will not be collected: "+Ln(r),{exception:hr(r)})}},e[Oc]=function(t){var n=t&&t[Vc],r=t&&t.evt;try{if(!r){var i=ar();i&&(r=i.event)}var a=t&&t.url||(ur()||{}).URL,o=t[qc]||"window.onerror@"+a+":"+(t[Fc]||0)+":"+(t[Hc]||0),u={errorSrc:o,url:a,lineNumber:t[Fc]||0,columnNumber:t[Hc]||0,message:t[Bc]};!function(e,t,n,r,i){return!i&&xn(e)&&("Script error."===e||"Script error"===e)}(t.message,t.url,t.lineNumber,t.columnNumber,t[Vc])?(t[qc]||(t[qc]=o),e.trackException({exception:t,severityLevel:3},u)):function(t,n){var r=ac(t,zu[kc],zu[Ec],e[Mc](),n);e[_c][Ac](r)}(zu[Kc]("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",a,t[Fc]||0,t[Hc]||0,n,r,null,o),u)}catch(s){var c=n?n.name+", "+n[Bc]:"null";x(1,11,"_onError threw exception while logging error, error will not be collected: "+Ln(s),{exception:hr(s),errorString:c})}},e[Gc]=function(t){if(e[_c])return e[_c][Gc](t);u||(u=[]),u.push(t)},e.initialize=function(x,b,I,C){if(!e.isInitialized()){sn(b)&&On("Error initializing"),t.initialize(x,b,I,C),x.storagePrefix&&Xo(x.storagePrefix);try{y=Wi(ri(e.identifier),b.evtNamespace&&b.evtNamespace()),u&&(Tn(u,function(e){b[Gc](e)}),u=null);var T=function(t){var n=ba(null,t,e[_c]),r=e.identifier,i=ws(t),a=e.config=n.getExtCfg(r);void 0!==i&&gn(i,function(e,t){a[e]=n.getConfig(r,e,t),void 0===a[e]&&(a=t)});return a}(x);xs(T),a=new ps(e[_c]),i=new os(e,T[yc],e[_c],a),o=new vs(e[Mc](),function(t,n,r){return function(t,n,r){var i={PageName:t,PageUrl:n};e.trackMetric({name:"PageVisitTime",average:r,max:r,min:r,sampleCount:1},i)}(t,n,r)}),function(t,n){c=t[Ic]||n[Ic],function(){if(!s&&c){var t=["/browserLinkSignalR/","/__browserLink/"],n=function(e){if(c&&e.baseType===Bu[kc]){var n=e.baseData;if(n)for(var r=0;r<t[Xc];r++)if(n.target&&n.target.indexOf(t[r])>=0)return!1}return!0};e[Gc](n),s=!0}}()}(T,x),(n=new ms(e[Mc](),"trackEvent")).action=function(t,n,r,i,a){i||(i={}),a||(a={}),i.duration=r[gc](),e.trackEvent({name:t,properties:i,measurements:a})},(r=new ms(e[Mc](),"trackPageView")).action=function(t,n,r,i,a){sn(i)&&(i={}),i.duration=r[gc]();var o={name:t,uri:n,properties:i,measurements:a};e[Nc](o,i)},ir()&&(function(t){var n=ar(),r=fr();d=t[mc],d||p||t.autoExceptionInstrumented||(w(Xa(n,"onerror",{ns:y,rsp:function(t,n,r,i,a,o){d||!0===t.rslt||e[Oc](zu[Kc](n,r,i,a,o,t.evt))}},!1)),p=!0);!function(t,n,r){v=!0===t[wc],v&&!g&&(w(Xa(n,"onunhandledrejection",{ns:y,rsp:function(t,n){v&&!0!==t.rslt&&e[Oc](zu[Kc](function(e){if(e&&e.reason){var t=e.reason;return!xn(t)&&pn(t[gc])?t[gc]():hr(t)}return e||""}(n),r?r[Uc]:"",0,0,n,t.evt))}},!1)),g=!0,t.autoUnhandledPromiseInstrumented=g)}(t,n,r)}(T),function(t){var n=ar(),r=fr();if(l=!0===t[Cc],n&&l&&lr()){var i=lr()?history:rr("history");pn(i.pushState)&&pn(i.replaceState)&&typeof Event!==ie&&function(t,n,r,i){var a=t[Tc]||"";function o(){l&&hs(n,ro(a+"locationchange"))}function u(){if(h?(m=h,h=i&&i[Uc]||""):h=i&&i[Uc]||"",l){var t=function(){var t=null;e[_c]&&e[_c].getTraceCtx&&(t=e[_c].getTraceCtx(!1));if(!t){var n=e[_c].getPlugin(pc);if(n){var r=n.plugin.context;r&&(t=bu(r.telemetryTrace))}}return t}();if(t){t.setTraceId(na());var n="_unknown_";i&&i.pathname&&(n=i.pathname+(i.hash||"")),t.setName(tu(e[Mc](),n))}setTimeout(function(t){e[Dc]({refUri:t,properties:{duration:0}})}.bind(e,m),e.autoRoutePVDelay)}}f||(w(Xa(r,"pushState",{ns:y,rsp:function(){l&&(hs(n,ro(a+"pushState")),hs(n,ro(a+"locationchange")))}},!0)),w(Xa(r,"replaceState",{ns:y,rsp:function(){l&&(hs(n,ro(a+"replaceState")),hs(n,ro(a+"locationchange")))}},!0)),Zi(n,a+"popstate",o,y),Zi(n,a+"locationchange",u,y),f=!0)}(t,n,i,r)}}(T))}catch(S){throw e.setInitialized(!1),S}}},e._doTeardown=function(e,t){i&&i.teardown(e,t),Yi(window,null,null,y),b()},Dn(e,"_pageViewManager",function(){return i}),Dn(e,"_pageViewPerformanceManager",function(){return a}),Dn(e,"_pageVisitTimeManager",function(){return o}),Dn(e,"_evtNamespace",function(){return"."+y})}),w}return we(t,e),t.Version="2.8.18",t.getDefaultConfig=ws,t}(Ma),Is="duration",Cs="tags",Ts="deviceType",Ss="data",_s="name",ks="traceID",Es="length",Ms="stringify",As="measurements",Ds="dataType",Ps="envelopeType",Ns="toString",Rs="onLine",Ls="isOnline",Us="enqueue",js="count",zs="eventsLimitInMem",Vs="push",Os="emitLineDelimitedJson",qs="clear",Fs="batchPayloads",Hs="markAsSent",Bs="clearSent",Ks="bufferOverride",Gs="BUFFER_KEY",$s="SENT_BUFFER_KEY",Xs="MAX_BUFFER_SIZE",Ws="namePrefix",Zs="maxBatchSizeInBytes",Ys="triggerSend",Js="diagLog",Qs="onunloadDisableBeacon",el="isBeaconApiDisabled",tl="_sender",nl="_senderConfig",rl="enableSessionStorageBuffer",il="_buffer",al="samplingPercentage",ol="instrumentationKey",ul="endpointUrl",cl="customHeaders",sl="disableXhr",ll="onunloadDisableFetch",fl="disableTelemetry",dl="baseType",pl="sampleRate",vl="convertUndefined",gl="_onError",ml="_onPartialSuccess",hl="_onSuccess",yl="itemsAccepted",wl="isRetryDisabled",xl="setRequestHeader",bl="maxBatchInterval",Il="eventsSendRequest",Cl="disableInstrumentationKeyValidation",Tl="getSamplingScore",Sl="baseType",_l="baseData",kl="properties",El="true";function Ml(e,t,n){return Un(e,t,n,Vn)}function Al(e,t,n){sn(e)||gn(e,function(e,r){bn(r)?n[e]=r:xn(r)?t[e]=r:pr()&&(t[e]=vr()[Ms](r))})}function Dl(e,t){sn(e)||gn(e,function(n,r){e[n]=r||t})}function Pl(e,t,n,r){var i=new Cu(e,r,t);Ml(i,"sampleRate",n[Za]),(n[_l]||{}).startTime&&(i.time=Cn(n[_l].startTime)),i.iKey=n.iKey;var a=n.iKey.replace(/-/g,"");return i[_s]=i[_s].replace("{0}",a),function(e,t,n){var r=n[Cs]=n[Cs]||{},i=t.ext=t.ext||{},a=t[Cs]=t[Cs]||[],o=i.user;o&&(Ml(r,dc.userAuthUserId,o.authId),Ml(r,dc.userId,o.id||o.localId));var u=i.app;u&&Ml(r,dc.sessionId,u.sesId);var c=i.device;c&&(Ml(r,dc.deviceId,c.id||c.localId),Ml(r,dc[Ts],c.deviceClass),Ml(r,dc.deviceIp,c.ip),Ml(r,dc.deviceModel,c.model),Ml(r,dc[Ts],c[Ts]));var s=t.ext.web;if(s){Ml(r,dc.deviceLanguage,s.browserLang),Ml(r,dc.deviceBrowserVersion,s.browserVer),Ml(r,dc.deviceBrowser,s.browser);var l=n[Ss]=n[Ss]||{},f=l[_l]=l[_l]||{},d=f[kl]=f[kl]||{};Ml(d,"domain",s.domain),Ml(d,"isManual",s.isManual?El:null),Ml(d,"screenRes",s.screenRes),Ml(d,"userConsent",s.userConsent?El:null)}var p=i.os;p&&Ml(r,dc.deviceOS,p[_s]);var v=i.trace;v&&(Ml(r,dc.operationParentId,v.parentID),Ml(r,dc.operationName,tu(e,v[_s])),Ml(r,dc.operationId,v[ks]));for(var g={},m=a[Es]-1;m>=0;m--)gn(a[m],function(e,t){g[e]=t}),a.splice(m,1);gn(a,function(e,t){g[e]=t});var h=he(he({},r),g);h[dc.internalSdkVersion]||(h[dc.internalSdkVersion]=tu(e,"javascript:".concat(Rl.Version),64)),n[Cs]=Bn(h)}(e,n,i),n[Cs]=n[Cs]||[],Bn(i)}function Nl(e,t){sn(t[_l])&&Rr(e,1,46,"telemetryItem.baseData cannot be null.")}var Rl={Version:"2.8.18"};function Ll(e,t,n){Nl(e,t);var r={},i={};t[Sl]!==Tu[Ds]&&(r.baseTypeSource=t[Sl]),t[Sl]===Tu[Ds]?(r=t[_l][kl]||{},i=t[_l][As]||{}):t[_l]&&Al(t[_l],r,i),Al(t[Ss],r,i),sn(n)||Dl(r,n);var a=t[_l][_s],o=new Tu(e,a,r,i),u=new $u(Tu[Ds],o);return Pl(e,Tu[Ps],t,u)}function Ul(e,t){Yi(e,null,null,t)}var jl,zl=function(){function e(t,n){var r=[],i=!1;this._get=function(){return r},this._set=function(e){return r=e},te(e,this,function(e){e[Us]=function(a){e[js]()>=n[zs]()?i||(Rr(t,2,105,"Maximum in-memory buffer size reached: "+e[js](),!0),i=!0):r[Vs](a)},e[js]=function(){return r[Es]},e.size=function(){for(var e=r[Es],t=0;t<r[Es];t++)e+=r[t][Es];return n[Os]()||(e+=2),e},e[qs]=function(){r=[],i=!1},e.getItems=function(){return r.slice(0)},e[Fs]=function(e){return e&&e[Es]>0?n[Os]()?e.join("\n"):"["+e.join(",")+"]":null}})}return e.__ieDyn=1,e}(),Vl=function(e){function t(n,r){var i=e.call(this,n,r)||this;return te(t,i,function(e,t){e[Hs]=function(e){t[qs]()},e[Bs]=function(e){}}),i}return we(t,e),t.__ieDyn=1,t}(zl),Ol=function(e){function t(n,r){var i=e.call(this,n,r)||this,a=!1,o=r[Ks]()||{getItem:Yo,setItem:Jo},u=o.getItem,c=o.setItem;return te(t,i,function(e,i){var o=d(t[Gs]),s=d(t[$s]),l=e._set(o.concat(s));function f(e,t){var n=[];return Tn(t,function(t){pn(t)||-1!==Sn(e,t)||n[Vs](t)}),n}function d(e){var t=e;try{t=r[Ws]&&r[Ws]()?r[Ws]()+"_"+t:t;var i=u(n,t);if(i){var a=vr().parse(i);if(xn(a)&&(a=vr().parse(a)),a&&yn(a))return a}}catch(o){Rr(n,1,42," storage key: "+t+", "+Ln(o),{exception:hr(o)})}return[]}function p(e,t){var i=e;try{i=r[Ws]&&r[Ws]()?r[Ws]()+"_"+i:i;var a=JSON[Ms](t);c(n,i,a)}catch(o){c(n,i,JSON[Ms]([])),Rr(n,2,41," storage key: "+i+", "+Ln(o)+". Buffer cleared",{exception:hr(o)})}}l[Es]>t[Xs]&&(l[Es]=t[Xs]),p(t[$s],[]),p(t[Gs],l),e[Us]=function(r){e[js]()>=t[Xs]?a||(Rr(n,2,67,"Maximum buffer size reached: "+e[js](),!0),a=!0):(i[Us](r),p(t[Gs],e._get()))},e[qs]=function(){i[qs](),p(t[Gs],e._get()),p(t[$s],[]),a=!1},e[Hs]=function(r){p(t[Gs],e._set(f(r,e._get())));var i=d(t[$s]);i instanceof Array&&r instanceof Array&&((i=i.concat(r))[Es]>t[Xs]&&(Rr(n,1,67,"Sent buffer reached its maximum size: "+i[Es],!0),i[Es]=t[Xs]),p(t[$s],i))},e[Bs]=function(e){var n=d(t[$s]);n=f(e,n),p(t[$s],n)}}),i}return we(t,e),t.BUFFER_KEY="AI_buffer",t.SENT_BUFFER_KEY="AI_sentBuffer",t.MAX_BUFFER_SIZE=2e3,t}(zl),ql=function(){function e(t){te(e,this,function(e){function n(e,a){var o="__aiCircularRefCheck",u={};if(!e)return Rr(t,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),u;if(e[o])return Rr(t,2,50,"Circular reference detected while serializing object",{name:a},!0),u;if(!e.aiDataContract){if("measurements"===a)u=i(e,"number",a);else if("properties"===a)u=i(e,"string",a);else if("tags"===a)u=i(e,"string",a);else if(yn(e))u=r(e,a);else{Rr(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{vr()[Ms](e),u=e}catch(c){Rr(t,1,48,c&&pn(c[Ns])?c[Ns]():"Error serializing object",null,!0)}}return u}return e[o]=!0,gn(e.aiDataContract,function(i,o){var c=pn(o)?1&o():1&o,s=pn(o)?4&o():4&o,l=2&o,f=void 0!==e[i],d=dn(e[i])&&null!==e[i];if(!c||f||l){if(!s){var p=void 0;void 0!==(p=d?l?r(e[i],i):n(e[i],i):e[i])&&(u[i]=p)}}else Rr(t,1,24,"Missing required field specification. The field is required but not present on source",{field:i,name:a})}),delete e[o],u}function r(e,r){var i;if(e)if(yn(e)){i=[];for(var a=0;a<e[Es];a++){var o=n(e[a],r+"["+a+"]");i[Vs](o)}}else Rr(t,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:r},!0);return i}function i(e,n,r){var i;return e&&(i={},gn(e,function(e,a){if("string"===n)void 0===a?i[e]="undefined":null===a?i[e]="null":a[Ns]?i[e]=a[Ns]():i[e]="invalid field: toString() is not defined.";else if("number"===n)if(void 0===a)i[e]="undefined";else if(null===a)i[e]="null";else{var o=parseFloat(a);isNaN(o)?i[e]="NaN":i[e]=o}else i[e]="invalid field: "+r+" is of unknown type.",Rr(t,1,i[e],null,!0)})),i}e.serialize=function(e){var r=n(e,"root");try{return vr()[Ms](r)}catch(i){Rr(t,1,48,i&&pn(i[Ns])?i[Ns]():"Error serializing object",null,!0)}}})}return e.__ieDyn=1,e}(),Fl=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return 100*(this.getHashCode(t)/e.INT_MAX_VALUE)},e.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[Es]<8;)e=e.concat(e);for(var t=5381,n=0;n<e[Es];++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},e.INT_MAX_VALUE=2147483647,e}(),Hl=function(){var e=new Fl,t=new ic;this[Tl]=function(n){return n[Cs]&&n[Cs][t.userId]?e.getHashCodeScore(n[Cs][t.userId]):n.ext&&n.ext.user&&n.ext.user.id?e.getHashCodeScore(n.ext.user.id):n[Cs]&&n[Cs][t.operationId]?e.getHashCodeScore(n[Cs][t.operationId]):n.ext&&n.ext.telemetryTrace&&n.ext.telemetryTrace[ks]?e.getHashCodeScore(n.ext.telemetryTrace[ks]):100*Math.random()}},Bl=function(){function e(e,t){this.INT_MAX_VALUE=2147483647;var n=t||Dr(null);(e>100||e<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[pl]=e,this.samplingScoreGenerator=new Hl}return e.prototype.isSampledIn=function(e){var t=this[pl];return null==t||t>=100||(e.baseType===Fu[Ds]||this.samplingScoreGenerator[Tl](e)<t)},e}();function Kl(e){try{return e.responseText}catch(t){}return null}function Gl(){var e,t;return(e={endpointUrl:function(){return Qa+eo}})[Os]=function(){return!1},e[bl]=function(){return 15e3},e[Zs]=function(){return 102400},e[fl]=function(){return!1},e[rl]=function(){return!0},e[Ks]=function(){return!1},e[wl]=function(){return!1},e[el]=function(){return!0},e[sl]=function(){return!1},e[ll]=function(){return!1},e[Qs]=function(){return!1},e[ol]=function(){return t},e[Ws]=function(){return t},e[al]=function(){return 100},e[cl]=function(){},e[vl]=function(){return t},e[zs]=function(){return 1e4},e.retryCodes=function(){return null},e}var $l=((jl={})[Tu.dataType]=Ll,jl[Ku.dataType]=function(e,t,n){Nl(e,t);var r=t[_l].message,i=t[_l].severityLevel,a=t[_l][kl]||{},o=t[_l][As]||{};Al(t[Ss],a,o),sn(n)||Dl(a,n);var u=new Ku(e,r,i,a,o),c=new $u(Ku[Ds],u);return Pl(e,Ku[Ps],t,c)},jl[Hu.dataType]=function(e,t,n){var r;Nl(e,t);var i=t[_l];sn(i)||sn(i[kl])||sn(i[kl][Is])?sn(t[Ss])||sn(t[Ss][Is])||(r=t[Ss][Is],delete t[Ss][Is]):(r=i[kl][Is],delete i[kl][Is]);var a,o=t[_l];((t.ext||{}).trace||{})[ks]&&(a=t.ext.trace[ks]);var u=o.id||a,c=o[_s],s=o.uri,l=o[kl]||{},f=o[As]||{};sn(o.refUri)||(l.refUri=o.refUri),sn(o.pageType)||(l.pageType=o.pageType),sn(o.isLoggedIn)||(l.isLoggedIn=o.isLoggedIn[Ns]()),sn(o[kl])||gn(o[kl],function(e,t){l[e]=t}),Al(t[Ss],l,f),sn(n)||Dl(l,n);var d=new Hu(e,c,s,r,l,f,u),p=new $u(Hu[Ds],d);return Pl(e,Hu[Ps],t,p)},jl[Gu.dataType]=function(e,t,n){Nl(e,t);var r=t[_l],i=r[_s],a=r.uri||r.url,o=r[kl]||{},u=r[As]||{};Al(t[Ss],o,u),sn(n)||Dl(o,n);var c=new Gu(e,i,a,void 0,o,u,r),s=new $u(Gu[Ds],c);return Pl(e,Gu[Ps],t,s)},jl[zu.dataType]=function(e,t,n){Nl(e,t);var r=t[_l][As]||{},i=t[_l][kl]||{};Al(t[Ss],i,r),sn(n)||Dl(i,n);var a=t[_l],o=zu.CreateFromInterface(e,a,i,r),u=new $u(zu[Ds],o);return Pl(e,zu[Ps],t,u)},jl[Fu.dataType]=function(e,t,n){Nl(e,t);var r=t[_l],i=r[kl]||{},a=r[As]||{};Al(t[Ss],i,a),sn(n)||Dl(i,n);var o=new Fu(e,r[_s],r.average,r.sampleCount,r.min,r.max,r.stdDev,i,a),u=new $u(Fu[Ds],o);return Pl(e,Fu[Ps],t,u)},jl[Bu.dataType]=function(e,t,n){Nl(e,t);var r=t[_l][As]||{},i=t[_l][kl]||{};Al(t[Ss],i,r),sn(n)||Dl(i,n);var a=t[_l];if(sn(a))return Lr(e,"Invalid input for dependency data"),null;var o=a[kl]&&a[kl][Ja]?a[kl][Ja]:"GET",u=new Bu(e,a.id,a.target,a[_s],a[Is],a.success,a.responseCode,o,a.type,a.correlationContext,i,r),c=new $u(Bu[Ds],u);return Pl(e,Bu[Ps],t,c)},jl),Xl=function(e){function t(){var n,r,i,a,o,u,c,s=e.call(this)||this;s.priority=1001,s.identifier=vc,s._senderConfig=Gl();var l,f,d,p,v,g=0;return te(t,s,function(e,m){function h(t,r,i,a,o,u){var c=null;if(e._appId||(c=_(u))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!y(i))return void e[gl](r,o);!e[nl][wl]()&&A(t)?(k(r),Rr(e[Js](),2,40,". Response code "+t+". Will retry to send "+r[Es]+" items.")):e[gl](r,o)}else if(d&&!d[Ls]()){if(!e[nl][wl]()){k(r,10),Rr(e[Js](),2,40,". Offline - Response Code: ".concat(t,". Offline status: ").concat(!d.isOnline(),". Will retry to send ").concat(r.length," items."))}}else y(i),206===t?(c||(c=_(u)),c&&!e[nl][wl]()?e[ml](r,c):e[gl](r,o)):(n=0,e[hl](r,a))}function y(t){return!(u>=10)&&(!sn(t)&&""!==t&&t!==e[nl][ul]()&&(e[nl][ul]=function(){return t},++u,!0))}function w(e,t){f?f(e,!1):b(e)}function x(t){var n=sr(),r=e[il],i=e[nl][ul](),a=e._buffer[Fs](t),o=new Blob([a],{type:"text/plain;charset=UTF-8"}),u=n.sendBeacon(i,o);return u&&(r[Hs](t),e._onSuccess(t,t[Es])),u}function b(t,n){if(yn(t)&&t[Es]>0&&!x(t)){for(var r=[],i=0;i<t[Es];i++){var a=t[i];x([a])||r[Vs](a)}r[Es]>0&&(l&&l(r,!0),Rr(e[Js](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function I(t,n){var r=new XMLHttpRequest,i=e[nl][ul]();try{r[Wa]=!0}catch(o){}r.open("POST",i,n),r[xl]("Content-type","application/json"),hu(i)&&r[xl](Vo[6],Vo[7]),Tn(An(c),function(e){r[xl](e,c[e])}),r.onreadystatechange=function(){return e._xhrReadyStateChange(r,t,t[Es])},r.onerror=function(n){return e[gl](t,D(r),n)};var a=e._buffer[Fs](t);r.send(a),e._buffer[Hs](t)}function C(t,n){if(yn(t)){for(var r=t[Es],i=0;i<t[Es];i++)r+=t[i][Es];g+r<=65e3?S(t,!1):yr()?b(t):(l&&l(t,!0),Rr(e[Js](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}function T(e,t){S(e,!0)}function S(t,n){var r,i=e[nl][ul](),a=e._buffer[Fs](t),o=new Blob([a],{type:"application/json"}),u=new Headers,s=a[Es],l=!1,f=!1;hu(i)&&u.append(Vo[6],Vo[7]),Tn(An(c),function(e){u.append(e,c[e])});var d=((r={method:"POST",headers:u,body:o})[Wa]=!0,r);n||(d.keepalive=!0,l=!0,g+=s);var p=new Request(i,d);try{p[Wa]=!0}catch(v){}e._buffer[Hs](t);try{fetch(p).then(function(r){n||(g-=s,s=0),f||(f=!0,r.ok?r.text().then(function(e){h(r.status,t,r.url,t[Es],r.statusText,e)}):e[gl](t,r.statusText))}).catch(function(r){n||(g-=s,s=0),f||(f=!0,e[gl](t,r.message))})}catch(v){f||e[gl](t,hr(v))}l&&!f&&(f=!0,e._onSuccess(t,t[Es]))}function _(t){try{if(t&&""!==t){var n=vr().parse(t);if(n&&n.itemsReceived&&n.itemsReceived>=n[yl]&&n.itemsReceived-n.itemsAccepted===n.errors[Es])return n}}catch(r){Rr(e[Js](),1,43,"Cannot parse the response. "+Ln(r),{response:t})}return null}function k(t,i){if(void 0===i&&(i=1),t&&0!==t[Es]){var a=e[il];a[Bs](t),n++;for(var o=0,u=t;o<u.length;o++){var c=u[o];a[Us](c)}!function(e){var t,i=10;if(n<=1)t=i;else{var a=(Math.pow(2,n)-1)/2,o=Math.floor(Math.random()*a*i)+1;o*=e,t=Math.max(Math.min(o,3600),i)}var u=Rn()+1e3*t;r=u}(i),E()}}function E(){if(!a&&!i){var t=r?Math.max(0,r-Rn()):0,n=Math.max(e[nl][bl](),t);a=setTimeout(function(){a=null,e[Ys](!0,null,1)},n)}}function M(){clearTimeout(a),a=null,r=null}function A(e){return sn(v)?401===e||408===e||429===e||500===e||502===e||503===e||504===e:v[Es]&&Sn(v,e)>-1}function D(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+Kl(e)||e.response||"":t}function P(t,n){var r=e[il],i=ar(),a=new XDomainRequest;a.onload=function(){return e._xdrOnLoad(a,t)},a.onerror=function(n){return e[gl](t,N(a),n)};var o=i&&i.location&&i.location.protocol||"";if(0!==e[nl][ul]().lastIndexOf(o,0))return Rr(e[Js](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void r[qs]();var u=e[nl][ul]().replace(/^(https?:)/,"");a.open("POST",u);var c=r[Fs](t);a.send(c),r[Hs](t)}function N(e,t){return e?"XDomainRequest,Response:"+Kl(e)||"":t}function R(){e[tl]=null,e[il]=null,e._appId=null,e._sample=null,c={},d=null,n=0,r=null,i=!1,a=null,o=null,u=0,g=0,l=null,f=null,p=null}R(),e.pause=function(){M(),i=!0},e.resume=function(){i&&(i=!1,r=null,e._buffer.size()>e._senderConfig[Zs]()&&e[Ys](!0,null,10),E())},e.flush=function(t,n,r){if(void 0===t&&(t=!0),!i){M();try{e[Ys](t,null,r||1)}catch(a){Rr(e[Js](),1,22,"flush failed, telemetry will not be collected: "+Ln(a),{exception:hr(a)})}}},e.onunloadFlush=function(){if(!i)if(!1!==e._senderConfig[Qs]()&&!1!==e[nl][el]()||!yr())e.flush();else try{e[Ys](!0,w,2)}catch(t){Rr(e[Js](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Ln(t),{exception:hr(t)})}},e.addHeader=function(e,t){c[e]=t},e.initialize=function(t,i,a,c){e.isInitialized()&&Rr(e[Js](),1,28,"Sender is already initialized"),m.initialize(t,i,a,c);var g=e._getTelCtx(),h=e.identifier;o=new ql(i.logger),n=0,r=null,e[tl]=null,u=0;var y=e[Js]();p=Wi(ri("Sender"),i.evtNamespace&&i.evtNamespace()),d=function(e){var t,n=ur(),r=sr(),i=!1,a=!0,o=Wi(ri("OfflineListener"),e);try{if(c(ar())&&(i=!0),n){var u=n.body||n;u.ononline&&c(u)&&(i=!0)}i&&r&&!sn(r[Rs])&&(a=r[Rs])}catch(f){i=!1}function c(e){var t=!1;return e&&(t=Zi(e,"online",s,o))&&Zi(e,"offline",l,o),t}function s(){a=!0}function l(){a=!1}return(t={})[Ls]=function(){var e=!0;return i?e=a:r&&!sn(r[Rs])&&(e=r[Rs]),e},t.isListening=function(){return i},t.unload=function(){var e=ar();if(e&&i){if(Ul(e,o),n){var t=n.body||n;cn(t.ononline)||Ul(t,o)}i=!1}},t}(p),gn(Gl(),function(t,n){e[nl][t]=function(){var e=g.getConfig(h,t,n());return e||"endpointUrl"!==t||(e=n()),e}}),v=e[nl].retryCodes(),t.storagePrefix&&Xo(t.storagePrefix);var w=e[nl][rl]()&&!(!e._senderConfig[Ks]()&&!Zo());e[il]=w?new Ol(y,e[nl]):new Vl(y,e[nl]),e._sample=new Bl(e[nl][al](),y),function(e){var t=!sn(e[Cl])&&e[Cl];if(t)return!0;return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e[ol])}(t)||Rr(y,1,100,"Invalid Instrumentation key "+t[ol]),!hu(e._senderConfig.endpointUrl())&&e._senderConfig.customHeaders()&&e._senderConfig.customHeaders()[Es]>0&&Tn(e[nl][cl](),function(e){s.addHeader(e.header,e.value)});var x=e[nl],S=null;!x[sl]()&&xr()?S=P:!x[sl]()&&br()&&(S=I),!S&&wr()&&(S=T),l=S||I,!x[el]()&&yr()&&(S=b),e[tl]=S||I,f=!x[ll]()&&wr(!0)?C:yr()?b:!x[sl]()&&xr()?P:!x[sl]()&&br()?I:l},e.processTelemetry=function(n,r){var i,a=(r=e._getTelCtx(r))[Js]();try{if(e[nl][fl]())return;if(!n)return void Rr(a,1,7,"Cannot send empty telemetry");if(n.baseData&&!n[dl])return void Rr(a,1,70,"Cannot send telemetry without baseData and baseType");if(n[dl]||(n[dl]="EventData"),!e[tl])return void Rr(a,1,28,"Sender was not initialized");if(i=n,!e._sample.isSampledIn(i))return void Rr(a,2,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample[pl]});n[Za]=e._sample[pl];var u=e[nl][vl]()||void 0,c=n.iKey||e[nl][ol](),s=t.constructEnvelope(n,c,a,u);if(!s)return void Rr(a,1,47,"Unable to create an AppInsights envelope");var l=!1;if(n[Cs]&&n[Cs][Ya]&&(Tn(n[Cs][Ya],function(e){try{e&&!1===e(s)&&(l=!0,Lr(a,"Telemetry processor check returns false"))}catch(t){Rr(a,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Ln(t),{exception:hr(t)},!0)}}),delete n[Cs][Ya]),l)return;var f=o.serialize(s),p=e[il];p.size()+f[Es]>e[nl][Zs]()&&(d&&!d[Ls]()||e[Ys](!0,null,10)),p[Us](f),E()}catch(v){Rr(a,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Ln(v),{exception:hr(v)})}e.processNext(n,r)},e._xhrReadyStateChange=function(e,t,n){4===e.readyState&&h(e.status,t,e.responseURL,n,D(e),Kl(e)||e.response)},e[Ys]=function(t,n,r){if(void 0===t&&(t=!0),!i)try{var a=e[il];if(e[nl][fl]())a[qs]();else{if(a[js]()>0){var o=a.getItems();!function(t,n){var r=function(){var t="getNotifyMgr";if(e.core[t])return e.core[t]();return e.core._notificationManager}();if(r&&r[Il])try{r[Il](t,n)}catch(i){Rr(e[Js](),1,74,"send request notification failed: "+Ln(i),{exception:hr(i)})}}(r||0,t),n?n.call(e,o,t):e[tl](o,t)}+new Date}M()}catch(c){var u=mr();(!u||u>9)&&Rr(e[Js](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Ln(c),{exception:hr(c)})}},e._doTeardown=function(t,n){e.onunloadFlush(),d.unload(),R()},e[gl]=function(t,n,r){Rr(e[Js](),2,26,"Failed to send telemetry.",{message:n}),e._buffer&&e._buffer[Bs](t)},e[ml]=function(t,n){for(var r=[],i=[],a=0,o=n.errors.reverse();a<o.length;a++){var u=o[a],c=t.splice(u.index,1)[0];A(u.statusCode)?i[Vs](c):r[Vs](c)}t[Es]>0&&e[hl](t,n[yl]),r[Es]>0&&e[gl](r,D(null,["partial success",n[yl],"of",n.itemsReceived].join(" "))),i[Es]>0&&(k(i),Rr(e[Js](),2,40,"Partial success. Delivered: "+t[Es]+", Failed: "+r[Es]+". Will retry to send "+i[Es]+" our of "+n.itemsReceived+" items"))},e[hl]=function(t,n){e._buffer&&e._buffer[Bs](t)},e._xdrOnLoad=function(t,r){var i=Kl(t);if(!t||i+""!="200"&&""!==i){var a=_(i);a&&a.itemsReceived&&a.itemsReceived>a[yl]&&!e[nl][wl]()?e[ml](r,a):e[gl](r,N(t))}else n=0,e[hl](r,0)}}),s}return we(t,e),t.constructEnvelope=function(e,t,n,r){var i;return i=t===e.iKey||sn(t)?e:he(he({},e),{iKey:t}),($l[i.baseType]||Ll)(n,i,r)},t}(Ma),Wl="duration",Zl="properties",Yl="requestUrl",Jl="inst",Ql="length",ef="traceID",tf="spanID",nf="traceFlags",rf="context",af="aborted",of="traceId",uf="spanId",cf="core",sf="includeCorrelationHeaders",lf="canIncludeCorrelationHeader",ff="getAbsoluteUrl",df="headers",pf="requestHeaders",vf="appId",gf="setRequestHeader",mf="trackDependencyDataInternal",hf="distributedTracingMode",yf="startTime",wf="toLowerCase",xf="enableRequestHeaderTracking",bf="enableAjaxErrorStatusText",If="enableAjaxPerfTracking",Cf="maxAjaxCallsPerView",Tf="enableResponseHeaderTracking",Sf="excludeRequestFromAutoTrackingPatterns",_f="addRequestContext",kf="disableAjaxTracking",Ef="disableFetchTracking",Mf="status",Af="statusText",Df="headerMap",Pf="openDone",Nf="sendDone",Rf="requestSentTime",Lf="abortDone",Uf="getTraceId",jf="getTraceFlags",zf="method",Vf="errorStatusText",Of="stateChangeAttached",qf="responseFinishedTime",Ff="CreateTrackItem",Hf="response",Bf="getAllResponseHeaders",Kf="getPartAProps",Gf="getCorrelationContext",$f="perfMark",Xf="name",Wf="perfTiming",Zf="ajaxTotalDuration",Yf="eventTraceCtx";function Jf(e,t,n){var r=0,i=e[t],a=e[n];return i&&a&&(r=xu(i,a)),r}function Qf(e,t,n,r,i){var a=0,o=Jf(n,r,i);return o&&(a=ed(e,t,jo(o))),a}function ed(e,t,n){var r="ajaxPerf",i=0;e&&t&&n&&((e[r]=e[r]||{})[t]=n,i=1);return i}var td=function(){var e=this;e[Pf]=!1,e.setRequestHeaderDone=!1,e[Nf]=!1,e[Lf]=!1,e[Of]=!1},nd=function(){function e(t,n,r,i){var a,o=this,u=r;o[$f]=null,o.completed=!1,o.requestHeadersSize=null,o[pf]=null,o.responseReceivingDuration=null,o.callbackDuration=null,o[Zf]=null,o[af]=0,o.pageUrl=null,o[Yl]=null,o.requestSize=0,o[zf]=null,o[Mf]=null,o[Rf]=null,o.responseStartedTime=null,o[qf]=null,o.callbackFinishedTime=null,o.endTime=null,o.xhrMonitoringState=new td,o.clientFailure=0,o[ef]=t,o[tf]=n,o[nf]=null==i?void 0:i.getTraceFlags(),o[Yf]=i?((a={})[of]=i[Uf](),a[uf]=i.getSpanId(),a[nf]=i[jf](),a):null,te(e,o,function(e){e.getAbsoluteUrl=function(){return e[Yl]?function(e){var t,n=pu(e);return n&&(t=n.href),t}(e[Yl]):null},e.getPathName=function(){return e[Yl]?nu(u,(t=e[zf],n=e[Yl],t?t.toUpperCase()+" "+n:n)):null;var t,n},e[Ff]=function(t,n,r){var i;if(e.ajaxTotalDuration=Math.round(1e3*xu(e.requestSentTime,e.responseFinishedTime))/1e3,e[Zf]<0)return null;var a=((i={id:"|"+e[ef]+"."+e[tf],target:e[ff]()})[Xf]=e.getPathName(),i.type=t,i[yf]=null,i.duration=e[Zf],i.success=+e[Mf]>=200&&+e[Mf]<400,i.responseCode=+e[Mf],i[Zl]={HttpMethod:e[zf]},i),o=a[Zl];if(e[af]&&(o[af]=!0),e[Rf]&&(a[yf]=new Date,a[yf].setTime(e[Rf])),function(e,t){var n=e[Wf],r=t[Zl]||{},i=0,a="name",o="Start",u="End",c="domainLookup",s="connect",l="redirect",f="request",d="response",p="startTime",v=c+o,g=c+u,m=s+o,h=s+u,y=f+o,w=f+u,x=d+o,b=d+u,I=l+o,C=l=u,T="transferSize",S="encodedBodySize",_="decodedBodySize",k="serverTiming";if(n){i|=Qf(r,l,n,I,C),i|=Qf(r,c,n,v,g),i|=Qf(r,s,n,m,h),i|=Qf(r,f,n,y,w),i|=Qf(r,d,n,x,b),i|=Qf(r,"networkConnect",n,p,h),i|=Qf(r,"sentRequest",n,y,b);var E=n[Wl];E||(E=Jf(n,p,b)||0),i|=ed(r,Wl,E),i|=ed(r,"perfTotal",E);var M=n[k];if(M){var A={};Tn(M,function(e,t){var n=vn(e[a]||""+t),r=A[n]||{};gn(e,function(e,t){(e!==a&&xn(t)||bn(t))&&(r[e]&&(t=r[e]+";"+t),!t&&xn(t)||(r[e]=t))}),A[n]=r}),i|=ed(r,k,A)}i|=ed(r,T,n[T]),i|=ed(r,S,n[S]),i|=ed(r,_,n[_])}else e[$f]&&(i|=ed(r,"missing",e.perfAttempts));i&&(t[Zl]=r)}(e,a),n&&An(e.requestHeaders)[Ql]>0&&(o[pf]=e[pf]),r){var u=r();if(u){var c=u.correlationContext;if(c&&(a.correlationContext=c),u[Df]&&An(u.headerMap)[Ql]>0&&(o.responseHeaders=u[Df]),e[Vf])if(e[Mf]>=400){var s=u.type;""!==s&&"text"!==s||(o.responseText=u.responseText?u[Af]+" - "+u.responseText:u[Af]),"json"===s&&(o.responseText=u.response?u[Af]+" - "+JSON.stringify(u[Hf]):u[Af])}else 0===e[Mf]&&(o.responseText=u[Af]||"")}}return a},e[Kf]=function(){var t,n=null,r=e[Yf];if(r&&(r[of]||r[uf])){var i=(n={})[cc]=((t={})[ef]=r[of],t.parentID=r[uf],t);sn(r[nf])||(i[nf]=r[nf])}return n}})}return e.__ieDyn=1,e}(),rd="ai.ajxmn.",id="diagLog",ad="_ajaxData",od="fetch",ud="Failed to monitor XMLHttpRequest",cd=", monitoring data for this ajax call ",sd=cd+"may be incorrect.",ld=cd+"won't be sent.",fd="Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",dd="Failed to add custom defined request context as configured call back may missing a null check.",pd="Failed to calculate the duration of the ",vd=0;var gd=null;var md=function(e,t){return e&&t&&e[ad]?(e[ad].i||{})[t]:null},hd=function(e,t){var n=!1;if(e){var r=(e[ad]||{}).xh;r&&Tn(r,function(e){if(e.n===t)return n=!0,-1})}return n};function yd(e,t){var n="";try{var r=md(e,t);r&&r[Yl]&&(n+="(url: '"+r[Yl]+"')")}catch(i){}return n}function wd(e,t,n,r,i){Rr(e[id](),1,t,n,r,i)}function xd(e,t,n,r,i){Rr(e[id](),2,t,n,r,i)}function bd(e,t,n){return function(r){wd(e,t,n,{ajaxDiagnosticsMessage:yd(r[Jl],e._ajaxDataId),exception:hr(r.err)})}}function Id(e,t){return e&&t?e.indexOf(t):-1}function Cd(e,t,n){var r={id:t,fn:n};return e.push(r),{remove:function(){Tn(e,function(t,n){if(t.id===r.id)return e.splice(n,1),-1})}}}function Td(e,t,n,r){var i=!0;return Tn(t,function(t,a){try{!1===t.fn.call(null,n)&&(i=!1)}catch(o){Rr(e&&e.logger,1,64,"Dependency "+r+" [#"+a+"] failed: "+Ln(o),{exception:hr(o)},!0)}}),i}var Sd="*.blob.core.",_d=Pn([Sd+"windows.net",Sd+"chinacloudapi.cn",Sd+"cloudapi.de",Sd+"usgovcloudapi.net"]),kd=[/https:\/\/[^\/]*(\.pipe\.aria|aria\.pipe|events\.data|collector\.azure)\.[^\/]+\/(OneCollector\/1|Collector\/3)\.0/i];function Ed(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!1,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:1,correlationHeaderExcludedDomains:_d,correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"],addRequestContext:void 0,addIntEndpoints:!0}}function Md(){var e=Ed();return gn(e,function(t){e[t]=void 0}),e}var Ad=function(e){function t(){var n,r,i,a,o,u,c,s,l,f,d,p,v,g,m,h,y,w,x,b,I,C,T,S,_=e.call(this)||this;return _.identifier=t.identifier,_.priority=120,te(t,_,function(e,_){var k=_._addHook;function E(){var _=fr();n=!1,r=!1,i=_&&_.host&&_.host[wf](),a=t.getEmptyConfig(),o=!1,u=!1,c=0,s=null,l=!1,f=!1,d=null,p=!1,v=0,g=!1,m={},h=!1,y=!1,w=null,x=null,b=null,C=0,T=[],S=[],I=ri("ajaxData"),e._ajaxDataId=I}function M(e){var t=!0;return(e||a.ignoreHeaders)&&Tn(a.ignoreHeaders,function(n){if(n[wf]()===e[wf]())return t=!1,-1}),t}function A(e,t,n){k(function(e,t,n){return e?$a(e[ae],t,n,!1):null}(e,t,n))}function D(e,t,n){var r=!1,i=((xn(t)?t:(t||{}).url||"")||"")[wf]();if(Tn(w,function(e){var t=e;xn(e)&&(t=new RegExp(e)),r||(r=t.test(i))}),r)return r;var a=Id(i,"?"),o=Id(i,"#");return(-1===a||-1!==o&&o<a)&&(a=o),-1!==a&&(i=i.substring(0,a)),sn(e)?sn(t)||(r="object"==typeof t&&!0===t[Wa]||!!n&&!0===n[Wa]):r=!0===e[Wa]||!0===i[Wa],!r&&i&&hu(i)&&(r=!0),r?m[i]||(m[i]=1):m[i]&&(r=!0),r}function P(e,t,n){var i=!0,a=r;return sn(e)||(i=!0===n||!sn(t)),a&&i}function N(){var t=null;return e[cf]&&e[cf].getTraceCtx&&(t=e[cf].getTraceCtx(!1)),!t&&s&&s.telemetryTrace&&(t=bu(s.telemetryTrace)),t}function R(e){try{var t=e.responseType;if(""===t||"text"===t)return e.responseText}catch(n){}return null}function L(t){try{var n=t[Bf]();if(null!==n)if(-1!==Id(n[wf](),Vo[8])){var r=t.getResponseHeader(Vo[0]);return yu[Gf](r)}}catch(i){xd(e,18,fd,{ajaxDiagnosticsMessage:yd(t,I),exception:hr(i)})}}function U(e,t){if(t[Yl]&&d&&p){var n=dr();if(n&&pn(n.mark)){vd++;var r=d+e+"#"+vd;n.mark(r);var i=n.getEntriesByName(r);i&&1===i[Ql]&&(t[$f]=i[0])}}}function j(e,t,n,r){var i=t[$f],o=dr(),u=a.maxAjaxPerfLookupAttempts,c=a.ajaxPerfLookupDelay,s=t[Yl],l=0;!function a(){try{if(o&&i){l++;for(var f=null,d=o.getEntries(),p=d[Ql]-1;p>=0;p--){var v=d[p];if(v){if("resource"===v.entryType)v.initiatorType!==e||-1===Id(v[Xf],s)&&-1===Id(s,v[Xf])||(f=v);else if("mark"===v.entryType&&v[Xf]===i[Xf]){t[Wf]=f;break}if(v[yf]<i[yf]-1e3)break}}}!i||t[Wf]||l>=u||!1===t.async?(i&&pn(o.clearMarks)&&o.clearMarks(i[Xf]),t.perfAttempts=l,n()):setTimeout(a,c)}catch(g){r(g)}}()}function z(t){var n="";try{sn(t)||(xn(t)?n+="(url: '".concat(t,"')"):n+="(url: '".concat(t.url,"')"))}catch(r){wd(e,15,"Failed to grab failed fetch diagnostics message",{exception:hr(r)})}return n}function V(t,n,r,i,a,u,c){function s(t,n,i){var a=i||{};a.fetchDiagnosticsMessage=z(r),n&&(a.exception=hr(n)),xd(e,t,pd+"fetch call"+ld,a)}a&&(a[qf]=wu(),a[Mf]=n,j(od,a,function(){var t,c=a[Ff]("Fetch",o,u);try{x&&(t=x({status:n,request:r,response:i}))}catch(f){xd(e,104,dd)}if(c){void 0!==t&&(c[Zl]=he(he({},c.properties),t));var l=a[Kf]();q(S,e[cf],a,c,null,l)}else s(14,null,{requestSentTime:a[Rf],responseFinishedTime:a[qf]})},function(e){s(18,e,null)}))}function O(t){if(t&&t[df])try{var n=t[df].get(Vo[0]);return yu[Gf](n)}catch(r){xd(e,18,fd,{fetchDiagnosticsMessage:z(t),exception:hr(r)})}}function q(t,n,r,i,a,o){var u=!0;t[Ql]>0&&(u=Td(n,t,{item:i,properties:a,sysProperties:o,context:r?r[rf]:null,aborted:!!r&&!!r[af]},"initializer"));u&&e[mf](i,a,o)}E(),e.initialize=function(i,c,m,C){var T;e.isInitialized()||(_.initialize(i,c,m,C),b=Wi(ri("ajax"),c&&c.evtNamespace&&c.evtNamespace()),function(n){var r=ba(null,n,e[cf]);a=Md(),gn(Ed(),function(e,n){a[e]=r.getConfig(t.identifier,e,n)});var i=a[hf];if(o=a[xf],u=a[bf],p=a[If],v=a[Cf],g=a[Tf],w=[].concat(a[Sf]||[],!1!==a.addIntEndpoints?kd:[]),x=a[_f],f=0===i||1===i,l=1===i||2===i,p){var c=n.instrumentationKey||"unkwn";d=c[Ql]>5?rd+c.substring(c[Ql]-5)+".":rd+c+"."}h=!!a[kf],y=!!a[Ef]}(i),!function(e,t){var n,r=!1;if(br()){var i=XMLHttpRequest[ae];r=!(sn(i)||sn(i.open)||sn(i.send)||sn(i.abort))}var a=mr();if(a&&a<9&&(r=!1),r)try{var o=new XMLHttpRequest,u={xh:[],i:(n={},n[t]={},n)};o[ad]=u;var c=XMLHttpRequest[ae].open;XMLHttpRequest[ae].open=c}catch(s){r=!1,wd(e,15,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:hr(s)})}return r}(e,I)||h||r||(A(XMLHttpRequest,"open",{ns:b,req:function(t,n,r,i){if(!h){var a=t[Jl],c=md(a,I);!D(a,r)&&P(a,c,!0)&&(c&&c.xhrMonitoringState[Pf]||(c=function(t,n,r,i){var a,o=N(),c=o&&o[Uf]()||na(),s=na().substr(0,16),l=t[ad]=t[ad]||{xh:[],i:{}},f=l.i=l.i||{},d=f[I]=f[I]||new nd(c,s,e[id](),null===(a=e.core)||void 0===a?void 0:a.getTraceCtx());return d[nf]=o&&o[jf](),d[zf]=n,d[Yl]=r,d.xhrMonitoringState[Pf]=!0,d[pf]={},d.async=i,d[Vf]=u,d}(a,n,r,i)),function(t,n){n.xhrMonitoringState[Of]=Zi(t,"readystatechange",function(){try{t&&4===t.readyState&&P(t,n)&&function(t){var n=md(t,I);function r(n,r){var i=r||{};i.ajaxDiagnosticsMessage=yd(t,I),n&&(i.exception=hr(n)),xd(e,14,pd+"ajax call"+ld,i)}n[qf]=wu(),n[Mf]=t[Mf],j("xmlhttprequest",n,function(){try{var i=n[Ff]("Ajax",o,function(){var e={statusText:t[Af],headerMap:null,correlationContext:L(t),type:t.responseType,responseText:R(t),response:t[Hf]};if(g){var n=t[Bf]();if(n){var r=kn(n).split(/[\r\n]+/),i={};Tn(r,function(e){var t=e.split(": "),n=t.shift(),r=t.join(": ");M(n)&&(i[n]=r)}),e[Df]=i}}return e}),a=void 0;try{x&&(a=x({status:t[Mf],xhr:t}))}catch(s){xd(e,104,dd)}if(i){void 0!==a&&(i[Zl]=he(he({},i.properties),a));var u=n[Kf]();q(S,e[cf],n,i,null,u)}else r(null,{requestSentTime:n[Rf],responseFinishedTime:n[qf]})}finally{try{var c=(t[ad]||{i:{}}).i||{};c[I]&&(c[I]=null)}catch(s){}}},function(e){r(e,null)})}(t)}catch(i){var r=hr(i);r&&-1!==Id(r[wf](),"c00c023f")||wd(e,16,ud+" 'readystatechange' event handler"+sd,{ajaxDiagnosticsMessage:yd(t,I),exception:r})}},b)}(a,c))}},hkErr:bd(e,15,ud+".open"+sd)}),A(XMLHttpRequest,"send",{ns:b,req:function(t,n){if(!h){var r=t[Jl],i=md(r,I);P(r,i)&&!i.xhrMonitoringState[Nf]&&(U("xhr",i),i[Rf]=wu(),e[sf](i,void 0,void 0,r),i.xhrMonitoringState[Nf]=!0)}},hkErr:bd(e,17,ud+sd)}),A(XMLHttpRequest,"abort",{ns:b,req:function(e){if(!h){var t=e[Jl],n=md(t,I);P(t,n)&&!n.xhrMonitoringState[Lf]&&(n[af]=1,n.xhrMonitoringState[Lf]=!0)}},hkErr:bd(e,13,ud+".abort"+sd)}),A(XMLHttpRequest,"setRequestHeader",{ns:b,req:function(e,t,n){if(!h){var r=e[Jl],i=md(r,I);i&&P(r,i)&&(function(e,t,n){if(e){var r=(e[ad]||{}).xh;r&&r.push({n:t,v:n})}}(r,t,n),o&&M(t)&&i&&(i[pf][t]=n))}},hkErr:bd(e,71,ud+".setRequestHeader"+sd)}),r=!0),function(){var t=(i=ve(),!i||sn(i.Request)||sn(i.Request[ae])||sn(i[od])?null:i[od]);var i;if(!t)return;ve();var a=t.polyfill;y||n?a&&k($a(globalThis,od,{ns:b,req:function(e,t,n){D(null,t,n)}})):(k($a(globalThis,od,{ns:b,req:function(t,i,c){var s;if(!y&&n&&!D(null,i,c)&&(!a||!r)){var l=t.ctx();s=function(t,n){var r,i=N(),a=i&&i[Uf]()||na(),c=na().substr(0,16),s=new nd(a,c,e[id](),null===(r=e.core)||void 0===r?void 0:r.getTraceCtx());s[nf]=i&&i[jf](),s[Rf]=wu(),s[Vf]=u,t instanceof Request?s[Yl]=t?t.url:"":s[Yl]=t;var l="GET";n&&n[zf]?l=n[zf]:t&&t instanceof Request&&(l=t[zf]);s[zf]=l;var f={};if(o){new Headers((n?n[df]:0)||t instanceof Request&&t[df]||{}).forEach(function(e,t){M(t)&&(f[t]=e)})}return s[pf]=f,U(od,s),s}(i,c);var f=e[sf](s,i,c);f!==c&&t.set(1,f),l.data=s}},rsp:function(e,t){if(!y){var n=e.ctx().data;n&&(e.rslt=e.rslt.then(function(r){return V(e,(r||{})[Mf],t,r,n,function(){var e={statusText:(r||{})[Af],headerMap:null,correlationContext:O(r)};if(g&&r){var t={};r.headers.forEach(function(e,n){M(n)&&(t[n]=e)}),e[Df]=t}return e}),r}).catch(function(r){throw V(e,0,t,null,n,null,{error:r.message||hr(r)}),r}))}},hkErr:bd(e,15,"Failed to monitor Window.fetch"+sd)},!0,function(){if(null==gd)try{gd=!!(self&&self instanceof WorkerGlobalScope)}catch(e){gd=!1}return gd}())),n=!0);a&&(globalThis[od].polyfill=a)}(),(T=e[cf].getPlugin(pc))&&(s=T.plugin[rf]))},e._doTeardown=function(){E()},e.trackDependencyData=function(t,n){q(S,e[cf],null,t,n)},e[sf]=function(t,n,r,u){var c=e._currentWindowHost||i;if(function(e,t,n,r,i,a){if(e[Ql]>0){var o={core:t,xhr:r,input:i,init:a,traceId:n[ef],spanId:n[tf],traceFlags:n[nf],context:n[rf]||{},aborted:!!n[af]};Td(t,e,o,"listener"),n[ef]=o[of],n[tf]=o[uf],n[nf]=o[nf],n[rf]=o[rf]}}(T,e[cf],t,u,n,r),n||""===n){if(yu[lf](a,t[ff](),c)){r||(r={});var d=new Headers(r[df]||n instanceof Request&&n[df]||{});if(f){var p="|"+t[ef]+"."+t[tf];d.set(Vo[3],p),o&&(t[pf][Vo[3]]=p)}if((g=a[vf]||s&&s[vf]())&&(d.set(Vo[0],Vo[2]+g),o&&(t[pf][Vo[0]]=Vo[2]+g)),l){sn(m=t[nf])&&(m=1);var v=fa(ca(t[ef],t[tf],m));d.set(Vo[4],v),o&&(t[pf][Vo[4]]=v)}r[df]=d}return r}if(u){if(yu[lf](a,t[ff](),c)){if(f)if(hd(u,Vo[3]))xd(e,71,"Unable to set ["+Vo[3]+"] as it has already been set by another instance");else{p="|"+t[ef]+"."+t[tf];u[gf](Vo[3],p),o&&(t[pf][Vo[3]]=p)}var g,m;if((g=a[vf]||s&&s[vf]())&&(hd(u,Vo[0])?xd(e,71,"Unable to set ["+Vo[0]+"] as it has already been set by another instance"):(u[gf](Vo[0],Vo[2]+g),o&&(t[pf][Vo[0]]=Vo[2]+g))),l)if(sn(m=t[nf])&&(m=1),hd(u,Vo[4]))xd(e,71,"Unable to set ["+Vo[4]+"] as it has already been set by another instance");else{v=fa(ca(t[ef],t[tf],m));u[gf](Vo[4],v),o&&(t[pf][Vo[4]]=v)}}return u}},e[mf]=function(t,n,r){if(-1===v||c<v){2!==a[hf]&&1!==a[hf]||"string"!=typeof t.id||"."===t.id[t.id[Ql]-1]||(t.id+="."),sn(t[yf])&&(t[yf]=new Date);var i=ac(t,Bu.dataType,Bu.envelopeType,e[id](),n,r);e[cf].track(i)}else c===v&&wd(e,55,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++c},e.addDependencyListener=function(e){return Cd(T,C++,e)},e.addDependencyInitializer=function(e){return Cd(S,C++,e)}}),_}return we(t,e),t.prototype.processTelemetry=function(e,t){this.processNext(e,t)},t.prototype.addDependencyInitializer=function(e){return null},t.identifier="AjaxDependencyPlugin",t.getDefaultConfig=Ed,t.getEmptyConfig=Md,t}(Ma),Dd=function(){},Pd=function(){this.id="browser",this.deviceClass="Browser"},Nd="sessionManager",Rd="update",Ld="isUserCookieSet",Ud="isNewUser",jd="getTraceCtx",zd="telemetryTrace",Vd="applySessionContext",Od="applyApplicationContext",qd="applyDeviceContext",Fd="applyOperationContext",Hd="applyUserContext",Bd="applyOperatingSystemContxt",Kd="applyLocationContext",Gd="applyInternalContext",$d="accountId",Xd="sdkExtension",Wd="getSessionId",Zd="namePrefix",Yd="sessionCookiePostfix",Jd="userCookiePostfix",Qd="idLength",ep="getNewId",tp="length",np="automaticSession",rp="authenticatedId",ip="sessionExpirationMs",ap="sessionRenewalMs",op="config",up="acquisitionDate",cp="renewalDate",sp="cookieDomain",lp="join",fp="cookieSeparator",dp="authUserCookieName",pp=function(e){this.sdkVersion=(e[Xd]&&e[Xd]()?e[Xd]()+"_":"")+"javascript:2.8.18"},vp=function(){},gp=function(){},mp=function(){function e(t,n){var r,i,a=Dr(n),o=bi(n);te(e,this,function(n){t||(t={}),pn(t[ip])||(t[ip]=function(){return e.acquisitionSpan}),pn(t[ap])||(t[ap]=function(){return e.renewalSpan}),n[op]=t;var u=n.config[Yd]&&n[op][Yd]()?n.config[Yd]():n.config[Zd]&&n[op][Zd]()?n[op][Zd]():"";function c(e,t){var n=!1,r=", session will be reset",i=t.split("|");if(i[tp]>=2)try{var o=+i[1]||0,u=+i[2]||0;isNaN(o)||o<=0?Rr(a,2,27,"AI session acquisition date is 0"+r):isNaN(u)||u<=0?Rr(a,2,27,"AI session renewal date is 0"+r):i[0]&&(e.id=i[0],e[up]=o,e[cp]=u,n=!0)}catch(c){Rr(a,1,9,"Error parsing ai_session value ["+(t||"")+"]"+r+" - "+Ln(c),{exception:hr(c)})}return n}function s(e,t){var a=e[up];e[cp]=t;var u=n[op],c=u[ap](),s=a+u[ip]()-t,l=[e.id,a,t],f=0;f=s<c?s/1e3:c/1e3;var d=u[sp]?u[sp]():null;o.set(r(),l.join("|"),u[ip]()>0?f:null,d),i=t}r=function(){return"ai_session"+u},n[np]=new gp,n[Rd]=function(){var t=Rn(),u=!1,l=n[np];l.id||(u=!function(e){var t=!1,n=o.get(r());if(n&&pn(n.split))t=c(e,n);else{var i=function(e,t){var n=Ko();if(null!==n)try{return n.getItem(t)}catch(r){Fo=!1,Rr(e,2,1,"Browser failed read of local storage. "+Ln(r),{exception:hr(r)})}return null}(a,r());i&&(t=c(e,i))}return t||!!e.id}(l));var f=n.config[ip]();if(!u&&f>0){var d=n.config[ap](),p=t-l[up],v=t-l[cp];u=(u=(u=p<0||v<0)||p>f)||v>d}u?function(e){var t=n[op]||{},r=(t[ep]?t[ep]():null)||Zr;n.automaticSession.id=r(t[Qd]?t[Qd]():22),n[np][up]=e,s(n[np],e),Wo()||Rr(a,2,0,"Browser does not support local storage. Session durations will be inaccurate.")}(t):(!i||t-i>e.cookieUpdateInterval)&&s(l,t)},n.backup=function(){var e,t,i,o=n[np];e=o.id,t=o[up],i=o[cp],function(e,t,n){var r=Ko();if(null!==r)try{return r.setItem(t,n),!0}catch(i){Fo=!1,Rr(e,2,3,"Browser failed write to local storage. "+Ln(i),{exception:hr(i)})}}(a,r(),[e,t,i][lp]("|"))}})}return e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e}(),hp=function(e,t,n,r){var i=this;i.traceID=e||na(),i.parentID=t;var a=fr();!n&&a&&a.pathname&&(n=a.pathname),i.name=tu(r,n)};function yp(e){return!("string"!=typeof e||!e||e.match(/,|;|=| |\|/))}var wp=function(){function e(t,n){this.isNewUser=!1,this.isUserCookieSet=!1;var r,i=Dr(n),a=bi(n);te(e,this,function(n){n[op]=t;var o=n.config[Jd]&&n[op][Jd]()?n[op][Jd]():"";r=function(){return e.userCookieName+o};var u=a.get(r());if(u){n[Ud]=!1;var c=u.split(e[fp]);c[tp]>0&&(n.id=c[0],n[Ld]=!!n.id)}function s(){var e=t||{};return((e[ep]?e[ep]():null)||Zr)(e[Qd]?t[Qd]():22)}function l(e){var t=Cn(new Date);return n.accountAcquisitionDate=t,n[Ud]=!0,[e,t]}function f(e){n[Ld]=a.set(r(),e,31536e3)}if(!n.id){n.id=s(),f(l(n.id)[lp](e[fp]));var d=t[Zd]&&t[Zd]()?t[Zd]()+"ai_session":"ai_session";!function(e,t){var n=Ko();if(null!==n)try{return n[so](t),!0}catch(r){Fo=!1,Rr(e,2,5,"Browser failed removal of local storage item. "+Ln(r),{exception:hr(r)})}}(i,d)}n[$d]=t[$d]?t[$d]():void 0;var p=a.get(e[dp]);if(p){var v=(p=decodeURI(p)).split(e[fp]);v[0]&&(n[rp]=v[0]),v[tp]>1&&v[1]&&(n[$d]=v[1])}n.setAuthenticatedUserContext=function(t,r,o){if(void 0===o&&(o=!1),!yp(t)||r&&!yp(r))Rr(i,2,60,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{n[rp]=t;var u=n[rp];r&&(n[$d]=r,u=[n[rp],n.accountId][lp](e[fp])),o&&a.set(e[dp],encodeURI(u))}},n.clearAuthenticatedUserContext=function(){n[rp]=null,n[$d]=null,a.del(e[dp])},n[Rd]=function(t){n.id===t&&n[Ld]||f(l(t||s())[lp](e[fp]))}})}return e.cookieSeparator="|",e.userCookieName="ai_user",e.authUserCookieName="ai_authUser",e}(),xp="ext",bp="tags";
/**
* TelemetryContext.ts
* @copyright Microsoft 2018
*/function Ip(e,t){e&&e[t]&&0===An(e[t])[tp]&&delete e[t]}var Cp=function(){function e(t,n,r){var i=this,a=t.logger;this.appId=function(){return null},this[Wd]=function(){return null},te(e,this,function(e){if(e.application=new Dd,e.internal=new pp(n),ir()){e[Nd]=new mp(n,t),e.device=new Pd,e.location=new vp,e.user=new wp(n,t);var o,u=void 0,c=void 0;r&&(u=r.getTraceId(),c=r.getSpanId(),o=r.getName()),e[zd]=new hp(u,c,o,a),e.session=new gp}e[Wd]=function(){var t=e.session,n=null;if(t&&xn(t.id))n=t.id;else{var r=(e[Nd]||{})[np];n=r&&xn(r.id)?r.id:null}return n},e[Vd]=function(t,n){Un(jn(t.ext,lc),"sesId",e[Wd](),xn)},e[Bd]=function(t,n){Un(t.ext,fc,e.os)},e[Od]=function(t,n){var r=e.application;if(r){var i=jn(t,bp);Un(i,dc.applicationVersion,r.ver,xn),Un(i,dc.applicationBuild,r.build,xn)}},e[qd]=function(t,n){var r=e.device;if(r){var i=jn(jn(t,xp),uc);Un(i,"localId",r.id,xn),Un(i,"ip",r.ip,xn),Un(i,"model",r.model,xn),Un(i,"deviceClass",r.deviceClass,xn)}},e[Gd]=function(t,n){var r=e.internal;if(r){var i=jn(t,bp);Un(i,dc.internalAgentVersion,r.agentVersion,xn),Un(i,dc.internalSdkVersion,tu(a,r.sdkVersion,64),xn),t.baseType!==Ar.dataType&&t.baseType!==Hu.dataType||(Un(i,dc.internalSnippet,r.snippetVer,xn),Un(i,dc.internalSdkSrc,r.sdkSrc,xn))}},e[Kd]=function(e,t){var n=i.location;n&&Un(jn(e,bp,[]),dc.locationIp,n.ip,xn)},e[Fd]=function(t,n){var r=e[zd];if(r){var i=jn(jn(t,xp),cc,{traceID:void 0,parentID:void 0});Un(i,"traceID",r.traceID,xn,sn),Un(i,"name",r.name,xn,sn),Un(i,"parentID",r.parentID,xn,sn)}},e.applyWebContext=function(e,t){var n=i.web;n&&Un(jn(e,xp),sc,n)},e[Hd]=function(t,n){var r=e.user;if(r){Un(jn(t,bp,[]),dc.userAccountId,r[$d],xn);var i=jn(jn(t,xp),oc);Un(i,"id",r.id,xn),Un(i,"authId",r[rp],xn)}},e.cleanUp=function(e,t){var n=e.ext;n&&(Ip(n,uc),Ip(n,oc),Ip(n,sc),Ip(n,fc),Ip(n,lc),Ip(n,cc))}})}return e.__ieDyn=1,e}(),Tp=function(e){function t(){var n,r,i,a=e.call(this)||this;return a.priority=110,a.identifier=pc,te(t,a,function(e,a){function o(){n=null,r=null,i=null}o(),e.initialize=function(o,u,c,s){a.initialize(o,u,c,s),function(a){var o=e.identifier,u=e.core,c=ba(null,a,u),s=t.getDefaultConfig();n=n||{},gn(s,function(e,t){n[e]=function(){return c.getConfig(o,e,t())}}),a.storagePrefix&&Xo(a.storagePrefix);i=u[jd](!1),e.context=new Cp(u,n,i),r=bu(e.context[zd],i),u.setTraceCtx(r),e.context.appId=function(){var e=u.getPlugin(vc);return e?e.plugin._appId:null},e._extConfig=n}(o)},e.processTelemetry=function(t,n){if(sn(t));else{n=e._getTelCtx(n),t.name===Hu.envelopeType&&n.diagLog().resetInternalMessageCount();var r=e.context||{};r.session&&"string"!=typeof e.context.session.id&&r[Nd]&&r[Nd][Rd]();var i=r.user;if(i&&!i[Ld]&&i[Rd](r.user.id),function(t,n){jn(t,"tags",[]),jn(t,"ext",{});var r=e.context;r[Vd](t,n),r[Od](t,n),r[qd](t,n),r[Fd](t,n),r[Hd](t,n),r[Bd](t,n),r.applyWebContext(t,n),r[Kd](t,n),r[Gd](t,n),r.cleanUp(t,n)}(t,n),i&&i[Ud]){i[Ud]=!1;var a=new Ar(72,(sr()||{}).userAgent||"");!function(e,t,n){Nr(e)[st](t,n)}(n.diagLog(),1,a)}e.processNext(t,n)}},e._doTeardown=function(e,t){var n=(e||{}).core();n&&n[jd]&&(n[jd](!1)===r&&n.setTraceCtx(i));o()}}),a}return we(t,e),t.getDefaultConfig=function(){var e,t,n=null;return(e={instrumentationKey:function(){return t}})[$d]=function(){return n},e.sessionRenewalMs=function(){return 18e5},e.samplingPercentage=function(){return 100},e.sessionExpirationMs=function(){return 864e5},e[sp]=function(){return n},e[Xd]=function(){return n},e.isBrowserLinkTrackingEnabled=function(){return!1},e.appId=function(){return n},e[Wd]=function(){return n},e[Zd]=function(){return t},e[Yd]=function(){return t},e[Jd]=function(){return t},e[Qd]=function(){return 22},e[ep]=function(){return n},e},t}(Ma);
/**
* PropertiesPlugin.ts
* @copyright Microsoft 2018
*/const Sp=Tp;var _p,kp="AuthenticatedUserContext",Ep="track",Mp="snippet",Ap="flush",Dp="pollInternalLogs",Pp="getPlugin",Np="evtNamespace",Rp=Ep+"Event",Lp=Ep+"Trace",Up=Ep+"Metric",jp=Ep+"PageView",zp=Ep+"Exception",Vp=Ep+"DependencyData",Op="set"+kp,qp="clear"+kp,Fp="endpointUrl",Hp="diagnosticLogInterval",Bp="config",Kp="context",Gp="push",$p="version",Xp="queue",Wp="connectionString",Zp="instrumentationKey",Yp="appInsights",Jp="disableIkeyDeprecationMessage",Qp="getTransmissionControls",ev="onunloadFlush",tv="addHousekeepingBeforeUnload",nv="indexOf",rv=[Mp,"dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],iv=function(){function e(t){var n,r,i,a,o,u,c,s=this;te(e,this,function(e){o=ri("AISKU"),u=null,n=null,r=null,i=null,a=null,a=""+(t.sv||t[$p]||""),t[Xp]=t[Xp]||[],t[$p]=t[$p]||2;var l=t[Bp]||{};if(l[Wp]){var f=Iu(l[Wp]),d=f.ingestionendpoint;l[Fp]=d?d+eo:l[Fp],l[Zp]=f.instrumentationkey||l[Zp]}e[Yp]=new bs,r=new Sp,n=new Ad,i=new Xl,c=new Oa,e.core=c;var p=!!sn(l[Jp])||l[Jp];l[Wp]||p||Rr(c.logger,1,106,"Instrumentation key support will end soon, see aka.ms/IkeyMigrate"),e[Mp]=t,e[Bp]=l,e.config[Hp]=e.config[Hp]&&e[Bp][Hp]>0?e[Bp][Hp]:1e4,e[Ap]=function(e){void 0===e&&(e=!0),Fr(c,function(){return"AISKU.flush"},function(){Tn(c[Qp](),function(t){Tn(t,function(t){t[Ap](e)})})},null,e)},e[ev]=function(e){void 0===e&&(e=!0),Tn(c[Qp](),function(t){Tn(t,function(t){t[ev]?t[ev]():t[Ap](e)})})},e.loadAppInsights=function(t,o,u){return void 0===t&&(t=!1),t&&e[Bp].extensions&&e[Bp].extensions.length>0&&On("Extensions not allowed in legacy mode"),Fr(e.core,function(){return"AISKU.loadAppInsights"},function(){var s=[];s[Gp](i),s[Gp](r),s[Gp](n),s[Gp](e[Yp]),c.initialize(e[Bp],s,o,u),e[Kp]=r[Kp],_p&&e[Kp]&&(e[Kp].internal.sdkSrc=_p),function(n){if(n){var r="";sn(a)||(r+=a),t&&(r+=".lg"),e[Kp]&&e[Kp].internal&&(e[Kp].internal.snippetVer=r||"-"),gn(e,function(e,t){xn(e)&&!pn(t)&&e&&"_"!==e[0]&&-1===Sn(rv,e)&&(n[e]=t)})}}(e[Mp]),e.emptyQueue(),e[Dp](),e[tv](e)}),e},e.updateSnippetDefinitions=function(t){!function(e,t,n){if(e&&t&&dn(e)&&dn(t)){var r=function(r){if(xn(r)){var i=t[r];pn(i)?n&&!n(r,!0,t,e)||(e[r]=qn(t,r)):n&&!n(r,!1,t,e)||(fn(e,r)&&delete e[r],Dn(e,r,function(){return t[r]},function(e){t[r]=e})||(e[r]=i))}};for(var i in t)r(i)}}(t,e,function(e){return e&&-1===Sn(rv,e)})},e.emptyQueue=function(){try{if(yn(e.snippet[Xp])){for(var t=e.snippet[Xp].length,n=0;n<t;n++){(0,e.snippet[Xp][n])()}e.snippet[Xp]=void 0,delete e.snippet[Xp]}}catch(r){r&&pn(r.toString)&&r.toString()}},e[tv]=function(e){if(ir()||or()){var t=function(){if(e[ev](!1),pn(s.core[Pp])){var t=s.core[Pp](pc);if(t){var n=t.plugin;n&&n[Kp]&&n[Kp]._sessionManager&&n[Kp]._sessionManager.backup()}}},n=!1,r=e.appInsights[Bp].disablePageUnloadEvents;u||(u=Wi(o,c[Np]&&c[Np]())),e.appInsights.config.disableFlushOnBeforeUnload||(ea(t,r,u)&&(n=!0),ta(t,r,u)&&(n=!0),n||(i=sr())&&i.product&&"ReactNative"===i.product||Rr(e[Yp].core.logger,1,19,"Could not add handler for beforeunload and pagehide")),n||e.appInsights.config.disableFlushOnUnload||ta(t,r,u)}var i},e.getSender=function(){return i},e.unload=function(t,n,r){e[ev](t),u&&(Qi([ji,Ui,Li],null,u),function(e,t){var n=Wi(zi,t);Qi([Li],e,n),Qi([Ri],null,n)}(null,u)),c.unload&&c.unload(t,n,r)},Hn(e,e[Yp],["getCookieMgr",Rp,jp,"trackPageViewPerformance",zp,"_onerror",Lp,Up,"startTrackPage","stopTrackPage","startTrackEvent","stopTrackEvent"]),Hn(e,function(){return n},[Vp,"addDependencyListener","addDependencyInitializer"]),Hn(e,c,["addTelemetryInitializer",Dp,"stopPollingInternalLogs",Pp,"addPlugin",Np,"addUnloadCb","getTraceCtx"]),Hn(e,function(){var e=r[Kp];return e?e.user:null},[Op,qp])})}return e.prototype.addDependencyInitializer=function(e){return null},e}();!function(){var e=null,t=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var n=(document||{}).currentScript;n&&(e=n.src)}catch(o){}if(e)try{var r=e.toLowerCase();if(r)for(var i="",a=0;a<t.length;a++)if(-1!==r[nv](t[a])){i="cdn"+(a+1),-1===r[nv]("/scripts/")&&(-1!==r[nv]("/next/")?i+="-next":-1!==r[nv]("/beta/")&&(i+="-beta")),_p=i+"";break}}catch(o){}}();const av=new(function(e){function t(){var n,r,i,a,o=e.call(this)||this;return o.priority=185,o.identifier="ReactPlugin",te(t,o,function(t,u){function c(){n=null,r=null,i=null,a=null}function s(){return n||Rr(t.diagLog(),1,64,"Analytics plugin is not available, React plugin telemetry will not be sent: "),n}c(),t.initialize=function(u,c,s,l){if(e.prototype.initialize.call(o,u,c,s,l),r=u.extensionConfig&&u.extensionConfig[t.identifier]?u.extensionConfig[t.identifier]:{history:null},Tn(s,function(e){"ApplicationInsightsAnalytics"===e.identifier&&(n=e)}),r.history){!function(e){var n=function(e){var n=null;n="location"in e?e.location:e,a=setTimeout(function(){a=null;var e={uri:n.pathname};t.trackPageView(e)},500)};i=e.listen(n)}(r.history);var f={uri:r.history.location.pathname};t.trackPageView(f)}},t.getCookieMgr=function(){return bi(t.core)},t.getAppInsights=s,t.processTelemetry=function(e,n){t.processNext(e,n)},t._doTeardown=function(e,t,n){pn(i)&&i(),a&&clearTimeout(a),c()},Hn(t,s,["trackMetric","trackPageView","trackEvent","trackException","trackTrace"]),Dn(t,"_extensionConfig",function(){return r})}),o}return we(t,e),t.__ieDyn=1,t}(Ma)),ov=new iv({config:{instrumentationKey:{}.VITE_AZURE_APP_INSIGHTS_KEY||"",enableAutoRouteTracking:!0,enableCorsCorrelation:!0,enableRequestHeaderTracking:!0,enableResponseHeaderTracking:!0,disableFetchTracking:!1,extensions:[av]}}),uv={}.VITE_AZURE_MAPS_KEY||"",cv={}.VITE_AZURE_MAPS_KEY_EMERGENCY||"",sv={}.VITE_AZURE_COGNITIVE_ENDPOINT||"",lv={}.VITE_AZURE_COGNITIVE_KEY||"",fv={}.VITE_AZURE_STORAGE_ACCOUNT||"",dv={}.VITE_AZURE_FUNCTIONS_URL||"";const pv=new class{initialized=!1;textAnalyticsClient=null;anomalyDetectorClient=null;async initialize(){if(!this.initialized)try{if({}.VITE_AZURE_APP_INSIGHTS_KEY&&(ov.loadAppInsights(),ov.trackPageView()),sv&&lv)try{const e=new d(lv);this.textAnalyticsClient=new l(sv,e),this.anomalyDetectorClient=new f(sv,e)}catch(e){}this.initialized=!0}catch(e){throw e}}getAppInsights(){return ov}getAzureMapsKey(){return uv||cv}getBlobServiceClient(){return null}getQueueServiceClient(){return null}getTextAnalyticsClient(){return this.textAnalyticsClient}getAnomalyDetectorClient(){return this.anomalyDetectorClient}getComputerVisionClient(){return null}getFunctionsUrl(){return dv}getStorageAccountName(){return fv}getConfigStatus(){return{appInsights:!!{}.VITE_AZURE_APP_INSIGHTS_KEY,azureMaps:!!uv,cognitiveServices:!(!sv||!lv),storage:!!fv,functions:!!dv,initialized:this.initialized}}},vv=n.createContext(void 0),gv=({children:t})=>{const[r,i]=n.useState(null),[a,o]=n.useState([]),[u,c]=n.useState([]),[l,f]=n.useState(!0),[d,p]=n.useState(null),[v,g]=n.useState({lat:40.4168,lon:-3.7038}),[m,h]=n.useState(w.getServiceStatus()),y=async()=>{f(!0),p(null);try{const e=pv.getAzureMapsKey();e&&!m.configured&&(w.configure(e),h(w.getServiceStatus()));const[t,n,r]=await Promise.all([w.getCurrentWeather(v.lat,v.lon),w.getForecast(v.lat,v.lon),w.getHourlyData(v.lat,v.lon)]);i(t),o(n),c(r)}catch(e){p(e instanceof Error?e.message:"Error al obtener datos meteorológicos")}finally{f(!1)}};return n.useEffect(()=>{y();const e=setInterval(y,9e5);return()=>clearInterval(e)},[v]),e.jsx(vv.Provider,{value:{currentWeather:r,forecast:a,hourlyData:u,loading:l,error:d,refreshWeather:y,setLocation:(e,t)=>{g({lat:e,lon:t})},configureAzureMaps:e=>{w.configure(e),s.configure(e),h(w.getServiceStatus()),y()},serviceStatus:m},children:t})};const mv=new class{textAnalyticsClient=null;anomalyDetectorClient=null;isConfigured=!1;constructor(){this.initialize()}async initialize(){try{if(this.textAnalyticsClient=pv.getTextAnalyticsClient(),this.anomalyDetectorClient=pv.getAnomalyDetectorClient(),!this.textAnalyticsClient&&{}.VITE_AZURE_COGNITIVE_ENDPOINT&&{}.VITE_AZURE_COGNITIVE_KEY){const e=new d({}.VITE_AZURE_COGNITIVE_KEY);this.textAnalyticsClient=new l({}.VITE_AZURE_COGNITIVE_ENDPOINT,e)}if(!this.anomalyDetectorClient&&{}.VITE_AZURE_COGNITIVE_ENDPOINT&&{}.VITE_AZURE_COGNITIVE_KEY){const e=new d({}.VITE_AZURE_COGNITIVE_KEY);this.anomalyDetectorClient=new f({}.VITE_AZURE_COGNITIVE_ENDPOINT,e)}this.isConfigured=!(!this.textAnalyticsClient&&!this.anomalyDetectorClient),this.isConfigured}catch(e){}}async analyzeText(e,t="es"){if(!this.textAnalyticsClient)return null;try{const[n,r,i,a]=await Promise.all([this.textAnalyticsClient.analyzeSentiment([{id:"1",text:e,language:t}]),this.textAnalyticsClient.recognizeEntities([{id:"1",text:e,language:t}]),this.textAnalyticsClient.extractKeyPhrases([{id:"1",text:e,language:t}]),this.textAnalyticsClient.detectLanguage([e])]),o=n[0],u=r[0],c=i[0],s=a[0];if(o.error||u.error||c.error||s.error)throw new Error("Error in text analysis");return{sentiment:{score:o.confidenceScores.positive,label:"mixed"===o.sentiment?"neutral":o.sentiment,confidence:Math.max(o.confidenceScores.positive,o.confidenceScores.negative,o.confidenceScores.neutral)},entities:u.entities.map(e=>({text:e.text,category:e.category,subCategory:e.subCategory,confidence:e.confidenceScore})),keyPhrases:c.keyPhrases,language:s.primaryLanguage.iso6391Name}}catch(n){return null}}async analyzeImage(e){return null}async detectAnomalies(e,t=95){if(!this.anomalyDetectorClient)return null;try{const n={series:e.map(e=>({timestamp:e.timestamp,value:e.value})),granularity:"hourly",maxAnomalyRatio:.25,sensitivity:t},r=await this.anomalyDetectorClient.detectEntireSeriesAnomaly(n);return r.isAnomaly&&r.expectedValues&&r.upperMargins&&r.lowerMargins?r.isAnomaly.map((e,t)=>({isAnomaly:e,severity:e?100*Math.random():0,score:e?1:0,expectedValue:r.expectedValues[t],boundaryUnits:1,upperBoundary:r.expectedValues[t]+r.upperMargins[t],lowerBoundary:r.expectedValues[t]-r.lowerMargins[t]})):null}catch(n){return null}}async assessFireRisk(e,t,n){try{const r=`\n        Evaluación de riesgo de incendio:\n        Temperatura: ${e.temperature}°C\n        Humedad: ${e.humidity}%\n        Velocidad del viento: ${e.windSpeed} km/h\n        Índice de vegetación (NDVI): ${t?.ndvi||.5}\n        Sequedad de vegetación: ${t?.dryness||.5}\n        Incendios históricos en la zona: ${n?.length||0}\n      `,i=(await this.analyzeText(r),Math.min(40,Math.max(0,2*(e.temperature-15)))),a=Math.min(30,Math.max(0,.75*(60-e.humidity))),o=Math.min(30,Math.max(0,1.5*e.windSpeed)),u=Math.min(25,Math.max(0,25*(1-(t?.ndvi||.5)))),c=Math.min(25,25*(t?.dryness||.5)),s=Math.min(10,2*(n?.length||0)),l=i+a+o+u+c+s;let f;f=l>=85?"extreme":l>=65?"high":l>=45?"medium":"low";const d=this.generateFireRiskRecommendations(f,e);return{riskScore:Math.min(100,l),riskLevel:f,confidence:.85,factors:{temperature:i,humidity:a,windSpeed:o,vegetation:u,dryness:c,historical:s},recommendations:d}}catch(r){return this.fallbackFireRiskAssessment(e)}}generateFireRiskRecommendations(e,t){const n=[];switch(e){case"extreme":n.push("🚨 ACTIVAR PROTOCOLO DE EMERGENCIA NIVEL 4 - Riesgo extremo de incendio"),n.push("🚫 Prohibir todas las actividades que puedan generar ignición"),n.push("🚒 Desplegar recursos preventivos en zonas de alto riesgo"),n.push("📡 Activar centros de comando de emergencia"),n.push("🏃 Preparar evacuaciones preventivas en zonas vulnerables");break;case"high":n.push("⚠️ ACTIVAR PROTOCOLO DE EMERGENCIA NIVEL 3 - Riesgo alto de incendio"),n.push("🚧 Restringir acceso a zonas forestales"),n.push("👮 Aumentar patrullaje preventivo"),n.push("🚒 Preparar recursos de extinción");break;case"medium":n.push("📊 ACTIVAR PROTOCOLO DE EMERGENCIA NIVEL 2 - Riesgo moderado"),n.push("👁️ Mantener vigilancia aumentada"),n.push("✅ Verificar disponibilidad de recursos");break;case"low":n.push("📋 Mantener protocolos estándar de prevención")}return t.temperature>35&&n.push("🌡️ Temperatura crítica: Evitar trabajos al aire libre durante horas pico"),t.humidity<20&&n.push("💧 Humedad crítica: Riesgo extremo de ignición y propagación rápida"),t.windSpeed>25&&(n.push("💨 Vientos fuertes: Riesgo de propagación errática y salto de fuego"),n.push("🚁 Considerar suspensión de operaciones aéreas de extinción")),n}fallbackFireRiskAssessment(e){const{temperature:t,humidity:n,windSpeed:r}=e;let i,a=0;return t>35?a+=40:t>30?a+=30:t>25?a+=20:t>20&&(a+=10),n<20?a+=30:n<30?a+=25:n<40?a+=20:n<50?a+=15:n<60&&(a+=10),r>25?a+=30:r>20?a+=25:r>15?a+=20:r>10?a+=15:r>5&&(a+=10),i=a>=80?"extreme":a>=60?"high":a>=40?"medium":"low",{riskScore:a,riskLevel:i,confidence:.7,factors:{temperature:Math.min(40,t>35?40:t>30?30:t>25?20:10),humidity:n<20?30:n<30?25:n<40?20:15,windSpeed:r>25?30:r>20?25:r>15?20:15,vegetation:0,dryness:0,historical:0},recommendations:this.generateFireRiskRecommendations(i,{temperature:t,humidity:n,windSpeed:r})}}getServiceStatus(){return{configured:this.isConfigured,textAnalytics:!!this.textAnalyticsClient,computerVision:!1,anomalyDetector:!!this.anomalyDetectorClient,provider:"Microsoft Azure Cognitive Services"}}},hv=n.createContext(void 0),yv=({children:t})=>{const[r,i]=n.useState(mv.getServiceStatus());n.useEffect(()=>{const e=setInterval(()=>{i(mv.getServiceStatus())},3e4);return()=>clearInterval(e)},[]);const a={isConfigured:r.configured,assessFireRisk:mv.assessFireRisk.bind(mv),analyzeText:mv.analyzeText.bind(mv),analyzeImage:mv.analyzeImage.bind(mv),detectAnomalies:mv.detectAnomalies.bind(mv),serviceStatus:r};return e.jsx(hv.Provider,{value:a,children:t})},wv=r.lazy(()=>c(()=>import("../js/WelcomeScreen-4c802193.js"),["js/WelcomeScreen-4c802193.js","js/tactical-components-ecb51026.js","js/ui-vendor-b7f86872.js","js/react-vendor-e58626de.js","js/map-vendor-95ccbafd.js"])),xv=r.lazy(()=>c(()=>import("../js/ZoneConfiguration-65f1d62a.js"),["js/ZoneConfiguration-65f1d62a.js","js/tactical-components-ecb51026.js","js/ui-vendor-b7f86872.js","js/react-vendor-e58626de.js","js/map-vendor-95ccbafd.js","assets/ZoneConfiguration-ba550af6.css","assets/leaflet-4d8e306f.css"])),bv=r.lazy(()=>c(()=>import("../js/EmergencyDashboard-6904e265.js"),["js/EmergencyDashboard-6904e265.js","js/tactical-components-ecb51026.js","js/ui-vendor-b7f86872.js","js/react-vendor-e58626de.js","js/map-vendor-95ccbafd.js","js/chart-vendor-bdde4f4f.js","assets/leaflet-4d8e306f.css"])),Iv=r.lazy(()=>c(()=>import("../js/BiodiversityAnalysis-2105af73.js"),["js/BiodiversityAnalysis-2105af73.js","js/tactical-components-ecb51026.js","js/ui-vendor-b7f86872.js","js/react-vendor-e58626de.js","js/map-vendor-95ccbafd.js","js/geo-vendor-30c39c1d.js","js/emergency-services-9499df0c.js"])),Cv=()=>e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"}),e.jsx("p",{className:"text-gray-600",children:"Cargando..."})]})});function Tv(){const[t,r]=n.useState(null),[u,c]=n.useState([]),[s,l]=n.useState("welcome");n.useEffect(()=>{ov.trackPageView({name:`Step: ${s}`})},[s]);return e.jsx(yv,{children:e.jsx(m,{children:e.jsx(gv,{children:e.jsx(y,{children:e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx(n.Suspense,{fallback:e.jsx(Cv,{}),children:e.jsxs(i,{children:[e.jsx(a,{path:"/",element:"welcome"===s?e.jsx(wv,{onSetup:e=>{r(e),l("zone-config"),ov.trackEvent({name:"OrganizationConfigured",properties:{type:e.type}})}}):"zone-config"===s?e.jsx(xv,{organization:t,onZonesConfigured:e=>{c(e),l("dashboard"),ov.trackEvent({name:"ZonesConfigured",properties:{count:e.length}})}}):e.jsx(bv,{organization:t,monitoringZones:u})}),e.jsx(a,{path:"/biodiversity",element:e.jsx(Iv,{})}),e.jsx(a,{path:"*",element:e.jsx(o,{to:"/",replace:!0})})]})})})})})})})}(async()=>{try{await pv.initialize()}catch(t){}p.createRoot(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(u,{children:e.jsx(Tv,{})})}))})();export{ov as a,pv as b};
